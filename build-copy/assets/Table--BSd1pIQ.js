import{_ as b,u as x,o as l,c as i,a as t,t as o,n as g,e as I,i as m,a9 as D,r as _,d as F,w as k,K as A,L as z,Z as T,aa as K,A as h,ab as q,ac as R,ad as H,a1 as C,ae as Z,af as Q,ag as Y,ah as G,ai as J,b as c,F as N,v as M,z as W,m as S}from"./app-8i59_tig.js";import{I as X}from"./Input-AJAfOiLl.js";import{I as $}from"./InputDefault-8H7puYZk.js";import{M as U}from"./Switch-aMALSFy7.js";import ee from"./CreateForm-FMLZ0r2-.js";import{_ as te}from"./pagination-01.vue_vue_type_style_index_0_lang-WLTl4Kz3.js";import{P as se}from"./paginate-8X5YIlX3.js";import{i as re}from"./InputText-AWTKh5l3.js";import{T as ae}from"./Textarea-wKIrbfyC.js";import{I as ne,a as oe}from"./InputTime-7iBC3f2i.js";import{T as le}from"./Table-ZWPqNDPs.js";import{P as ie}from"./Page-mAivDXea.js";import{S as ue}from"./Select-YcpyyNbB.js";import{P as de}from"./PrimaryButton2-zUn7s8oD.js";import{D as ce}from"./DangerButton-NFp56Med.js";import{C as me}from"./Checkbox01-rD0XVLDM.js";const he={data(){return{order:"asc",search:"",column:"id"}},methods:{getName(e){return x().getName(e)}}},_e={class:"grid grid-cols-7 border-b border-stroke dark:border-strokedark sm:grid-cols-7 overflow-x-auto"},pe={class:"flex items-center justify-center p-2.5 xl:p-5"},fe={class:"font-medium text-black dark:text-white"},ge={class:"flex items-center justify-center p-2.5 xl:p-5"},ye={class:"font-medium text-black dark:text-white"},be={class:"flex items-center justify-center p-2.5 xl:p-5"},ke={class:"font-medium text-black dark:text-white"},xe={class:"flex items-center justify-center p-2.5 xl:p-5"},we={class:"font-medium text-black dark:text-white"},ve={class:"flex items-center justify-center p-2.5 xl:p-5"},Ne={class:"font-medium text-black dark:text-white"},Me={class:"flex items-center justify-center p-2.5 xl:p-5"},Pe={class:"font-medium text-black dark:text-white"},Te={class:"flex items-center justify-center p-2.5 xl:p-5"},Ce={class:"font-medium text-black dark:text-white"};function Se(e,a,u,d,n,s){return l(),i("div",_e,[t("div",pe,[t("p",fe,o(s.getName("name")),1)]),t("div",ge,[t("p",ye,o(s.getName("last_name")),1)]),t("div",be,[t("p",ke,o(s.getName("Doctor")),1)]),t("div",xe,[t("p",we,o(s.getName("TreatmentStarted_at")),1)]),t("div",ve,[t("p",Ne,o(s.getName("status")),1)]),t("div",Me,[t("p",Pe,o(s.getName("Payment_status")),1)]),t("div",Te,[t("p",Ce,o(s.getName("actions")),1)])])}const Ie=b(he,[["render",Se],["__scopeId","data-v-43f906b4"]]),De={props:{number:{type:Number,default:0},active:{type:Boolean,default:!1},link:{type:String,default:0}}};function Ue(e,a,u,d,n,s){return l(),i("a",{class:g([u.active?"active":"","cursor-pointer"])},o(u.number),3)}const Ee=b(De,[["render",Ue]]),Le={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},Be={class:"mb-2.5 block text-black dark:text-white"},je={key:0,class:"text-danger"};function Oe(e,a,u,d,n,s){return l(),i("div",{class:g(u.Couple?"mb-4.5":"w-full xl:w-1/2")},[t("label",Be,o(u.Label),1),t("select",{onInput:a[0]||(a[0]=p=>this.$emit("onSelect",p.target.value)),class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[I(e.$slots,"default")],32),u.isError?(l(),i("p",je,o(u.message),1)):m("",!0)],2)}const Ve=b(Le,[["render",Oe]]),Fe={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},Ae={class:"mb-2.5 block text-black dark:text-white"},ze=["value","type"],Ke={key:0,class:"text-danger"};function qe(e,a,u,d,n,s){return l(),i("div",{class:g(u.Couple?"mb-4.5":"w-full xl:w-1/2")},[t("label",Ae,o(u.Label),1),t("input",{value:u.Value,type:u.Type,min:"0",class:g([u.isError==!0?"isError":"","w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"...",onInput:a[0]||(a[0]=p=>this.$emit("onInput",p.target.value))},null,42,ze),u.isError?(l(),i("p",Ke,o(u.message),1)):m("",!0)],2)}const Re=b(Fe,[["render",qe]]),He={components:{Select:ue,ModalLayout:U,Input:Re,Page:ie},data(){return{status:1,categoryName:"",errorObj:{},Model:[],doctor:[],Patient:[]}},props:{isButton:{type:Boolean,default:!1},isShowModal:{type:Boolean,default:!1},UpdateId:{type:Number,default:!1}},methods:{getName(e){return x().getName(e)},getClass(e){return e==10?"unmount":e==11?"fullUnmount":""},getStatus(e){if(e==7)return this.getName("New");if(e==8)return this.getName("DoctorFinished");if(e==9)return this.getName("Finished");if(e==10)return this.getName("Unpaint");if(e==11)return this.getName("NotFullPaint");if(e==12)return this.getName("Closed")},hasKey(e){return e in this.errorObj},async getModal(){const e=await D(this.UpdateId);this.Model=e.data,this.doctor=e.data.doctor,this.Patient=e.data.patient}},watch:{UpdateId:function(e,a){this.getModal()}}};function Ze(e,a,u,d,n,s){const p=_("ModalLayout");return l(),F(p,{onOnButton:a[0]||(a[0]=y=>this.$emit("onSubmit",!0)),isButton:u.isButton,isModal:u.isShowModal,onCloseModal:a[1]||(a[1]=y=>this.$emit("closeModal",y)),Title:n.Patient.last_name!=null?n.Patient.last_name+" "+n.Patient.first_name:""},{default:k(()=>[I(e.$slots,"default",{},void 0,!0)]),_:3},8,["isButton","isModal","Title"])}const Qe=b(He,[["render",Ze],["__scopeId","data-v-acb6c2dd"]]),Ye={setup(){const e=x();return{useConterStore:x,counterStore:e}},components:{Checkbox01:me,DangerButton:ce,PrimaryButton2:de,ShowForm:Qe,Table:le,Paginate:se,InputTime:ne,InputDateTime:oe,Pagination01:te,CreateForm:ee,Textarea:ae,ModalLayout:U,Input:X,VueAwesomePaginate:A,InputDefault:$,PaginateBtn:Ee,TableHeader:Ie,InputText:re,Select:Ve},props:{Treatments:{type:[Array,Object],default:[]},Header:{type:Boolean,default:!0}},data(){return{items:[],search:"",column:"updated_at",userPayments:0,order:"asc",paginateCount:10,pagination:{},last_page:0,currentPage:1,password_1:".",password_2:"",isPasswordError:!1,ExitModal:!1,isPaymentModal:!1,Duration:0,service_id:"",PaymentType:"",Amount:"",isShowModal:!1,errorObj:[],UpdateId:0,crud:"",Employees:[],Employee_id:0,DateTime:"",TextData:"",Time:"0",Modal:0,Item:[],patient_id:0,status:1,categoryName:"",Model:[],doctor:[],Patient:[],paymentTypes:[],PatientId:"",debtUser:"doctor",debtData:"",debtText:"",patientPayments:[],discount_percent:0,discount_sum:0,discount_total_sum:0,RealPrice:0,discountError:!1,isPayment:!1,cancletedText:""}},methods:{router(){return z},async getEmployee(){const e=await T(null,1e3);this.Employees=e.data.employees},async treatementCancleted(e){let a={treatment_id:this.Item.id,description:this.cancletedText};const u=await K(a);u.status?(h("success","Canceled !"),this.isShowModal=!1,this.getItems()):(this.errorObj=u.data,h("error","Error!")),this.isPayment=!1},cancletedModal(e){this.Item=e,this.Modal="cancleted",this.cancletedText="",this.UpdateId=e.id,this.isShowModal=!0},onInfoModal(e){this.Item=e,this.Modal="info",this.UpdateId=e.id,this.isShowModal=!0},sumInput(e){this.discount_sum=e,this.RealPrice>0?this.discount_percent=100*e/this.RealPrice:this.discount_percent=0},percentInput(e){Number(e)>100?this.discount_percent=100:this.discount_percent=e,this.RealPrice>0?this.discount_sum=this.RealPrice*e/100:this.discount_sum=0},async treatementFinished(e){const a=await q(e);console.log(a),a.status?(h("success","Treatment is complete"),this.getItems()):h("error","Error!")},debtModal(e){this.Item=e,this.debtUser="doctor",this.Modal="debt",this.getDate(),this.UpdateId=e.id,this.isShowModal=!0},discountModal(e){this.Item=e,this.debtUser=e.type_of_discount!=15?"doctor":"polyclinic",this.Modal="discount",this.discount_sum=e.discount_sum,this.discount_percent=e.discount_percent,this.discount_total_sum=Number(e.user_payment),this.RealPrice=e.service_real_price,this.UpdateId=e.id,this.isShowModal=!0,console.log("Item",e)},istoryPaymentModal(e){this.Item=e,this.Modal="istory-payment",this.patientPayments=[],this.getPatientPayments(e.patient_id),this.UpdateId=e.id,this.isShowModal=!0},paymentNumberFormat(e){const a=document.querySelector(".format_input");["0","1","2","3","4","5","6","7","8","9"," ",""].includes(e.slice(e.length-1,e.length))==!0?(a.value=this.counterStore.formatNumber(e),this.Amount=Number(e.replace(/\s+/g,""))):a.value=this.counterStore.formatNumber(this.Amount),console.log("trih",this.Amount)},async getModal(){const e=await D(this.UpdateId);this.Model=e.data,this.doctor=e.data.doctor,this.Patient=e.data.patient},async sendDiscount(){if(this.discount_sum>this.discount_total_sum)return this.discountError=!0,console.log("error",this.discount_sum),!0;let e={discount_sum:this.discount_sum,discount_percent:this.discount_percent,discount_total_sum:this.discount_total_sum,discounter:this.debtUser=="doctor"?16:15,treatment_id:this.Item.id};const a=await R(e);console.log("response:",a),a.status?(this.debtUser="",this.discount_sum=0,this.discount_total_sum=0,this.discount_percent=0,this.errorObj=[],this.isShowModal=!1,this.getItems(),h("success","Saved successfully !")):(this.errorObj=a.data,h("error","There is an error in the form"))},async saveOwed(){let e={patient_id:this.Item.patient_id,authorizing:this.debtUser,treatment_id:this.Item.id,return_at:this.debtData,description:this.debtText};const a=await H(e);console.log("Response:->",a),a.status?(this.debtUser="",this.debtData="",this.debtText="",this.isShowModal=!1,h("success","Saved successfully !")):(this.errorObj=a.data,h("error","There is an error in the form"))},async getPatientPayments(e){const a=await C(e);this.patientPayments=a.data.payments.items,console.log("Payment:",a.data.payments.items)},async getPayments(e){return(await Z(e)).data},async getPaymentTypes(){const e=await Q(1,1e3);this.paymentTypes=e.data.items},getDate(){const e=new Date,a=e.getFullYear(),u=("0"+(e.getMonth()+1)).slice(-2),d=("0"+e.getDate()).slice(-2),n=("0"+e.getHours()).slice(-2),s=("0"+e.getMinutes()).slice(-2);var p=`${a}-${u}-${d} ${n}:${s}`,y=`${a}-${u}-${d}`;this.DateTime=p,this.debtData=y},Show(e){this.Model=[],this.Model=e,this.Modal=0,this.UpdateId=e.id,this.isShowModal=!0},paymentModal(e){this.Modal=1,this.UpdateId=e.id,this.PatientId=e.patient_id,this.userPayments=e.user_payment,this.isShowModal=!0,this.Modal="payment"},onClickHandler(e){this.paginate=e,this.currentPage=e,this.getItems()},async getEmployees(){await T(null,1e3)},onModal(e){this.service_id=e,this.isPaymentModal=!0},getName(e){return x().getName(e)},openModal(){document.querySelector(".modal").classList.remove("hidden")},async getItems(){const e=await Y(this.currentPage,this.paginateCount);this.pagination=e.data.pagination,this.last_page=e.data.pagination.last_page,this.current_page=e.data.pagination.currentPage,this.items=e.data.items},async onPayment(){if(this.isPayment=!0,this.Modal=="debt")return this.saveOwed(),!0;if(this.Modal=="discount")return this.sendDiscount(),!0;if(this.Modal=="cancleted")return this.treatementCancleted(),!0;if(this.Modal=="info")return this.isPayment=!1,this.isShowModal=!1,!0;if(this.userPayments<this.Amount)return this.isPayment=!1,h("error",this.getName("PaymentError")),!1;const e={patient_id:this.PatientId,payment_type_id:this.PaymentType,treatment_id:this.UpdateId,amount:this.Amount},a=await G(e);console.log("Response:",a),a.status?(this.PaymentType="",this.PatientId="",this.Amount="",this.isShowModal=!1,this.paymentTypes=[],this.getPaymentTypes(),this.getItems(),this.isPayment=!1,h("success","The payment was made successfully")):(this.isPayment=!1,this.errorObj=a.data,h("error","There is an error in the form"))},async getModel(){(await C(this.$route.query.id)).status},async editPassword(e){this.password_1=e,e==this.password_2},async clickSearch(e,a){this.search=e,this.order=a;var u={search:this.search,order:this.order,column:this.column,paginate:this.paginateCount};const d=await J(u);this.items=d.data.items},async onDelete(e){var a="Вы уверены, что хотите это удалить?";confirm(a)&&(await patientDelete(e)).status==!0&&(h("success","Deleted successfully !"),this.getItems())},onCheck(e){return window.location.origin+"#/check?id="+e},hasKey(e){return this.errorObj.hasOwnProperty(e)},getStatus(e){if(e==7)return this.getName("New");if(e==8)return this.getName("DoctorFinished");if(e==9)return this.getName("Finished");if(e==10)return this.getName("Unpaint");if(e==11)return this.getName("NotFullPaint");if(e==12)return this.getName("Closed");if(e==17)return this.getName("Concleted")},getClass(e){return e==10?"unmount":e==11||e==7?"fullUnmount":e==17?"concleted":""},onSearch(e){this.order=e,this.clickSearch()},onPaginate(e){this.paginateCount=e,this.getItems()}},watch:{UpdateId:function(e,a){this.getModal()}},mounted(){this.getItems(),this.getEmployee(),this.getDate(),this.getPaymentTypes()}},Ge={class:"col-span-12 xl:col-span-12"},Je={class:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1"},We={class:"mb-6 text-xl font-bold text-black dark:text-white"},Xe={class:"flex flex-col"},$e={key:0,class:"grid grid-cols-3 rounded-sm mb-2 sm:grid-cols-5 relative"},et={selected:"",value:"sort_order"},tt=t("option",{value:"id"},"Id",-1),st={value:"start"},rt={value:"first_name"},at={value:"last_name"},nt={value:"status"},ot={value:"created_at"},lt={value:"updated_at"},it={class:"ml-4 flex btn01"},ut=["title"],dt=t("path",{fill:"currentColor",d:"M6 17.59L7.41 19L12 14.42L16.59 19L18 17.59l-6-6z"},null,-1),ct=t("path",{fill:"currentColor",d:"m6 11l1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},null,-1),mt=[dt,ct],ht=["title"],_t=t("path",{fill:"currentColor",d:"M18 6.41L16.59 5L12 9.58L7.41 5L6 6.41l6 6z"},null,-1),pt=t("path",{fill:"currentColor",d:"m18 13l-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},null,-1),ft=[_t,pt],gt={class:"ml-4"},yt=t("option",{value:"10"},"10",-1),bt=t("option",{value:"20"},"20",-1),kt=t("option",{value:"50"},"50",-1),xt=t("option",{value:"100"},"100",-1),wt=[yt,bt,kt,xt],vt={class:"grid tableBox grid-cols-7 border-b border-stroke dark:border-strokedark sm:grid-cols-7 databes_table"},Nt={class:"flex items-center gap-3 p-2.5 xl:p-5"},Mt={class:"font-medium hidden text-black dark:text-white sm:block"},Pt={class:"flex items-center justify-center p-2.5 xl:p-5"},Tt={class:"font-medium text-black dark:text-white"},Ct={class:"flex items-center justify-center p-2.5 xl:p-5"},St={class:"font-medium text-black dark:text-white"},It={class:"flex items-center justify-center p-2.5 xl:p-5"},Dt={class:"font-medium text-black dark:text-white"},Ut={class:"flex items-center justify-center p-2.5 xl:p-5"},Et={class:"flex items-center justify-center p-2.5 xl:p-5"},Lt={class:"hidden button-box0 items-center justify-center p-2.5 sm:flex xl:p-5"},Bt={class:"font-medium text-meta-5 btns"},jt=["onClick"],Ot=["onClick"],Vt=["onClick","title"],Ft=["onClick","title"],At=["onClick","title"],zt=["onClick"],Kt=["onClick"],qt=["href"],Rt={key:0,title:"Tolov cheki",class:"fa-regular fas fa-print setting-icon cursor-pointer"},Ht=["onClick"],Zt=["onClick"],Qt=["onClick"],Yt={key:0,class:"table01"},Gt={key:1,class:"table01"},Jt={key:2},Wt=t("br",null,null,-1),Xt={class:"flex"},$t=t("br",null,null,-1),es={key:3},ts={key:4},ss=t("br",null,null,-1),rs={key:0,class:"text-danger"},as=t("br",null,null,-1),ns={class:"flex"},os=t("br",null,null,-1),ls={key:5},is=t("option",{selected:""},"---",-1),us=["value"],ds={key:6},cs={class:"table01"};function ms(e,a,u,d,n,s){const p=_("TableHeader"),y=_("vue-awesome-paginate"),E=_("Pagination01"),L=_("Paginate"),w=_("Checkbox01"),v=_("Input"),P=_("Textarea"),B=_("DangerButton"),j=_("Select"),O=_("ShowForm");return l(),i("div",Ge,[t("div",Je,[t("h4",We,o(s.getName("Treatmetns")),1),t("div",Xe,[u.Header?(l(),i("div",$e,[t("div",null,[t("input",{type:"text",placeholder:"Search",onInput:a[0]||(a[0]=r=>s.clickSearch(r.target.value,n.order)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,32)]),t("div",null,[t("select",{placeholder:"Search",onInput:a[1]||(a[1]=r=>n.column=r.target.value),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},[t("option",et,o(s.getName("serial_number")),1),tt,t("option",st,o(s.getName("TreatmentStarted_at")),1),t("option",rt,o(s.getName("name")),1),t("option",at,o(s.getName("last_name")),1),t("option",nt,o(s.getName("New")),1),t("option",ot,o(s.getName("Created_at")),1),t("option",lt,o(s.getName("Updated_at")),1)],32)]),t("div",it,[(l(),i("svg",{onClick:a[2]||(a[2]=r=>s.clickSearch(n.search,"asc")),title:s.getName("growth"),class:g(n.order=="asc"?"active":""),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},mt,10,ut)),(l(),i("svg",{onClick:a[3]||(a[3]=r=>s.clickSearch(n.search,"desc")),class:g(n.order=="desc"?"active":""),title:s.getName("decrease"),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},ft,10,ht))]),t("div",gt,[t("select",{placeholder:"Search",onInput:a[4]||(a[4]=r=>s.onPaginate(r.target.value)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},wt,32)])])):m("",!0),c(p),(l(!0),i(N,null,M(u.Treatments.length>0?u.Treatments:n.items,(r,V)=>(l(),i("div",vt,[t("div",Nt,[t("p",Mt,o(V+1)+". "+o(r.patient.first_name),1)]),t("div",Pt,[t("p",Tt,o(r.patient.last_name),1)]),t("div",Ct,[t("p",St,o(r.doctor.name),1)]),t("div",It,[t("p",Dt,o(r.start),1)]),t("div",Ut,[t("p",{class:g(["font-medium text-black dark:text-white status-text",s.getClass(r.status)])},o(s.getStatus(r.status)),3)]),t("div",Et,[t("p",{class:g(["font-medium dark:text-white status-text",s.getClass(r.payment_status)])},o(s.getStatus(r.payment_status)),3)]),t("div",Lt,[t("p",Bt,[t("i",{onClick:f=>s.Show(r),class:"fa-solid setting-icon fa-eye"},null,8,jt),r.status==8&&r.payment_status!=12&&r.status!=17?(l(),i("i",{key:0,titile:"Tahrirlash",onClick:f=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:r.patient_id,treatment_id:r.id}}),class:"fa-solid setting-icon fa-pen-to-square"},null,8,Ot)):m("",!0),r.status==7&&r.status!=17?(l(),i("i",{key:1,onClick:f=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:r.patient_id,treatment_id:r.id}}),title:s.getName("Treatment"),class:"fa-regular setting-icon fa-calendar-plus cursor-pointer"},null,8,Vt)):m("",!0),r.payment_status!=12&&r.status!=7&&r.status!=17?(l(),i("i",{key:2,onClick:f=>(s.paymentModal(r),n.userPayments=r.user_payment),title:s.getName("Payments"),class:"fa-regular fas fa-donate setting-icon cursor-pointer"},null,8,Ft)):m("",!0),r.payment_status==11||r.payment_status==12&&r.status!=17?(l(),i("i",{key:3,title:"Tolov tarixi",onClick:f=>s.istoryPaymentModal(r),class:"fa-solid fa-clock-rotate-left setting-icon cursor-pointer"},null,8,At)):m("",!0),r.payment_status!=12&&r.status!=9&&r.status!=7&&r.status!=17?(l(),i("i",{key:4,title:"Chegirma berish",onClick:f=>s.discountModal(r),class:"fa-regular fas fa-percent setting-icon cursor-pointer"},null,8,zt)):m("",!0),r.payment_status!=12&&r.status!=9&&r.status!=7&&r.status!=17?(l(),i("i",{key:5,title:"Qarzga bajarish",onClick:f=>s.debtModal(r),class:"fa-regular fas fa-coins setting-icon cursor-pointer"},null,8,Kt)):m("",!0),t("a",{target:"_blank",href:s.onCheck(r.id)},[r.payment_status!=10&&r.status!=17?(l(),i("i",Rt)):m("",!0)],8,qt),r.status!=9&&r.status!=7&&r.status!=17?(l(),i("i",{key:6,title:"Tugatish",onClick:f=>s.treatementFinished(r.id),class:"fa-regular fas fa-square-check setting-icon cursor-pointer"},null,8,Ht)):m("",!0),r.status==7?(l(),i("i",{key:7,title:"Bekor qilish",onClick:f=>s.cancletedModal(r),class:"fa-solid fa-x setting-icon cursor-pointer text-danger"},null,8,Zt)):m("",!0),r.status==17?(l(),i("i",{key:8,title:"Bekor qilish tasnifi",onClick:f=>s.onInfoModal(r),class:"fa-solid fa-circle-info setting-icon cursor-pointer"},null,8,Qt)):m("",!0)])])]))),256)),c(L,null,{default:k(()=>[c(E,null,{default:k(()=>[c(y,{"total-items":n.last_page,"items-per-page":1,"max-pages-shown":1,modelValue:n.currentPage,"onUpdate:modelValue":a[5]||(a[5]=r=>n.currentPage=r),"on-click":s.onClickHandler},null,8,["total-items","modelValue","on-click"])]),_:1})]),_:1})]),c(O,{isButton:n.isPayment,onOnSubmit:a[17]||(a[17]=r=>n.Modal=="0"?n.isShowModal=!1:s.onPayment()),UpdateId:n.UpdateId,onCloseModal:a[18]||(a[18]=r=>(n.isShowModal=r,n.errorObj=[])),isShowModal:n.isShowModal},{default:k(()=>[n.Modal==0&&n.Model!=[]?(l(),i("table",Yt,[t("tr",null,[t("th",null,o(s.getName("name"))+":   ",1),t("td",null,o(n.Patient.last_name),1)]),t("tr",null,[t("th",null,o(s.getName("last_name"))+":   ",1),t("td",null,o(n.Patient.first_name),1)]),t("tr",null,[t("th",null,o(s.getName("Doctor"))+":   ",1),t("td",null,o(n.doctor.name),1)]),t("tr",null,[t("th",null,o(s.getName("TreatmentStarted_at"))+":   ",1),t("td",null,o(n.Model.start),1)]),t("tr",null,[t("th",null,o(s.getName("Finished_at"))+":   ",1),t("td",null,o(n.Model.end),1)]),t("tr",null,[t("th",null,o(s.getName("PatientEndPayment"))+":   ",1),t("td",null,o(n.Model.latest_payment!=null?n.Model.latest_payment.amount:"0 UZS"),1)]),t("tr",null,[t("th",null,o(s.getName("AmountOwedType"))+":   ",1),t("td",null,o(n.Model.latest_payment!=null?n.Model.latest_payment.payment_type:"---"),1)]),t("tr",null,[t("th",null,o(s.getName("TreatmentPrice"))+":   ",1),t("td",null,o(d.useConterStore().formatNumber(Number(n.Model.service_real_price)))+" uzs",1)]),t("tr",null,[t("th",null,o(s.getName("PaymentsUser"))+":   ",1),t("td",null,o(d.useConterStore().formatNumber(Number(n.Model.payment_amount)))+" uzs",1)]),t("tr",null,[t("th",null,o(s.getName("AmountOwed"))+":   ",1),t("td",null,o(d.useConterStore().formatNumber(Number(n.Model.user_payment)))+" uzs",1)]),t("tr",null,[t("th",null,o(s.getName("Discount"))+":   ",1),t("td",null,o(d.useConterStore().formatNumber(Number(n.Model.discount_sum)))+" uzs",1)]),t("tr",null,[t("th",null,o(s.getName("Payment_status"))+":   ",1),t("td",null,[t("p",{class:g(["font-medium dark:text-white status-text",s.getClass(n.Model.payment_status)])},o(s.getStatus(n.Model.payment_status)),3)])])])):m("",!0),n.Modal=="istory-payment"&&n.Model!=[]?(l(),i("table",Gt,[t("tr",null,[t("th",null,o(s.getName("Amount")),1),t("th",null,o(s.getName("Created_at")),1),t("th",null,o(s.getName("Type")),1)]),(l(!0),i(N,null,M(n.patientPayments,r=>(l(),i("tr",null,[t("td",null,o(r.amount),1),t("td",null,o(r.created_at),1),t("td",null,[t("p",{class:"font-medium dark:text-white status-text",style:W("background: "+r.color)},o(r.payment_type),5)])]))),256))])):n.Modal=="debt"?(l(),i("div",Jt,[t("h1",null,o(s.getName("DebitTitle")),1),Wt,t("div",Xt,[c(w,{onClick:a[6]||(a[6]=r=>n.debtUser="doctor"),onCheck:n.debtUser=="doctor",Title:s.getName("Doctor")},null,8,["onCheck","Title"]),S("         "),c(w,{onClick:a[7]||(a[7]=r=>n.debtUser="polyclinic"),onCheck:n.debtUser=="polyclinic",Title:s.getName("PolyClinic")},null,8,["onCheck","Title"])]),$t,c(v,{Label:s.getName("DebitData"),onOnInput:a[8]||(a[8]=r=>n.debtData=r),isError:s.hasKey("debt_data"),message:n.errorObj.debt_data,Type:"date",Value:"2024-03-01"},null,8,["Label","isError","message"]),c(P,{Label:s.getName("Description"),onOnInput:a[9]||(a[9]=r=>n.debtText=r),isError:s.hasKey("debt_text"),message:n.errorObj.debt_text,Value:n.debtText},null,8,["Label","isError","message","Value"])])):n.Modal=="cancleted"?(l(),i("div",es,[c(P,{Label:s.getName("CancletedText"),onOnInput:a[10]||(a[10]=r=>n.cancletedText=r),isError:s.hasKey("description"),message:n.errorObj.description,Value:n.cancletedText},null,8,["Label","isError","message","Value"])])):n.Modal=="discount"?(l(),i("div",ts,[t("h1",null,o(s.getName("Summa"))+": "+o(d.counterStore.formatNumber(n.RealPrice))+" uzs",1),t("h1",null,o(s.getName("PaymentSum"))+": "+o(d.counterStore.formatNumber(n.discount_total_sum))+" uzs",1),ss,c(v,{Label:s.getName("Discount")+" (%)",onOnInput:a[11]||(a[11]=r=>s.percentInput(r)),isError:s.hasKey("discount_percent"),message:n.errorObj.discount_percent,Value:n.discount_percent,Tyoe:"number"},null,8,["Label","isError","message","Value"]),c(v,{Label:s.getName("Discount")+" (sum)",onOnInput:a[12]||(a[12]=r=>s.sumInput(r)),isError:s.hasKey("discount_sum"),message:n.errorObj.discount_sum,Value:n.discount_sum,Tyoe:"number"},null,8,["Label","isError","message","Value"]),n.discountError?(l(),i("p",rs,o(s.getName("DiscountError")),1)):m("",!0),t("h1",null,o(s.getName("DebitTitle")),1),as,t("div",ns,[c(w,{onClick:a[13]||(a[13]=r=>n.debtUser="doctor"),onCheck:n.debtUser=="doctor",Title:s.getName("Doctor")},null,8,["onCheck","Title"]),S("         "),c(w,{onClick:a[14]||(a[14]=r=>n.debtUser="polyclinic"),onCheck:n.debtUser=="polyclinic",Title:s.getName("PolyClinic")},null,8,["onCheck","Title"])]),os])):n.Modal=="payment"?(l(),i("div",ls,[c(B,{style:{"font-size":"20px"},isActive:n.userPayments<=0,Title:d.useConterStore().formatNumber(Number(Math.abs(n.userPayments)))+" uzs"},null,8,["isActive","Title"]),c(v,{Pholder:"0",Class:"format_input",Label:s.getName("Amount"),onOnInput:a[15]||(a[15]=r=>s.paymentNumberFormat(r)),isError:s.hasKey("amount"),message:n.errorObj.amount,Value:d.counterStore.formatNumber(n.Amount)},null,8,["Label","isError","message","Value"]),c(j,{Label:s.getName("PaymentTypes"),isError:s.hasKey("payment_type_id"),message:n.errorObj.payment_type_id,onOnSelect:a[16]||(a[16]=r=>n.PaymentType=r)},{default:k(()=>[is,(l(!0),i(N,null,M(n.paymentTypes,r=>(l(),i("option",{value:r.id},o(r.name),9,us))),256))]),_:1},8,["Label","isError","message"])])):n.Modal=="info"?(l(),i("div",ds,[t("table",cs,[t("tr",null,[t("th",null,o(s.getName("Description"))+":",1),t("td",null,o(n.Item.cancleted_description),1)])])])):m("",!0)]),_:1},8,["isButton","UpdateId","isShowModal"])])])}const Ss=b(Ye,[["render",ms]]);export{Ss as T};

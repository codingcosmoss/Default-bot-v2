import{P as C}from"./Page-mAivDXea.js";import{_ as b,o as d,c as m,a as t,t as u,n as g,i as E,m as L,u as w,P as N,Q as O,R as I,A as y,r as f,b as c,w as _,F as h,v as x,d as V}from"./app-8i59_tig.js";import{P as S}from"./PrimaryButton-4iyouYaJ.js";import{P as j}from"./PrimaryButton2-zUn7s8oD.js";import{S as P}from"./Select-YcpyyNbB.js";import{D as F}from"./DinamicForm-NgR-Hp5U.js";import"./Input-AJAfOiLl.js";import"./Loader-gbTB4BrO.js";const B={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},T={class:"mb-2.5 block text-black dark:text-white"},K=["value","type"],D={key:0,class:"text-danger"};function A(n,e,a,l,r,s){return d(),m("div",{class:g(a.Couple?"mb-4.5":"w-full xl:w-1/2")},[t("label",T,u(a.Label),1),t("input",{value:a.Value,type:a.Type,min:"0",class:g([a.isError==!0?"isError":"","w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"...",onInput:e[0]||(e[0]=i=>this.$emit("onInput",i.target.value))},null,42,K),a.isError?(d(),m("p",D,u(a.message),1)):E("",!0)],2)}const k=b(B,[["render",A]]),R={components:{Input:k},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function z(n,e,a,l,r,s){return d(),m("li",null,[t("input",{type:"checkbox",onInput:e[0]||(e[0]=i=>this.$emit("onCheck",!0))},null,32),L(" Â  "+u(a.Title),1)])}const Q=b(R,[["render",z],["__scopeId","data-v-ed41d1c7"]]),q={data(){return{name:"",order:"",code:"",price:0,category:"",material_price:"",technic_price:"",status:1,isLoginError:!1,errorObj:{},personal_procent:!1,categories:[],personalProcents:[],FormErrors:[],summError:!1,Collections:[],CollectionId:0}},components:{Select:P,PrimaryButton2:j,PrimaryButton:S,Checkbox:Q,Input:k,DinamicForm:F},methods:{getName(n){return w().getName(n)},async getCollections(){const n=await N(1,1e3);this.Collections=n.data.items},async getCategories(){const n=await O(null,1e3);this.categories=n.data.items},async create(){if(this.validate(this.personalProcents)){let e=[];this.personalProcents.forEach((l,r)=>{let s=0;l.type=="%"?s+=this.price*Number(l.procent)/100:s+=Number(l.procent),e.push({employee_id:l.employee,amount:l.procent,result_price:s,type:l.type})});var n={name:this.name,order:this.order,code:this.code,price:this.price,category_id:this.category,material_price:this.material_price,technic_price:this.technic_price,status:this.status,collection_id:this.CollectionId,personal_procents:e};const a=await I(n);console.log("Response:",a),a.status?(y("success","Created successfully !"),this.$router.push("/services")):this.errorObj=a.data}else y("error","There is an error in the form")},validate(n){if(n.length==0)return!0;let e=[],a=0;return n.forEach((l,r)=>{(l.employee==""||l.procent<0||l.procent==""||l.type=="%"&&l.procent>100||l.procent.length>1&&l.procent.split("")[0]==0)&&e.push(r),l.type=="%"?a+=this.price*Number(l.procent)/100:a+=Number(l.procent),n.forEach((s,i)=>{i!=r&&s.employee==l.employee&&(e.push(r),e.push(i))})}),this.price<a||this.price<=0?(this.summError=!0,!1):(this.summError=!1,this.FormErrors=e,e.length==0)},hasKey(n){return n in this.errorObj}},mounted(){this.getCategories(),this.getCollections()}},G={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",style:{"justify-content":"flex-end"}},H={class:"flex items-center gap-2"},J={class:"font-medium text-primary"},M={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},U={class:"flex flex-col gap-9"},W={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},X={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},Y={class:"font-semibold text-black dark:text-white"},Z={action:"#"},$={class:"p-6.5"},ee={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},re={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},se=t("option",null,"---",-1),te=["value","selected"],oe={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},le={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},ae=t("option",{value:null},"---",-1),ne=["value","selected"],ie={class:"flex flex-col gap-9"},ce={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},ue=t("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[t("h3",{class:"font-semibold text-black dark:text-white"})],-1),de={class:"mb-4.5 flex flex-col gap-6 xl:flex-row p-6.5"},me=t("option",{value:1},"Active",-1),pe=t("option",{value:0},"Inactive",-1),fe={class:"check02"},_e={class:"block text-black dark:text-white"},be={class:"pl-7 p-6.5"};function he(n,e,a,l,r,s){const i=f("Input"),p=f("Select"),v=f("DinamicForm");return d(),m(h,null,[t("div",G,[t("nav",null,[t("ol",H,[t("li",null,[t("a",{class:"font-medium cursor-pointer",onClick:e[0]||(e[0]=o=>this.$router.push("/services"))},u(s.getName("services"))+" /",1)]),t("li",J,u(s.getName("create")),1)])])]),t("div",M,[t("div",U,[t("div",W,[t("div",X,[t("h3",Y,u(s.getName("services")),1)]),t("form",Z,[t("div",$,[t("div",ee,[c(i,{Couple:!1,Label:s.getName("name_content"),onOnInput:e[1]||(e[1]=o=>r.name=o),isError:s.hasKey("name"),message:r.errorObj.name,Value:r.name},null,8,["Label","isError","message","Value"]),c(i,{Couple:!1,Label:s.getName("code"),onOnInput:e[2]||(e[2]=o=>r.code=o),isError:s.hasKey("code"),message:r.errorObj.code,Value:r.code},null,8,["Label","isError","message","Value"])]),t("div",re,[c(i,{Couple:!1,Label:s.getName("price"),onOnInput:e[3]||(e[3]=o=>r.price=o),isError:s.hasKey("price"),message:r.errorObj.price,Value:r.price,Type:"number"},null,8,["Label","isError","message","Value"]),c(p,{Couple:!1,Label:s.getName("category"),onOnSelect:e[4]||(e[4]=o=>this.category=o),isError:s.hasKey("category_id"),message:r.errorObj.category_id},{default:_(()=>[se,(d(!0),m(h,null,x(r.categories,o=>(d(),m("option",{value:o.id,selected:o.id==this.category},u(o.name),9,te))),256))]),_:1},8,["Label","isError","message"])]),t("div",oe,[c(i,{Couple:!1,Label:s.getName("material_price"),onOnInput:e[5]||(e[5]=o=>r.material_price=o),isError:s.hasKey("material_price"),message:r.errorObj.material_price,Type:"number"},null,8,["Label","isError","message"]),c(i,{Couple:!1,Label:s.getName("technic_price"),onOnInput:e[6]||(e[6]=o=>r.technic_price=o),isError:s.hasKey("technic_price"),message:r.errorObj.technic_price,Type:"number",Value:r.technic_price},null,8,["Label","isError","message","Value"])]),t("div",le,[c(p,{Couple:!1,Label:s.getName("Collection"),onOnSelect:e[7]||(e[7]=o=>this.CollectionId=o),isError:s.hasKey("collection_id"),message:r.errorObj.collection_id},{default:_(()=>[ae,(d(!0),m(h,null,x(r.Collections,o=>(d(),m("option",{value:o.id,selected:o.id==this.CollectionId},u(o.name),9,ne))),256))]),_:1},8,["Label","isError","message"])])])])])]),t("div",ie,[t("div",ce,[ue,t("div",de,[c(i,{Couple:!1,Type:"number",Label:s.getName("Serial_number"),onOnInput:e[8]||(e[8]=o=>r.order=o),isError:s.hasKey("order"),message:r.errorObj.order,Value:r.order},null,8,["Label","isError","message","Value"]),c(p,{Couple:!1,Label:s.getName("status"),onOnSelect:e[9]||(e[9]=o=>this.status=o)},{default:_(()=>[me,pe]),_:1},8,["Label"])]),t("div",fe,[t("p",_e,u(s.getName("personal_procent")),1)]),c(v,{isLoader:!1,summError:r.summError,errors:r.FormErrors,onData:e[10]||(e[10]=o=>(r.personalProcents=o,s.validate(r.personalProcents)))},null,8,["summError","errors"]),t("div",be,[t("button",{onClick:e[11]||(e[11]=(...o)=>s.create&&s.create(...o)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},u(s.getName("create")),1)])])])])],64)}const ge=b(q,[["render",he]]),ye={components:{FormLayouts:ge,Page:C}};function xe(n,e,a,l,r,s){const i=f("FormLayouts"),p=f("Page");return d(),V(p,{Classes:!1,Animation:!1},{default:_(()=>[c(i)]),_:1})}const Ie=b(ye,[["render",xe]]);export{Ie as default};

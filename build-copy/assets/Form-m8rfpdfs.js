import{P as w}from"./Page-mAivDXea.js";import{_ as g,o as n,c as d,a as o,m as h,t as c,p as I,u as L,x as E,A as v,y as P,s as N,r as p,b as a,F as _,v as y,d as O,w as V}from"./app-8i59_tig.js";import{I as k}from"./Input-fJbOcXUa.js";import{I as F}from"./InputColor-s0cIO5la.js";import{I as R}from"./ImageInput-kHPAZAJB.js";import{C as j}from"./Checkbox01-rD0XVLDM.js";const T={components:{Input:k},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function B(s,e,u,f,r,t){return n(),d("li",null,[o("input",{type:"checkbox",onInput:e[0]||(e[0]=m=>this.$emit("onCheck",!0))},null,32),h("   "+c(u.Title),1)])}const K=g(T,[["render",B],["__scopeId","data-v-96264efe"]]),S={data(){return{name:"",position:"",login:"",profil_photo_path:"",percent_salary:"",salary_static:"",sort_order:"",isPasswordError:!1,reset_password:"",isLoginError:!1,color:"#FFFFFF",errorObj:{},image:"",photo:"",Roles:[],Permissions:[]}},components:{Checkbox01:j,ImageInput:R,InputColor:F,Checkbox:K,Input:k},methods:{addRoles(s){this.Roles.includes(s)?this.Roles=this.Roles.filter(e=>e!=s):this.Roles.push(s)},async getPermissions(){const s=await I();this.Permissions=s.data},getName(s){return L().getName(s)},testPassword(s){return this.password!=s?this.isPasswordError=!0:this.isPasswordError=!1,this.reset_password=s,this.isPasswordError},async update(){var s={name:this.name,position:this.position,login:this.login,profil_photo_path:this.profil_photo_path,percent_salary:this.percent_salary,salary_static:this.salary_static,sort_order:this.sort_order,color:this.color,image:this.image,roles:this.Roles};console.log(s);const e=await E(this.$route.query.id,s);e.status?(v("success","Updated successfully !"),this.$router.push("/employees")):(console.log("data",e.data),this.errorObj=e.data)},async get(){const s=await P(this.$route.query.id),e=s.data;console.log(e),s.status?(this.name=e.name,this.position=e.position,this.login=e.login,this.password=e.password,this.profil_photo_path=e.profil_photo_path,this.percent_salary=e.percent_salary,this.salary_static=e.salary_static,this.sort_order=e.sort_order,this.photo=e.image[0].url,e.permissions.forEach(u=>{this.Roles.push(u.id)}),this.color=e.color==null?"#ffffff":e.color):(console.log("data:",s.data),this.errorObj=s.data)},async testLogin(s){(await N({login:s})).status?this.isLoginError=!0:this.isLoginError=!1,this.login=s},hasKey(s){return s in this.errorObj}},mounted(){this.get(),this.getPermissions()}},A={class:"breadcrumb-nav mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},q={class:"flex items-center gap-2"},D={class:"font-medium text-primary"},U={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},z={class:"flex flex-col gap-9"},G={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},H={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},J={class:"font-semibold text-black dark:text-white"},M={action:"#"},Q={class:"p-6.5"},W={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},X={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},Y={class:"flex flex-col gap-9"},Z={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},$=o("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[o("h3",{class:"font-semibold text-black dark:text-white"})],-1),ee={class:"pt-0 p-6.5"},se={style:{display:"flex",padding:"5px 27px"}},oe={class:"pl-7 p-6.5"};function re(s,e,u,f,r,t){const m=p("ImageInput"),i=p("Input"),x=p("InputColor"),b=p("Checkbox01");return n(),d(_,null,[o("div",A,[o("nav",null,[o("ol",q,[o("li",null,[o("a",{class:"font-medium cursor-pointer",onClick:e[0]||(e[0]=l=>this.$router.push("/employees"))},c(t.getName("employees"))+" /",1)]),o("li",D,c(t.getName("create")),1)])])]),o("div",U,[o("div",z,[o("div",G,[o("div",H,[o("h3",J,c(t.getName("add_employee")),1)]),o("form",M,[o("div",Q,[a(m,{onImage:e[1]||(e[1]=l=>r.image=l),Photo:r.photo,Label:"Photo"},null,8,["Photo"]),o("div",W,[a(i,{Couple:!1,Label:t.getName("employee_name"),onOnInput:e[2]||(e[2]=l=>r.name=l),isError:t.hasKey("name"),message:r.errorObj.name,Value:r.name},null,8,["Label","isError","message","Value"]),a(i,{Couple:!1,Label:t.getName("Position_employee"),onOnInput:e[3]||(e[3]=l=>r.position=l),isError:t.hasKey("position"),message:r.errorObj.position,Value:r.position},null,8,["Label","isError","message","Value"])]),a(i,{Label:t.getName("login"),onOnInput:e[4]||(e[4]=l=>t.testLogin(l)),Value:r.login,isError:r.isLoginError,message:"Login is available !"},null,8,["Label","Value","isError"]),o("div",X,[a(x,{Type:"color",Couple:!1,Label:t.getName("color"),onOnInput:e[5]||(e[5]=l=>r.color=l),isError:t.hasKey("color"),message:r.errorObj.color,Value:r.color},null,8,["Label","isError","message","Value"]),a(i,{Type:"number",Couple:!1,Label:t.getName("Serial_number"),onOnInput:e[6]||(e[6]=l=>r.sort_order=l),isError:t.hasKey("sort_order"),message:r.errorObj.sort_order,Value:r.sort_order},null,8,["Label","isError","message","Value"])])])])])]),o("div",Y,[o("div",Z,[$,o("p",ee,c(t.getName("employee_roles"))+":",1),o("ul",se,[o("li",null,[(n(!0),d(_,null,y(r.Permissions.slice(0,10),l=>(n(),d("span",null,[a(b,{onClick:C=>t.addRoles(l.id),onCheck:r.Roles.includes(l.id),Title:t.getName(l.lang_name),Class:"genderCheckbox"},null,8,["onClick","onCheck","Title"]),h("   ")]))),256))]),h("                "),o("li",null,[(n(!0),d(_,null,y(r.Permissions.slice(10,r.Permissions.length),l=>(n(),d("span",null,[a(b,{onClick:C=>t.addRoles(l.id),onCheck:r.Roles.includes(l.id),Title:t.getName(l.lang_name),Class:"genderCheckbox"},null,8,["onClick","onCheck","Title"]),h("   ")]))),256))])]),o("div",oe,[o("button",{onClick:e[7]||(e[7]=(...l)=>t.update&&t.update(...l)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},c(t.getName("create")),1)])])])])],64)}const te=g(S,[["render",re]]),le={components:{FormLayouts:te,Page:w}};function ae(s,e,u,f,r,t){const m=p("FormLayouts"),i=p("Page");return n(),O(i,{Classes:!1,Animation:!1},{default:V(()=>[a(m)]),_:1})}const me=g(le,[["render",ae]]);export{me as default};

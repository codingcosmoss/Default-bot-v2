import{a as S,P as v}from"./Page-6po4WWvc.js";import{_ as D,u as I,D as T,l as s,J as A,K as N,M as E,A as o,N as L,O as G,P as O,d as m,w as l,r as i,o as a,a as n,e as h,b as V,t as c,c as u,f as _,F as b,g as p}from"./app-qjkFfopU.js";import{B as q}from"./BasicTable-DVjjvWl8.js";import{G as z,P as F}from"./GrowingLoader-C9t3ZqrR.js";import{D as M}from"./DefaultInput-qAxpax30.js";const R={components:{DefaultInput:M,PrimaryBtn:S,GrowingLoader:z,PrimaryIconBtn:F,BasicTable:q,Page:v},setup(){return{counterStore:I()}},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],loader:!1}},methods:{async index(){try{this.loader=!0;const e=await T();this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async indexActives(){try{this.loader=!0;const e=await roleActives(this.paginateCount);this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async indexPaginates(){try{this.loader=!0;const e=await A(1e3);this.items=e.data.items,this.loader=!1}catch(e){s(this,e)}},async orderBys(){try{this.loader=!0;const e=await roleOrderBys(this.column,this.type);this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async show(e){try{const t=await N(e);this.item=t.data}catch(t){s(this,t)}},async create(){try{const t=await E({});return t.status?(o("success",this.$t("create")),!0):(this.errors=t.errors,o("error",this.$t("formError")),!1)}catch(e){return s(this,e),!1}},async update(){try{const t=await L({});return t.status?(o("success",this.$t("update")),!0):(this.errors=t.errors,o("error",this.$t("formError")),!1)}catch(e){return s(this,e),!1}},async search(e=""){try{if(this.loader=!0,e=="")return this.indexPaginates(),!0;const t=await G(e);return this.items=t.data,this.loader=!1,t.status?(this.loader=!1,!0):(o("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return s(this,t),this.loader=!1,!1}},async delete(e){try{if(!confirm(this.$t("DeleteAlert")))return!1;const t=await O(e);return this.items=t.data,t.status&&(o("success",this.$t("delete")),this.indexPaginates()),o("error",this.$t("formError")),!1}catch(t){return s(this,t),!1}}},mounted(){this.indexPaginates()}},J={class:"row"},K={class:"role_user_block"},U={key:0,class:"badge badge-pill badge-soft-success font-size-12",style:{"margin-right":"4px"}},j=["onClick"];function H(e,t,Q,C,f,y){const $=i("DefaultInput"),w=i("PrimaryBtn"),g=i("PrimaryIconBtn"),P=i("GrowingLoader"),B=i("BasicTable"),k=i("Page");return a(),m(k,{Title:""},{default:l(()=>[n("div",J,[h(B,{Modal:"userCreate",Th:[e.$t("No"),e.$t("RoleName"),e.$t("Employees"),e.$t("CreatedAt"),e.$t("Settings")],Title:"All Roles",Col:"col-lg-12",onOnSearch:t[2]||(t[2]=r=>y.search(r))},{inputs:l(()=>[h($,{Class:"col-lg-3 col-sm-2",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:t[0]||(t[0]=r=>y.search(r))})]),buttons:l(()=>[h(w,{onClick:t[1]||(t[1]=r=>this.$router.push("/admin/roles/create")),role:"button"},{default:l(()=>[V(c(e.$t("Create")),1)]),_:1})]),default:l(()=>[(a(!0),u(b,null,_(f.items,(r,x)=>(a(),u("tr",null,[n("td",null,c(x+1),1),n("td",null,c(r.name),1),n("td",null,[n("div",K,[r.users.length==0?(a(),u("span",U,"---")):p("",!0),r.users.length>0?(a(!0),u(b,{key:1},_(r.users,d=>(a(),u("span",{onClick:W=>this.$router.push({path:"/admin/users/show",query:{id:d.id}}),class:"badge badge-pill cursor-pointer badge-soft-success font-size-12",style:{margin:"4px"}},c(d.name),9,j))),256)):p("",!0)])]),n("td",null,c(C.counterStore.formatDate(r.created_at)),1),n("td",null,[h(g,{onClick:d=>this.$router.push({path:"/admin/roles/update",query:{id:r.id}}),Icon:"bx bx-edit-alt"},null,8,["onClick"]),r.users.length==0?(a(),m(g,{key:0,onClick:d=>this.delete(r.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):p("",!0)])]))),256)),f.loader?(a(),m(P,{key:0,Cols:"5"})):p("",!0)]),_:1},8,["Th"])])]),_:1})}const re=D(R,[["render",H]]);export{re as default};

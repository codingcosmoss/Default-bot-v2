import{P as w}from"./Page--X10l4un.js";import{_ as b,o as u,c as m,a as t,t as d,n as y,h as g,s as N,u as O,Q as I,R as S,S as V,A as x,r as p,b as c,w as _,F as h,D as k,f as v}from"./app-0LpGGDjw.js";import{P as j}from"./PrimaryButton-1I3sGlmq.js";import{P}from"./PrimaryButton2-iNe1uhPp.js";import{S as F}from"./Select-vvngwYib.js";import{D as B}from"./DinamicForm-wHVhUPfR.js";import"./Input-31EGHoE1.js";import"./Loader-iMOtN3gY.js";const T={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},K={class:"mb-2.5 block text-black dark:text-white"},D=["value","type"],A={key:0,class:"text-danger"};function R(n,e,a,l,r,s){return u(),m("div",{class:y(a.Couple?"mb-4.5":"w-full xl:w-1/2")},[t("label",K,d(a.Label),1),t("input",{value:a.Value,type:a.Type,min:"0",class:y([a.isError==!0?"isError":"","w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"...",onInput:e[0]||(e[0]=i=>this.$emit("onInput",i.target.value))},null,42,D),a.isError?(u(),m("p",A,d(a.message),1)):g("",!0)],2)}const C=b(T,[["render",R]]),z={components:{Input:C},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function Q(n,e,a,l,r,s){return u(),m("li",null,[t("input",{type:"checkbox",onInput:e[0]||(e[0]=i=>this.$emit("onCheck",!0))},null,32),N(" Â  "+d(a.Title),1)])}const q=b(z,[["render",Q],["__scopeId","data-v-ed41d1c7"]]),G={data(){return{name:"",order:"",code:"",price:0,category:"",material_price:"",technic_price:"",status:1,isLoginError:!1,errorObj:{},personal_procent:!1,categories:[],personalProcents:[],FormErrors:[],summError:!1,Collections:[],CollectionId:0,Loader:!1}},components:{Select:F,PrimaryButton2:P,PrimaryButton:j,Checkbox:q,Input:C,DinamicForm:B},methods:{getName(n){return O().getName(n)},async getCollections(){const n=await I(1,1e3);this.Collections=n.data.items},async getCategories(){const n=await S(null,1e3);this.categories=n.data.items},async create(){if(this.Loader=!0,this.validate(this.personalProcents)){let e=[];this.personalProcents.forEach((l,r)=>{let s=0;l.type=="%"?s+=this.price*Number(l.procent)/100:s+=Number(l.procent),e.push({employee_id:l.employee,amount:l.procent,result_price:s,type:l.type})});var n={name:this.name,order:this.order,code:this.code,price:this.price,category_id:this.category,material_price:this.material_price,technic_price:this.technic_price,status:this.status,collection_id:this.CollectionId,personal_procents:e};const a=await V(n);console.log("Response:",a),a.status?(x("success","Created successfully !"),this.$router.push("/services")):(this.errorObj=a.data,this.Loader=!1)}else x("error","There is an error in the form"),this.Loader=!1},validate(n){if(n.length==0)return!0;let e=[],a=0;return n.forEach((l,r)=>{if((l.employee==""||l.procent<0||l.procent==""||l.type=="%"&&l.procent>100||l.procent.length>1&&l.procent.split("")[0]==0)&&e.push(r),l.type=="%"?a=this.price*Number(l.procent)/100:a=Number(l.procent),n.forEach((s,i)=>{i!=r&&s.employee==l.employee&&(e.push(r),e.push(i))}),this.price<a)return this.summError=!0,!1;this.summError=!1}),this.FormErrors=e,e.length==0},hasKey(n){return n in this.errorObj}},mounted(){this.getCategories(),this.getCollections()}},H={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",style:{"justify-content":"flex-end"}},J={class:"flex items-center gap-2"},M={class:"font-medium text-primary"},U={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},W={class:"flex flex-col gap-9"},X={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Y={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},Z={class:"font-semibold text-black dark:text-white"},$={action:"#"},ee={class:"p-6.5"},re={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},se={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},te=t("option",null,"---",-1),oe=["value","selected"],le={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},ae={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},ne=t("option",{value:null},"---",-1),ie=["value","selected"],ce={class:"flex flex-col gap-9"},ue={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},de=t("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[t("h3",{class:"font-semibold text-black dark:text-white"})],-1),me={class:"mb-4.5 flex flex-col gap-6 xl:flex-row p-6.5"},pe=t("option",{value:1},"Active",-1),fe=t("option",{value:0},"Inactive",-1),_e={class:"check02"},be={class:"block text-black dark:text-white"},he={class:"pl-7 p-6.5",style:{display:"flex","justify-content":"center"}};function ge(n,e,a,l,r,s){const i=p("Input"),f=p("Select"),E=p("DinamicForm"),L=p("loader-spinning");return u(),m(h,null,[t("div",H,[t("nav",null,[t("ol",J,[t("li",null,[t("a",{class:"font-medium cursor-pointer",onClick:e[0]||(e[0]=o=>this.$router.push("/services"))},d(s.getName("services"))+" /",1)]),t("li",M,d(s.getName("create")),1)])])]),t("div",U,[t("div",W,[t("div",X,[t("div",Y,[t("h3",Z,d(s.getName("services")),1)]),t("form",$,[t("div",ee,[t("div",re,[c(i,{Couple:!1,Label:s.getName("name_content"),onOnInput:e[1]||(e[1]=o=>r.name=o),isError:s.hasKey("name"),message:r.errorObj.name,Value:r.name},null,8,["Label","isError","message","Value"]),c(i,{Couple:!1,Label:s.getName("code"),onOnInput:e[2]||(e[2]=o=>r.code=o),isError:s.hasKey("code"),message:r.errorObj.code,Value:r.code},null,8,["Label","isError","message","Value"])]),t("div",se,[c(i,{Couple:!1,Label:s.getName("price"),onOnInput:e[3]||(e[3]=o=>r.price=o),isError:s.hasKey("price"),message:r.errorObj.price,Value:r.price,Type:"number"},null,8,["Label","isError","message","Value"]),c(f,{Couple:!1,Label:s.getName("category"),onOnSelect:e[4]||(e[4]=o=>this.category=o),isError:s.hasKey("category_id"),message:r.errorObj.category_id},{default:_(()=>[te,(u(!0),m(h,null,k(r.categories,o=>(u(),m("option",{value:o.id,selected:o.id==this.category},d(o.name),9,oe))),256))]),_:1},8,["Label","isError","message"])]),t("div",le,[c(i,{Couple:!1,Label:s.getName("material_price"),onOnInput:e[5]||(e[5]=o=>r.material_price=o),isError:s.hasKey("material_price"),message:r.errorObj.material_price,Type:"number",Value:0},null,8,["Label","isError","message"]),c(i,{Couple:!1,Label:s.getName("technic_price"),onOnInput:e[6]||(e[6]=o=>r.technic_price=o),isError:s.hasKey("technic_price"),message:r.errorObj.technic_price,Type:"number",Value:0},null,8,["Label","isError","message"])]),t("div",ae,[c(f,{Couple:!1,Label:s.getName("Collection"),onOnSelect:e[7]||(e[7]=o=>this.CollectionId=o),isError:s.hasKey("collection_id"),message:r.errorObj.collection_id},{default:_(()=>[ne,(u(!0),m(h,null,k(r.Collections,o=>(u(),m("option",{value:o.id,selected:o.id==this.CollectionId},d(o.name),9,ie))),256))]),_:1},8,["Label","isError","message"])])])])])]),t("div",ce,[t("div",ue,[de,t("div",me,[c(i,{Couple:!1,Type:"number",Label:s.getName("Serial_number"),onOnInput:e[8]||(e[8]=o=>r.order=o),isError:s.hasKey("order"),message:r.errorObj.order,Value:r.order},null,8,["Label","isError","message","Value"]),c(f,{Couple:!1,Label:s.getName("status"),onOnSelect:e[9]||(e[9]=o=>this.status=o)},{default:_(()=>[pe,fe]),_:1},8,["Label"])]),t("div",_e,[t("p",be,d(s.getName("personal_procent")),1)]),c(E,{isLoader:!1,summError:r.summError,errors:r.FormErrors,onData:e[10]||(e[10]=o=>(r.personalProcents=o,s.validate(r.personalProcents)))},null,8,["summError","errors"]),t("div",he,[r.Loader?(u(),v(L,{key:0,style:{margin:"0 auto"}})):g("",!0),r.Loader?g("",!0):(u(),m("button",{key:1,onClick:e[11]||(e[11]=(...o)=>s.create&&s.create(...o)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},d(s.getName("create")),1))])])])])],64)}const ye=b(G,[["render",ge]]),xe={components:{FormLayouts:ye,Page:w}};function ke(n,e,a,l,r,s){const i=p("FormLayouts"),f=p("Page");return u(),v(f,{Classes:!1,Animation:!1},{default:_(()=>[c(i)]),_:1})}const Se=b(xe,[["render",ke]]);export{Se as default};

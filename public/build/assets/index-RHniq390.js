import{a as T,M as V,b as k,P as N}from"./Page-6po4WWvc.js";import{_ as O,u as M,bi as W,A as y,l as w,o as l,d as h,w as d,a as r,c,e as u,g as _,f as D,F as x,t as i,b as I,r as a,bj as q,bk as z,bl as H,bm as J,ax as K,bn as Q,n as X}from"./app-qjkFfopU.js";import{a as E,B as Y}from"./BasicTable-DVjjvWl8.js";import{G as j,P as Z}from"./GrowingLoader-C9t3ZqrR.js";import{D as U}from"./DefaultInput-qAxpax30.js";import{D as F}from"./DefaultSelect-QS9w35hK.js";import{I as G}from"./ImageInput-rzGOIOcx.js";import{P as ee}from"./Paginate-pkoQmS0i.js";const te={components:{GrowingLoader:j,ImageInput:G,DefaultSelect:F,PrimaryBtn:T,BtnBox:E,ModalCentered:V,PrimaryButton:k,DefaultInput:U,Page:N},setup(){return{counterStore:M()}},props:{Item:{type:Object,default:[]},warehouses:Object,suppliers:Object,mloader:Boolean},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,status:1,warehouse_id:null,supplier_id:null,date:"",file:""}},methods:{async show(e){},async save(){this.item="",this.warehouse_id=null,this.supplier_id=null,this.file=null,this.date=this.counterStore.currentDate()},async save2(){this.item=this.Item,this.warehouse_id=this.Item.warehouse_id,this.supplier_id=this.Item.supplier_id,this.date=this.Item.date},async update(){try{this.loader=!0;let e={warehouse_id:this.warehouse_id,supplier_id:this.supplier_id,date:this.date,image:this.file};console.log(e);const t=await W(this.Item.id,e);return t.status?(y("success",this.$t("update")),this.save(),this.loader=!1,this.errors=[],this.counterStore.hiddenModal("documentUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=t.errors,this.errors.image&&(this.file=null),y("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return w(this,e),this.loader=!1,!1}}},mounted(){this.save()},watch:{Item:function(e,t){this.save2()}}},se={class:"row"},oe={key:0,class:"modal_loader"},re={class:"row"},ae=r("option",null,"---",-1),ne=["value","selected"],le=r("option",null,"---",-1),ie=["value","selected"];function ue(e,t,p,m,s,f){const C=a("GrowingLoader"),v=a("ImageInput"),b=a("DefaultSelect"),g=a("DefaultInput"),S=a("BaseBox"),B=a("PrimaryBtn"),P=a("BtnBox"),L=a("ModalCentered");return l(),h(L,{Title:e.$t("NewImportMedicines"),ModalName:"documentUpdate",isModalFooter:!1},{default:d(()=>[r("div",se,[p.mloader?(l(),c("div",oe,[u(C)])):_("",!0),u(S,{Col:"col-xl-12",Title:""},{default:d(()=>[r("div",re,[u(v,{Title:e.$t("SketchFile")+" (jpeg, png, jpg, svg, doc, docx, xls)",Name:"documentUpdateFile",onDocumentUpdateFile:t[0]||(t[0]=o=>(s.file=o,delete this.errors.image)),Validated:s.errors,Accept:"*"},null,8,["Title","Validated"]),u(b,{Label:e.$t("Warehouse"),Name:"warehouse_id",Type:"text",Validated:s.errors,onOnInput:t[1]||(t[1]=o=>(s.warehouse_id=o,delete this.errors.warehouse_id))},{default:d(()=>[ae,(l(!0),c(x,null,D(p.warehouses,o=>(l(),c("option",{value:o.id,selected:s.warehouse_id==o.id},i(o.name),9,ne))),256))]),_:1},8,["Label","Validated"]),u(b,{Label:e.$t("Supplier"),Name:"supplier_id",Type:"text",Validated:s.errors,onOnInput:t[2]||(t[2]=o=>(s.supplier_id=o,delete this.errors.supplier_id))},{default:d(()=>[le,(l(!0),c(x,null,D(p.suppliers,o=>(l(),c("option",{value:o.id,selected:s.supplier_id==o.id},i(o.name),9,ie))),256))]),_:1},8,["Label","Validated"]),u(g,{Label:e.$t("ImportedDate"),Name:"date",Type:"date",Validated:s.errors,Value:s.date,onOnInput:t[3]||(t[3]=o=>(s.date=o,delete this.errors.date))},null,8,["Label","Validated","Value"])])]),_:1}),u(P,null,{default:d(()=>[r("button",{onClick:t[4]||(t[4]=o=>this.$emit("onClose")),type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},i(e.$t("Close")),1),I("   "),u(B,{Loader:s.loader,onOnButton:t[5]||(t[5]=o=>f.update())},{default:d(()=>[I(i(e.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const de=O(te,[["render",ue]]),pe={components:{GrowingLoader:j,ImageInput:G,DefaultSelect:F,PrimaryBtn:T,BtnBox:E,ModalCentered:V,PrimaryButton:k,DefaultInput:U,Page:N},setup(){return{counterStore:M()}},props:{Item:{type:Object,default:[]},warehouses:Object,suppliers:Object,mloader:Boolean},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,status:1,warehouse_id:null,supplier_id:null,date:"",file:""}},methods:{async show(e){},async save(){this.item="",this.warehouse_id=null,this.supplier_id=null,this.file=null,this.date=this.counterStore.currentDate()},async create(){try{this.loader=!0;let e={warehouse_id:this.warehouse_id,supplier_id:this.supplier_id,date:this.date,image:this.file};const t=await q(e);return t.status?(y("success",this.$t("create")),this.save(),this.loader=!1,this.errors=[],this.counterStore.hiddenModal("documentCreate"),this.$router.push({path:"/admin/import",query:{id:t.data.id}}),this.$emit("onCreate",!0),!0):(this.errors=t.errors,this.errors.image&&(this.file=null),y("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return w(this,e),this.loader=!1,!1}}},mounted(){this.save()},watch:{}},ce={class:"row"},me={key:0,class:"modal_loader"},he={class:"row"},_e=r("option",null,"---",-1),fe=["value","selected"],ge=r("option",null,"---",-1),be=["value","selected"];function we(e,t,p,m,s,f){const C=a("GrowingLoader"),v=a("ImageInput"),b=a("DefaultSelect"),g=a("DefaultInput"),S=a("BaseBox"),B=a("PrimaryBtn"),P=a("BtnBox"),L=a("ModalCentered");return l(),h(L,{Title:e.$t("NewImportMedicines"),ModalName:"documentCreate",isModalFooter:!1},{default:d(()=>[r("div",ce,[p.mloader?(l(),c("div",me,[u(C)])):_("",!0),u(S,{Col:"col-xl-12",Title:""},{default:d(()=>[r("div",he,[u(v,{Title:e.$t("SketchFile")+" (jpeg, png, jpg, svg, doc, docx, xls)",Name:"documentCreateFile",onDocumentCreateFile:t[0]||(t[0]=o=>(s.file=o,delete this.errors.image)),Validated:s.errors,Accept:"*"},null,8,["Title","Validated"]),u(b,{Label:e.$t("Warehouse"),Name:"warehouse_id",Type:"text",Validated:s.errors,onOnInput:t[1]||(t[1]=o=>(s.warehouse_id=o,delete this.errors.warehouse_id))},{default:d(()=>[_e,(l(!0),c(x,null,D(p.warehouses,o=>(l(),c("option",{value:o.id,selected:s.warehouse_id==o.id},i(o.name),9,fe))),256))]),_:1},8,["Label","Validated"]),u(b,{Label:e.$t("Supplier"),Name:"supplier_id",Type:"text",Validated:s.errors,onOnInput:t[2]||(t[2]=o=>(s.supplier_id=o,delete this.errors.supplier_id))},{default:d(()=>[ge,(l(!0),c(x,null,D(p.suppliers,o=>(l(),c("option",{value:o.id,selected:s.supplier_id==o.id},i(o.name),9,be))),256))]),_:1},8,["Label","Validated"]),u(g,{Label:e.$t("ImportedDate"),Name:"date",Type:"date",Validated:s.errors,Value:s.date,onOnInput:t[3]||(t[3]=o=>(s.date=o,delete this.errors.date))},null,8,["Label","Validated","Value"])])]),_:1}),u(P,null,{default:d(()=>[r("button",{onClick:t[4]||(t[4]=o=>this.$emit("onClose")),type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},i(e.$t("Close")),1),I("   "),u(B,{Loader:s.loader,onOnButton:t[5]||(t[5]=o=>f.create())},{default:d(()=>[I(i(e.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const ye=O(pe,[["render",we]]),Ie={components:{DefaultSelect:F,Paginate:ee,DefaultInput:U,PrimaryBtn:T,ModalCentered:V,PrimaryIconBtn:Z,PrimaryButton:k,GrowingLoader:j,BasicTable:Y,Page:N,Update:de,Create:ye},setup(){return{counterStore:M()}},data(){return{items:[],item:[],boxItem:[],paginateCount:10,last_page:1,current_page:1,boxLast_page:1,boxCurrent_page:1,column:"id",type:"desc",errors:[],loader:!1,boxLoader:!1,boxItems:[],warehouses:Object,suppliers:Object}},methods:{async indexPaginates(e=1,t=!0){try{this.loader=t;const p=await z(this.paginateCount,e);p.status&&(this.current_page=p.data.pagination.current_page,this.last_page=p.data.pagination.last_page,this.items=p.data.items),this.loader=!1}catch(p){w(this,p)}},async search(e=""){try{if(this.loader=!0,e=="")return this.indexPaginates(),!0;const t=await H(e);return this.items=t.data,this.loader=!1,t.status?(this.loader=!1,!0):(y("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return w(this,t),this.loader=!1,!1}},async delete(e){try{if(!confirm(this.$t("DeleteAlert")))return!1;if((await J(e)).status){this.indexPaginates(this.current_page),y("success",this.$t("delete"));return}return y("error",this.$t("formError")),!1}catch(t){return w(this,t),!1}},async indexSuppliers(){try{this.boxLoader=!0;const e=await K();this.suppliers=e.data,this.boxLoader=!1}catch(e){w(this,e)}},async indexWarehouses(){try{this.boxLoader=!0;const e=await Q();this.warehouses=e.data,this.boxLoader=!1}catch(e){w(this,e)}}},mounted(){this.indexPaginates(),this.indexWarehouses(),this.indexSuppliers()}},Ce={class:"row"},ve={value:"10",selected:""},Se=r("option",{value:"10"},"10",-1),Be=r("option",{value:"20"},"20",-1),Pe=r("option",{value:"50"},"50",-1),Le=r("option",{value:"100"},"100",-1);function De(e,t,p,m,s,f){const C=a("DefaultInput"),v=a("DefaultSelect"),b=a("PrimaryBtn"),g=a("PrimaryIconBtn"),S=a("Paginate"),B=a("GrowingLoader"),P=a("BasicTable"),L=a("Update"),o=a("Create"),A=a("Page");return l(),h(A,{Title:""},{default:d(()=>[r("div",Ce,[u(P,{Th:[e.$t("No"),e.$t("Warehouse"),e.$t("Supplier"),e.$t("ImportedDate"),e.$t("Subtotal"),e.$t("AmountPaid"),e.$t("Indebtedness"),e.$t("Status"),e.$t("Settings")],Title:e.$t("ImportMedicines"),Col:"col-lg-12"},{inputs:d(()=>[u(C,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"name",Type:"text",Pholder:e.$t("DateSearch"),onOnInput:t[0]||(t[0]=n=>f.search(n))},null,8,["Pholder"]),u(v,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:t[1]||(t[1]=n=>(this.paginateCount=n,this.indexPaginates()))},{default:d(()=>[r("option",ve,i(e.$t("NumberDownloads")),1),Se,Be,Pe,Le]),_:1}),I("   ")]),buttons:d(()=>[m.counterStore.hasRole("Documents-create")?(l(),h(b,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#documentCreate"},{default:d(()=>[I(i(e.$t("NewImportMedicines")),1)]),_:1})):_("",!0)]),default:d(()=>[(l(!0),c(x,null,D(s.items,(n,R)=>(l(),c("tr",null,[r("td",null,i((s.current_page-1)*s.paginateCount+R+1),1),r("td",null,i(n.warehouse.name),1),r("td",null,i(n.supplier.name),1),r("td",null,i(n.date),1),r("td",null,i(m.counterStore.formatNumber(n.subtotal))+" "+i(n.currency.sign),1),r("td",null,i(m.counterStore.formatNumber(n.amount_paid))+" "+i(n.currency.sign),1),r("td",null,i(m.counterStore.formatNumber(n.loan_amount))+" "+i(n.currency.sign),1),r("td",null,[r("span",{class:X([n.status==5?"badge-soft-success":"badge-soft-warning","badge badge-pill font-size-11"])},i(n.status==5?e.$t("Saved"):e.$t("NotSaved")),3)]),r("td",null,[m.counterStore.hasRole("Documents-update")?(l(),h(g,{key:0,onClick:$=>this.item=n,Icon:"bx bx-edit-alt",Modal:"documentUpdate"},null,8,["onClick"])):_("",!0),m.counterStore.hasRole("Documents-update")&&n.status!=5?(l(),h(g,{key:1,onClick:$=>this.$router.push({path:"/admin/import",query:{id:n.id}}),Icon:"bx bx-receipt"},null,8,["onClick"])):_("",!0),m.counterStore.hasRole("Documents-update")&&n.status==5?(l(),h(g,{key:2,onClick:$=>this.$router.push({path:"/admin/document/show",query:{id:n.id}}),Icon:"bx bx-show"},null,8,["onClick"])):_("",!0),m.counterStore.hasRole("Documents-delete")?(l(),h(g,{key:3,onClick:$=>this.delete(n.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):_("",!0)])]))),256)),s.last_page!=1?(l(),h(S,{key:0,Cols:"9",currentPage:this.current_page,totalPages:this.last_page,onChangePage:t[2]||(t[2]=n=>f.indexPaginates(n))},null,8,["currentPage","totalPages"])):_("",!0),s.loader?(l(),h(B,{key:1,Cols:"9"})):_("",!0)]),_:1},8,["Th","Title"])]),u(L,{mloader:s.boxLoader,warehouses:s.warehouses,suppliers:s.suppliers,Item:s.item,onOnUpdate:t[3]||(t[3]=n=>f.indexPaginates(this.current_page,!1))},null,8,["mloader","warehouses","suppliers","Item"]),u(o,{mloader:s.boxLoader,warehouses:s.warehouses,suppliers:s.suppliers,onOnCreate:t[4]||(t[4]=n=>f.indexPaginates(this.current_page,!1))},null,8,["mloader","warehouses","suppliers"])]),_:1})}const je=O(Ie,[["render",De]]);export{je as default};

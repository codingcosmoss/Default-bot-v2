import{a as v,M as S,b as x,P as M}from"./Page-J7ry7tet.js";import{_ as k,u as T,bl as q,H as p,bm as R,A as f,o as u,c as h,w as i,e as s,a as l,t as n,f as b,r as o,P as j,bn as H,bo as W,bp as J,bq as K,g as $,b as P,d as N,F as V,n as Q}from"./app-8LJP0yV3.js";import{a as O,B as X}from"./BasicTable-ojWB0Fu0.js";import{G as Y}from"./GrowingLoader-FuF7Qd6J.js";import{P as Z}from"./PrimaryIconBtn--NOyd2jX.js";import{D}from"./DefaultInput-f9zEhjKC.js";import{D as L}from"./DefaultSelect-C_qZInxs.js";import{I as U}from"./ImageInput-M1xU8KsH.js";import{P as ee}from"./Paginate-JRw_NSin.js";const te={components:{ImageInput:U,DefaultSelect:L,PrimaryBtn:v,BtnBox:O,ModalCentered:S,PrimaryButton:x,DefaultInput:D,Page:M},setup(){return{counterStore:T()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,status:1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await q(t);this.item=e.data,this.name=e.data.name,this.status=e.data.status}catch(e){p(this,e)}},save(){this.item=this.Item,this.warehouse_id=this.Item.warehouse_id,this.box_size_id=this.Item.box_size_id,this.drug_company_id=this.Item.drug_company_id,this.name=this.Item.name,this.generic_name=this.Item.generic_name,this.buy_price=this.Item.buy_price,this.price=this.Item.price,this.qr_code=this.Item.qr_code,this.hns_code=this.Item.hns_code,this.desc=this.Item.desc,this.strength=this.Item.strength,this.shelf=this.Item.shelf,this.vat=this.Item.vat,this.igta=this.Item.igta,this.status=this.Item.status,console.log("Item",this.Item)},async update(){try{this.loader=!0;let t={name:this.name,status:Number(this.status)};console.log(t);const e=await R(this.Item.id,t);return e.status?(f("success",this.$t("create")),this.errors=[],this.loader=!1,this.counterStore.hiddenModal("warehouseUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=e.errors,f("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return p(this,t),this.loader=!1,!1}}},mounted(){},watch:{Item:function(t,e){this.save()}}},se={class:"row"},ae={class:"row"},oe={class:"col-12 d-flex flex-column"},re={class:"form-label"},ne=["checked"],ie=s("label",{for:"warehouse_update","data-on-label":"On","data-off-label":"Off"},null,-1),le={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function ue(t,e,c,_,a,m){const I=o("DefaultInput"),w=o("BaseBox"),y=o("PrimaryBtn"),g=o("BtnBox"),C=o("ModalCentered");return u(),h(C,{Title:t.$t("Update"),ModalName:"warehouseUpdate",isModalFooter:!1},{default:i(()=>[s("div",se,[l(w,{Col:"col-xl-12",Title:""},{default:i(()=>[s("div",ae,[l(I,{Label:t.$t("ModalName"),Name:"name",Type:"text",Validated:a.errors,Value:a.name,onOnInput:e[0]||(e[0]=d=>(a.name=d,delete this.errors.name))},null,8,["Label","Validated","Value"]),s("div",oe,[s("label",re,n(t.$t("Status")),1),s("input",{type:"checkbox",id:"warehouse_update",switch:"none",onInput:e[1]||(e[1]=d=>a.status=a.status==1?0:1),checked:a.status==1},null,40,ne),ie])])]),_:1}),l(g,null,{default:i(()=>[s("button",le,n(t.$t("Close")),1),b("   "),l(y,{Loader:a.loader,onOnButton:e[2]||(e[2]=d=>m.update())},{default:i(()=>[b(n(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const de=k(te,[["render",ue]]),ce={components:{ImageInput:U,DefaultSelect:L,PrimaryBtn:v,BtnBox:O,ModalCentered:S,PrimaryButton:x,DefaultInput:D,Page:M},setup(){return{counterStore:T()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,status:1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await j(t);this.item=e.data,this.name=e.data.name,this.status=e.data.status}catch(e){p(this,e)}},async save(){try{this.item="",this.name="",this.status=1}catch(t){p(this,t)}},async create(){try{this.loader=!0;let t={name:this.name,status:this.status};const e=await H(t);return e.status?(f("success",this.$t("create")),this.save(),this.loader=!1,this.errors=[],this.counterStore.hiddenModal("warehouseCreate"),this.$emit("onCreate",!0),!0):(this.errors=e.errors,f("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return p(this,t),this.loader=!1,!1}}},mounted(){},watch:{Item:function(t,e){this.save()}}},me={class:"row"},he={class:"row"},pe={class:"col-12 d-flex flex-column"},fe={class:"form-label"},_e=["checked"],ge=s("label",{for:"warehouse_create","data-on-label":"On","data-off-label":"Off"},null,-1);function be(t,e,c,_,a,m){const I=o("DefaultInput"),w=o("BaseBox"),y=o("PrimaryBtn"),g=o("BtnBox"),C=o("ModalCentered");return u(),h(C,{Title:t.$t("Create"),ModalName:"warehouseCreate",isModalFooter:!1},{default:i(()=>[s("div",me,[l(w,{Col:"col-xl-12",Title:""},{default:i(()=>[s("div",he,[l(I,{Label:t.$t("ModalName"),Name:"name",Type:"text",Validated:a.errors,Value:a.name,onOnInput:e[0]||(e[0]=d=>(a.name=d,delete this.errors.name))},null,8,["Label","Validated","Value"]),s("div",pe,[s("label",fe,n(t.$t("Status")),1),s("input",{type:"checkbox",id:"warehouse_create",switch:"none",onInput:e[1]||(e[1]=d=>a.status=a.status==1?0:1),checked:a.status==1},null,40,_e),ge])])]),_:1}),l(g,null,{default:i(()=>[s("button",{onClick:e[2]||(e[2]=d=>this.$emit("onClose")),type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},n(t.$t("Close")),1),b("   "),l(y,{Loader:a.loader,onOnButton:e[3]||(e[3]=d=>m.create())},{default:i(()=>[b(n(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const Ie=k(ce,[["render",be]]),we={components:{DefaultSelect:L,Paginate:ee,DefaultInput:D,PrimaryBtn:v,ModalCentered:S,PrimaryIconBtn:Z,PrimaryButton:x,GrowingLoader:Y,BasicTable:X,Page:M,Update:de,Create:Ie},setup(){return{counterStore:T()}},data(){return{items:[],item:[],boxItem:[],paginateCount:10,last_page:1,current_page:1,boxLast_page:1,boxCurrent_page:1,column:"id",type:"desc",errors:[],loader:!1,boxLoader:!1,boxItems:[]}},methods:{async indexPaginates(t=1,e=!0){try{this.loader=e;const c=await W(this.paginateCount,t);c.status&&(this.current_page=c.data.pagination.current_page,this.last_page=c.data.pagination.last_page,this.items=c.data.items),this.loader=!1}catch(c){p(this,c)}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await J(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(f("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return p(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;if((await K(t)).status){this.indexPaginates(this.current_page),f("success",this.$t("delete"));return}return f("error",this.$t("formError")),!1}catch(e){return p(this,e),!1}}},mounted(){this.indexPaginates()}},ye={class:"row"},Ce={value:"10",selected:""},$e=s("option",{value:"10"},"10",-1),Be=s("option",{value:"20"},"20",-1),Pe=s("option",{value:"50"},"50",-1),ve=s("option",{value:"100"},"100",-1),Se={class:"m-0"};function xe(t,e,c,_,a,m){const I=o("DefaultInput"),w=o("DefaultSelect"),y=o("PrimaryBtn"),g=o("PrimaryIconBtn"),C=o("Paginate"),d=o("GrowingLoader"),E=o("BasicTable"),A=o("Update"),z=o("Create"),F=o("Page");return u(),h(F,{Title:""},{default:i(()=>[s("div",ye,[l(E,{Th:[t.$t("No"),t.$t("ModalName"),t.$t("ImportMedicinesAmount"),t.$t("ImportMedicines"),t.$t("Status"),t.$t("Settings")],Title:t.$t("Warehouses"),Col:"col-lg-12"},{inputs:i(()=>[l(I,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:e[0]||(e[0]=r=>m.search(r))}),l(w,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:e[1]||(e[1]=r=>(this.paginateCount=r,this.indexPaginates()))},{default:i(()=>[s("option",Ce,n(t.$t("NumberDownloads")),1),$e,Be,Pe,ve]),_:1}),b("   ")]),buttons:i(()=>[_.counterStore.hasRole("MedicineCategories-create")?(u(),h(y,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#warehouseCreate"},{default:i(()=>[b(n(t.$t("Create")),1)]),_:1})):$("",!0)]),default:i(()=>[(u(!0),P(V,null,N(a.items,(r,G)=>(u(),P("tr",null,[s("td",null,n((a.current_page-1)*a.paginateCount+G+1),1),s("td",null,n(r.name),1),s("td",null,n(r.impoted_medicines_count),1),s("td",null,[(u(!0),P(V,null,N(r.importMedicinePrices,B=>(u(),P("p",Se,n(_.counterStore.formatNumber(B.total_amount))+" "+n(B.sign),1))),256))]),s("td",null,[s("span",{class:Q([r.status==1?"badge-soft-success":"badge-soft-danger","badge badge-pill badge-soft-success font-size-11"])},n(r.status==1?t.$t("Active"):t.$t("InActive")),3)]),s("td",null,[_.counterStore.hasRole("MedicineCategories-update")?(u(),h(g,{key:0,onClick:B=>this.item=r,Icon:"bx bx-edit-alt",Modal:"warehouseUpdate"},null,8,["onClick"])):$("",!0),_.counterStore.hasRole("MedicineCategories-delete")&&r.impoted_medicines_count==0?(u(),h(g,{key:1,onClick:B=>this.delete(r.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):$("",!0)])]))),256)),a.last_page!=1?(u(),h(C,{key:0,Cols:"6",currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[2]||(e[2]=r=>m.indexPaginates(r))},null,8,["currentPage","totalPages"])):$("",!0),a.loader?(u(),h(d,{key:1,Cols:"6"})):$("",!0)]),_:1},8,["Th","Title"])]),l(A,{Item:a.item,onOnUpdate:e[3]||(e[3]=r=>m.indexPaginates(this.current_page,!1))},null,8,["Item"]),l(z,{onOnCreate:e[4]||(e[4]=r=>m.indexPaginates(this.current_page,!1))})]),_:1})}const Ee=k(we,[["render",xe]]);export{Ee as default};

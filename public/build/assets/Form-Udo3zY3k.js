import{P as L}from"./Page-8n99lQGG.js";import{_ as h,o as d,c,a,t as i,n as g,h as b,s as E,k as j,u as P,a7 as V,A as O,a2 as B,a6 as D,r as p,b as u,w as k,F as x,D as T,f as C}from"./app-TemNFbnf.js";import{P as S}from"./PrimaryButton-K5Vl9PDh.js";import{P as N}from"./PrimaryButton2-EuaGbrzE.js";import{M as K}from"./MultiSelect-pLZZjGfv.js";import{C as y}from"./Checkbox01-7mbR3o1K.js";import{I as M}from"./ImageInput-WFQR4nv9.js";import"./Select-2LcnBieZ.js";const F={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Class:{type:String,default:""},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},A={class:"mb-2.5 block text-black dark:text-white"},q=["value","type"],U={key:0,class:"text-danger"};function z(e,s,r,n,t,o){return d(),c("div",{class:g(r.Couple?"mb-4.5":"w-full xl:w-1/2")},[a("label",A,i(r.Label),1),a("input",{value:r.Value,type:r.Type,min:"0",class:g([[r.Class,{isError:r.isError}],"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"...",onInput:s[0]||(s[0]=f=>this.$emit("onInput",f.target.value))},null,42,q),r.isError?(d(),c("p",U,i(r.message),1)):b("",!0)],2)}const I=h(F,[["render",z]]),G={components:{Input:I},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function J(e,s,r,n,t,o){return d(),c("li",null,[a("input",{type:"checkbox",onInput:s[0]||(s[0]=f=>this.$emit("onCheck",!0))},null,32),E(" Â  "+i(r.Title),1)])}const W=h(G,[["render",J],["__scopeId","data-v-8fbdb8d8"]]),H={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1}}},Q={class:"mb-2.5 block text-black dark:text-white"},R=["value","type"];function X(e,s,r,n,t,o){return d(),c("div",{class:g(r.Couple?"mb-4.5":"w-full xl:w-1/2")},[a("label",Q,i(r.Label),1),a("input",{value:r.Value,type:r.Type,class:g([r.isError==!0?"isError":"","rounded border-[1.5px] border-stroke bg-transparent py-20 px-2 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"Select subject",onInput:s[0]||(s[0]=f=>this.$emit("onInput",f.target.value)),style:{width:"80px",height:"40px"}},null,42,R)],2)}const Y=h(H,[["render",X]]),Z={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},$={class:"mb-2.5 block text-black dark:text-white"},ee={key:0,class:"text-danger"};function se(e,s,r,n,t,o){return d(),c("div",{class:g(r.Couple?"mb-4.5":"w-full xl:w-1/2")},[a("label",$,i(r.Label),1),a("select",{onInput:s[0]||(s[0]=f=>this.$emit("onSelect",f.target.value)),class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[j(e.$slots,"default")],32),r.isError?(d(),c("p",ee,i(r.message),1)):b("",!0)],2)}const te=h(Z,[["render",se]]),re={computed:{checkbox01(){return y}},data(){return{name:"",order:"",code:"",price:"",category:"",material_price:"",technic_price:"",status:1,isLoginError:!1,errorObj:{},categories:[],Checkbox:"",last_name:"",first_name:"",phone:"",job:"",address:"",gender:"",birthday:"",sort_order:"",diseasesIds:[],allDiseases:[],Image:"",Photo:"",Loader:!1}},components:{ImageInput:M,Checkbox01:y,Select:te,PrimaryButton2:N,MultiSelect:K,PrimaryButton:S,InputColor:Y,Checkbox:W,Input:I},methods:{getName(e){return P().getName(e)},formatPhone(e){const s=["0","1","2","3","4","5","6","7","8","9",""," "],r=document.querySelector(".phone_input");let n=this.phone.length<e.length;if(console.log(e,e.length),n)if(s.includes(e.slice(e.length-1,e.length))){if(e.length>19)return r.value=this.phone,!1}else return r.value=this.phone,!1;else if(e.length>20)return r.value=this.phone,!1;e.length==4&&n?this.phone="(+"+e+") ":e.length==9&&n?this.phone=e+" ":e.length==13&&n?this.phone=e+" ":(e.length==16||e.length==17)&&n?this.phone=e+" ":this.phone=e},async update(){this.Loader=!0;var e=[];this.diseasesIds.length>0?this.diseasesIds.forEach(n=>{e.push(n.id)}):e=0;var s={first_name:this.first_name,last_name:this.last_name,phone:this.phone,job:this.job,address:this.address,gender:this.Checkbox,birthday:this.birthday,sort_order:this.sort_order,diseasesIds:e,price:0,image:this.Image};const r=await V(this.$route.query.id,s);console.log(r),r.status?(O("success","Update successfully !"),this.$router.push("/patients")):(this.errorObj=r.data,this.Loader=!1)},async getModel(){const e=await B(this.$route.query.id);e.status&&(this.first_name=e.data.first_name,this.last_name=e.data.last_name,this.phone=e.data.phone,this.job=e.data.job,this.address=e.data.address,this.Checkbox=e.data.gender,this.birthday=e.data.birthday,this.sort_order=e.data.sort_order,this.diseasesIds=e.data.diseases,this.Photo=e.data.image[0].url,this.getDisiases())},async getDisiases(){const e=await D(null,1e3);var s=[];e.data.items.forEach(r=>{this.diseasesIds.some(n=>n.id==r.id)||s.push({name:r.name,id:r.id})}),this.allDiseases=s},hasKey(e){return e in this.errorObj},onSelect(e){this.diseasesIds.indexOf(e)==-1&&(this.diseasesIds.push({name:this.allDiseases.filter(s=>s.id==Number(e))[0].name,id:this.allDiseases.filter(s=>s.id==Number(e))[0].id}),this.allDiseases=this.allDiseases.filter(s=>s.id!=Number(e)))},onPush(e){this.allDiseases.push(e),this.diseasesIds=this.diseasesIds.filter(s=>s.id!=e.id)},hasPermission(){if(localStorage.getItem("permissions").split(",").includes("Patients-update"))return!0;this.$router.go(-1)}},mounted(){this.getModel(),this.hasPermission()}},oe={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",style:{display:"flex","justify-content":"flex-end"}},ae={class:"flex items-center gap-2"},le={class:"font-medium text-primary"},ne={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},ie={class:"flex flex-col gap-9"},de={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},ue={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},ce={class:"font-semibold text-black dark:text-white"},fe={action:"#"},me={class:"p-6.5"},pe={class:"flex flex-col gap-9"},he={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},be=a("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[a("h3",{class:"font-semibold text-black dark:text-white"})],-1),ge={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},_e={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},xe={class:"mb-2.5 block text-black dark:text-white"},ye={key:0,style:{float:"right"},class:"text-danger"},ke={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},Ce={class:"flex flex-col gap-6 xl:flex-row p-6.5"},Ie={class:"flex flex-col gap-6 xl:flex-row px-6.5"},ve=a("option",{selected:""},"---",-1),we=["value"],Le=a("div",{class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},null,-1),Ee={class:"pl-7 p-6.5",style:{display:"flex","justify-content":"center"}};function je(e,s,r,n,t,o){const f=p("ImageInput"),m=p("Input"),_=p("checkbox01"),v=p("MultiSelect"),w=p("loader-spinning");return d(),c(x,null,[a("div",oe,[a("nav",null,[a("ol",ae,[a("li",null,[a("a",{class:"font-medium cursor-pointer",onClick:s[0]||(s[0]=l=>this.$router.push("/patients"))},i(o.getName("Patients"))+" /",1)]),a("li",le,i(o.getName("create")),1)])])]),a("div",ne,[a("div",ie,[a("div",de,[a("div",ue,[a("h3",ce,i(o.getName("Patients")),1)]),a("form",fe,[a("div",me,[u(f,{onImage:s[1]||(s[1]=l=>t.Image=l),Label:"Photo",Photo:t.Photo},null,8,["Photo"])])])])]),a("div",pe,[a("div",he,[be,a("div",ge,[u(m,{Couple:!1,Label:o.getName("last_name"),onOnInput:s[2]||(s[2]=l=>t.last_name=l),isError:o.hasKey("last_name"),message:t.errorObj.last_name,Value:t.last_name},null,8,["Label","isError","message","Value"]),u(m,{Couple:!1,Label:o.getName("name"),onOnInput:s[3]||(s[3]=l=>t.first_name=l),isError:o.hasKey("first_name"),message:t.errorObj.first_name,Value:t.first_name},null,8,["Label","isError","message","Value"])]),a("div",_e,[u(m,{Couple:!1,Label:o.getName("Address"),onOnInput:s[4]||(s[4]=l=>t.address=l),isError:o.hasKey("address"),message:t.errorObj.address,Value:t.address},null,8,["Label","isError","message","Value"]),a("label",xe,i(o.getName("Gender")),1),u(_,{onClick:s[5]||(s[5]=l=>(t.Checkbox=5,console.log(t.Checkbox))),onCheck:t.Checkbox==5,Title:o.getName("Male"),Class:"genderCheckbox"},null,8,["onCheck","Title"]),u(_,{onClick:s[6]||(s[6]=l=>(t.Checkbox=4,console.log(t.Checkbox))),onCheck:t.Checkbox==4,Title:o.getName("Woman"),Class:"genderCheckbox"},null,8,["onCheck","Title"])]),o.hasKey("gender")?(d(),c("p",ye,i(t.errorObj.gender),1)):b("",!0),a("div",ke,[u(m,{Couple:!1,Label:o.getName("phone"),onOnInput:s[7]||(s[7]=l=>o.formatPhone(l)),isError:o.hasKey("phone"),message:t.errorObj.phone,Value:t.phone,Class:"phone_input"},null,8,["Label","isError","message","Value"]),u(m,{Couple:!1,Label:o.getName("Job"),onOnInput:s[8]||(s[8]=l=>t.job=l),isError:o.hasKey("job"),message:t.errorObj.job,Value:t.job},null,8,["Label","isError","message","Value"])]),a("div",Ce,[u(m,{Couple:!1,Label:o.getName("Date_birth"),onOnInput:s[9]||(s[9]=l=>t.birthday=l),isError:o.hasKey("birthday"),message:t.errorObj.birthday,Value:t.birthday,Type:"date"},null,8,["Label","isError","message","Value"]),u(m,{Couple:!1,Label:o.getName("Serial_number"),onOnInput:s[10]||(s[10]=l=>t.sort_order=l),isError:o.hasKey("sort_order"),message:t.errorObj.sort_order,Value:t.sort_order,Type:"number"},null,8,["Label","isError","message","Value"])]),a("div",Ie,[u(v,{Couple:!1,Label:o.getName("diseases"),onOnSelect:s[11]||(s[11]=l=>o.onSelect(l)),Items:t.diseasesIds,onPushArray:s[12]||(s[12]=l=>o.onPush(l))},{default:k(()=>[ve,(d(!0),c(x,null,T(t.allDiseases,l=>(d(),c("option",{value:l.id},i(l.name),9,we))),256))]),_:1},8,["Label","Items"]),Le]),a("div",Ee,[t.Loader?(d(),C(w,{key:0,style:{margin:"0 auto"}})):b("",!0),t.Loader?b("",!0):(d(),c("button",{key:1,onClick:s[13]||(s[13]=(...l)=>o.update&&o.update(...l)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},i(o.getName("update")),1))])])])])],64)}const Pe=h(re,[["render",je]]),Ve={components:{FormLayouts:Pe,Page:L}};function Oe(e,s,r,n,t,o){const f=p("FormLayouts"),m=p("Page");return d(),C(m,{Classes:!1,Animation:!1},{default:k(()=>[u(f)]),_:1})}const Ae=h(Ve,[["render",Oe]]);export{Ae as default};

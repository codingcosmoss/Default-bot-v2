import{a as v,M as $,b as S,P as T}from"./Page-kS-htxF1.js";import{_ as L,u as k,a0 as x,l,a1 as N,A as m,o as d,d as p,w as u,a,e as n,t as c,b as C,r as o,a2 as F,a3 as R,a4 as j,a5 as q,a6 as z,a7 as H,a8 as J,g as y,c as V,f as K,I as Q,F as W}from"./app--lA0zENz.js";import{a as X,B as Y}from"./BasicTable-ceqsBAou.js";import{G as Z}from"./GrowingLoader-CWiifW_R.js";import{P as ee}from"./PrimaryIconBtn-zZrE_wsa.js";import{D}from"./DefaultInput-OXMKtQjk.js";import{D as U}from"./DefaultSelect-uFn2hizB.js";import{I as te}from"./ImageInput-q8VLym8J.js";import{C as se}from"./create-gVLqG_LI.js";import{P as ae}from"./Paginate-J0lbL4Dz.js";const re={components:{ImageInput:te,DefaultSelect:U,PrimaryBtn:v,BtnBox:X,ModalCentered:$,PrimaryButton:S,DefaultInput:D,Page:T},setup(){return{counterStore:k()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(e){try{const t=await x(e);this.item=t.data,this.name=t.data.name,this.login=t.data.login,this.email=t.data.email,this.phone=t.data.phone,this.image=t.data.image[0].url}catch(t){l(this,t)}},save(e){this.item=e,this.name=e.name,this.address=e.address,this.email=e.email,this.phone=e.phone,this.image=e.image!=null?e.image[0].url:""},async update(){try{this.loader=!0;let e={name:this.name,phone:this.phone,address:this.address,email:this.email,image:this.image};const t=await N(this.Item.id,e);return t.status?(this.show(t.data.id),m("success",this.$t("update")),this.loader=!1,this.counterStore.hiddenModal("customerUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=t.errors,m("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return l(this,e),this.loader=!1,!1}}},watch:{Item:function(e,t){this.save(this.Item)}}},oe={class:"row"},ne={class:"row"},ie={class:"row"},le={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function ue(e,t,O,_,s,h){const P=o("ImageInput"),g=o("DefaultInput"),b=o("BaseBox"),f=o("PrimaryBtn"),I=o("BtnBox"),w=o("ModalCentered");return d(),p(w,{Title:e.$t("Update"),ModalName:"customerUpdate",isModalFooter:!1},{default:u(()=>[a("div",oe,[n(b,{Col:"col-xl-12",Title:""},{default:u(()=>[n(P,{Title:e.$t("ProfilPhoto"),Name:"customerUpdateImage",onCustomerUpdateImage:t[0]||(t[0]=i=>(s.image=i,delete this.errors.image)),Validated:s.errors,Image:s.image},null,8,["Title","Validated","Image"]),a("div",ne,[n(g,{Label:e.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:t[1]||(t[1]=i=>(s.name=i,delete this.errors.name)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(g,{Label:e.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:t[2]||(t[2]=i=>(s.phone=i,delete this.errors.phone)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])]),a("div",ie,[n(g,{Label:e.$t("Email"),Name:"email",Type:"text",Validated:s.errors,Value:s.email,onOnInput:t[3]||(t[3]=i=>(s.email=i,delete this.errors.email)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(g,{Label:e.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:t[4]||(t[4]=i=>(s.address=i,delete this.errors.address)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])])]),_:1}),n(I,null,{default:u(()=>[a("button",le,c(e.$t("Close")),1),C("   "),n(f,{Loader:s.loader,onOnButton:t[5]||(t[5]=i=>h.update())},{default:u(()=>[C(c(e.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const de=L(re,[["render",ue]]),me={components:{DefaultSelect:U,Paginate:ae,DefaultInput:D,PrimaryBtn:v,ModalCentered:$,PrimaryIconBtn:ee,PrimaryButton:S,GrowingLoader:Z,BasicTable:Y,Page:T,Update:de,Create:se},setup(){return{counterStore:k()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],loader:!1}},methods:{async index(){try{const e=await F();this.items=e.data}catch(e){l(this,e)}},async indexActives(){try{const e=await R(this.paginateCount);this.items=e.data}catch(e){l(this,e)}},async indexPaginates(e=1){try{this.loader=!0;const t=await j(this.paginateCount,e);this.current_page=t.data.pagination.current_page,this.last_page=t.data.pagination.last_page,this.items=t.data.items,this.loader=!1}catch(t){l(this,t)}},async orderBys(){try{const e=await q(this.column,this.type);this.items=e.data}catch(e){l(this,e)}},async show(e){try{const t=await x(e);this.item=t.data}catch(t){l(this,t)}},async create(){try{const t=await z({});return t.status?(m("success",this.$t("create")),!0):(this.errors=t.errors,m("error",this.$t("formError")),!1)}catch(e){return l(this,e),!1}},async update(){try{const t=await N({});return t.status?(m("success",this.$t("update")),!0):(this.errors=t.errors,m("error",this.$t("formError")),!1)}catch(e){return l(this,e),!1}},async search(e=""){try{if(this.loader=!0,e=="")return this.indexPaginates(),!0;const t=await H(e);return this.items=t.data,this.loader=!1,t.status?(this.loader=!1,!0):(m("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return l(this,t),this.loader=!1,!1}},async delete(e){try{if(!confirm(this.$t("DeleteAlert")))return!1;const t=await J(e);return this.items=t.data,t.status&&(this.indexPaginates(this.current_page),m("success",this.$t("delete"))),m("error",this.$t("formError")),!1}catch(t){return l(this,t),!1}}},mounted(){this.indexPaginates()}},ce={class:"row"},pe={value:"10",selected:""},he=a("option",{value:"10"},"10",-1),ge=a("option",{value:"20"},"20",-1),fe=a("option",{value:"50"},"50",-1),ye=a("option",{value:"100"},"100",-1);function _e(e,t,O,_,s,h){const P=o("DefaultInput"),g=o("DefaultSelect"),b=o("PrimaryBtn"),f=o("PrimaryIconBtn"),I=o("Paginate"),w=o("GrowingLoader"),i=o("BasicTable"),E=o("Update"),A=o("Create"),M=o("Page");return d(),p(M,{Title:""},{default:u(()=>[a("div",ce,[n(i,{Th:[e.$t("No"),e.$t("Image"),e.$t("Name"),e.$t("Phone"),e.$t("Email"),e.$t("Address"),e.$t("Settings")],Title:e.$t("Customers"),Col:"col-lg-12"},{inputs:u(()=>[n(P,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:t[0]||(t[0]=r=>h.search(r))}),n(g,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:t[1]||(t[1]=r=>(this.paginateCount=r,this.indexPaginates()))},{default:u(()=>[a("option",pe,c(e.$t("NumberDownloads")),1),he,ge,fe,ye]),_:1}),C("   ")]),buttons:u(()=>[_.counterStore.hasRole("Customers-create")?(d(),p(b,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#customerCreate"},{default:u(()=>[C(c(e.$t("Create")),1)]),_:1})):y("",!0)]),default:u(()=>[(d(!0),V(W,null,K(s.items,(r,G)=>(d(),V("tr",null,[a("td",null,c((s.current_page-1)*s.paginateCount+G+1),1),a("td",null,[a("div",{class:"table_image",style:Q("background-image: url("+r.image[0].url+")")},null,4)]),a("td",null,c(r.name),1),a("td",null,c(r.phone),1),a("td",null,c(r.email),1),a("td",null,c(r.address),1),a("td",null,[_.counterStore.hasRole("Customers-update")?(d(),p(f,{key:0,onClick:B=>this.item=r,Icon:"bx bx-edit-alt",Modal:"customerUpdate"},null,8,["onClick"])):y("",!0),n(f,{onClick:B=>this.$router.push({path:"/admin/customers/show",query:{id:r.id}}),Icon:"bx bx-show"},null,8,["onClick"]),_.counterStore.hasRole("Customers-delete")?(d(),p(f,{key:1,onClick:B=>this.delete(r.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):y("",!0)])]))),256)),s.last_page!=1?(d(),p(I,{key:0,currentPage:this.current_page,totalPages:this.last_page,onChangePage:t[2]||(t[2]=r=>h.indexPaginates(r))},null,8,["currentPage","totalPages"])):y("",!0),s.loader?(d(),p(w,{key:1,Cols:"7"})):y("",!0)]),_:1},8,["Th","Title"])]),n(E,{Item:s.item,onOnUpdate:t[3]||(t[3]=r=>h.indexPaginates(this.current_page))},null,8,["Item"]),n(A,{onOnCreate:t[4]||(t[4]=r=>h.indexPaginates(this.current_page))})]),_:1})}const Te=L(me,[["render",_e]]);export{Te as default};

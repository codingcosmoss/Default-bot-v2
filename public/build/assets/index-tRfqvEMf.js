import{b as B,a as C,P as I}from"./Page-6po4WWvc.js";import{_ as L,u as w,T as P,l as a,U as T,V as b,W as D,X as N,Y as O,A as i,Z as v,$ as x,d as A,w as n,r as l,o as c,a as E,e as o,b as g,t as h,c as y,f as k,F as U}from"./app-qjkFfopU.js";import{I as F}from"./ImageInput-rzGOIOcx.js";import{D as J}from"./DefaultInput-qAxpax30.js";import{D as W}from"./DefaultSelect-QS9w35hK.js";const X={components:{DefaultSelect:W,PrimaryButton:B,PrimaryBtn:C,DefaultInput:J,ImageInput:F,Page:I},setup(){return{counterStore:w()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],headers:[],loader:!1,image:"",name:"",phone:"",email:"",address:"",currency_id:"",currencies:[]}},methods:{async index(){try{this.loader=!0;const t=await P();this.items=t.data,this.loader=!1}catch(t){a(this,t)}},async getCurrencies(){try{this.loader=!0;const t=await T();this.currencies=t.data,this.loader=!1}catch(t){a(this,t)}},async indexActives(){try{this.loader=!0;const t=await b(this.paginateCount);this.items=t.data,this.loader=!1}catch(t){a(this,t)}},async indexPaginates(t=1){try{this.loader=!0;const e=await D(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){a(this,e)}},async orderBys(){try{this.loader=!0;const t=await settingOrderBys(this.column,this.type);this.items=t.data,this.loader=!1}catch(t){a(this,t)}},async show(t){try{this.loader=!0;const e=await N(this.counterStore.user.clinic_id);this.item=e.data,this.name=e.data.name,this.address=e.data.address,this.email=e.data.email,this.phone=e.data.phone,this.currency_id=e.data.currency_id,this.image=e.data.logo[0].url,this.loader=!1;let d=this.counterStore.user;d.logo=e.data.logo,localStorage.setItem("user",JSON.stringify(d)),this.counterStore.updateUser(d)}catch(e){a(this,e)}},async create(){try{this.loader=!0;const e=await O({});return e.status?(i("success",this.$t("create")),this.loader=!1,!0):(this.errors=e.errors,i("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return a(this,t),this.loader=!1,!1}},async update(){try{this.loader=!0;let t={name:this.name,address:this.address,email:this.email,phone:this.phone,currency_id:this.currency_id,image:this.image};const e=await v(null,t);return e.status?(i("success",this.$t("update")),this.counterStore.updateCurrency(e.data.currency),this.show(e.data.clinic_id),this.loader=!1,!0):(this.errors=e.errors,i("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return a(this,t),this.loader=!1,!1}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await settingSearch(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(i("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return a(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await x(t);return this.items=e.data,e.status&&(this.indexPaginates(),i("success",this.$t("delete"))),i("error",this.$t("formError")),!1}catch(e){return a(this,e),!1}}},mounted(){this.getCurrencies(),this.show(null)}},Y={class:"row"},Z=["selected","value"];function j(t,e,d,q,r,m){const _=l("ImageInput"),u=l("DefaultInput"),p=l("PrimaryButton"),f=l("BaseBox"),V=l("DefaultSelect"),S=l("Page");return c(),A(S,{Title:""},{default:n(()=>[E("div",Y,[o(f,{Col:"col-xl-6",Title:t.$t("CompanySettings")},{default:n(()=>[o(_,{Title:t.$t("CompanyLogo"),Name:"CompanyLogo",onCompanyLogo:e[0]||(e[0]=s=>(r.image=s,delete this.errors.image)),Image:r.image,Validated:r.errors},null,8,["Title","Image","Validated"]),o(u,{Label:t.$t("CompanyName"),Name:"name",Type:"text",Validated:r.errors,Value:r.name,onOnInput:e[1]||(e[1]=s=>(r.name=s,delete this.errors.name))},null,8,["Label","Validated","Value"]),o(u,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:r.errors,Value:r.address,onOnInput:e[2]||(e[2]=s=>(r.address=s,delete this.errors.address))},null,8,["Label","Validated","Value"]),o(u,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:r.errors,Value:r.phone,onOnInput:e[3]||(e[3]=s=>(r.phone=s,delete this.errors.phone))},null,8,["Label","Validated","Value"]),o(u,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:r.errors,Value:r.email,onOnInput:e[4]||(e[4]=s=>(r.email=s,delete this.errors.email))},null,8,["Label","Validated","Value"]),o(p,{Loader:r.loader,onOnButton:m.update},{default:n(()=>[g(h(t.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"]),o(f,{Col:"col-xl-6",Title:t.$t("ProgramSettings")},{default:n(()=>[o(V,{Label:t.$t("Currency"),Name:"currency_id",onOnInput:e[5]||(e[5]=s=>(r.currency_id=s,delete this.errors.currency_id)),Validated:r.errors},{default:n(()=>[(c(!0),y(U,null,k(r.currencies,s=>(c(),y("option",{selected:s.id==r.currency_id,value:s.id},h(s.title)+" ("+h(s.sign)+")",9,Z))),256))]),_:1},8,["Label","Validated"]),o(p,{Loader:r.loader,onOnButton:m.update},{default:n(()=>[g(h(t.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"])])]),_:1})}const Q=L(X,[["render",j]]);export{Q as default};

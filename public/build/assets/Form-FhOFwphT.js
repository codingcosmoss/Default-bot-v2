import{P as v}from"./Page-EAuwfOTr.js";import{_,o as n,c as a,a as r,x as h,t as u,y as P,u as N,D as O,A as j,B as y,E as V,r as d,b as i,F as g,C as k,f as C,h as x,w as F}from"./app-wmakNrFD.js";import{I as L}from"./Input-ptp6Qwrn.js";import{I as R}from"./InputColor-vS9SsQ7t.js";import{I as T}from"./ImageInput-jrxv8G6Z.js";import{C as B}from"./Checkbox01-R3umV7Dp.js";const D={components:{Input:L},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function K(s,e,p,f,o,t){return n(),a("li",null,[r("input",{type:"checkbox",onInput:e[0]||(e[0]=m=>this.$emit("onCheck",!0))},null,32),h("   "+u(p.Title),1)])}const q=_(D,[["render",K],["__scopeId","data-v-96264efe"]]),S={data(){return{name:"",position:"",login:"",profil_photo_path:"",percent_salary:"",salary_static:"",sort_order:"",isPasswordError:!1,reset_password:"",isLoginError:!1,color:"#FFFFFF",errorObj:{},image:"",photo:"",Roles:[],Permissions:[],Loader:!1}},components:{Checkbox01:B,ImageInput:T,InputColor:R,Checkbox:q,Input:L},methods:{addRoles(s){this.Roles.includes(s)?this.Roles=this.Roles.filter(e=>e!=s):this.Roles.push(s)},async getPermissions(){const s=await P();this.Permissions=s.data},getName(s){return N().getName(s)},testPassword(s){return this.password!=s?this.isPasswordError=!0:this.isPasswordError=!1,this.reset_password=s,this.isPasswordError},async update(){this.Loader=!0;var s={name:this.name,position:this.position,login:this.login,profil_photo_path:this.profil_photo_path,percent_salary:this.percent_salary,salary_static:this.salary_static,sort_order:this.sort_order,color:this.color,image:this.image,roles:this.Roles};console.log(s);const e=await O(this.$route.query.id,s);e.status?(j("success","Updated successfully !"),this.$router.push("/employees")):(console.log("data",e.data),this.errorObj=e.data,this.Loader=!1),this.Loader=!1},async sendData(){this.Loader=!0;const s=this.login;(await y({login:s,id:this.$route.query.id})).status?(this.isLoginError=!0,this.Loader=!1):(this.isLoginError=!1,this.update())},async get(){const s=await V(this.$route.query.id),e=s.data;console.log(e),s.status?(this.name=e.name,this.position=e.position,this.login=e.login,this.password=e.password,this.profil_photo_path=e.profil_photo_path,this.percent_salary=e.percent_salary,this.salary_static=e.salary_static,this.sort_order=e.sort_order,this.photo=e.image[0].url,e.permissions.forEach(p=>{this.Roles.push(p.id)}),this.color=e.color==null?"#ffffff":e.color):(console.log("data:",s.data),this.errorObj=s.data)},async testLogin(s){this.login=s,(await y({login:s,id:this.$route.query.id})).status?this.isLoginError=!0:this.isLoginError=!1},hasKey(s){return s in this.errorObj}},mounted(){this.get(),this.getPermissions()}},A={class:"breadcrumb-nav mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},U={class:"flex items-center gap-2"},z={class:"font-medium text-primary"},G={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},H={class:"flex flex-col gap-9"},J={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},M={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},Q={class:"font-semibold text-black dark:text-white"},W={action:"#"},X={class:"p-6.5"},Y={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},Z={class:"mb-4.5 flex flex-col gap-6 xl:flex-row"},$={class:"flex flex-col gap-9"},ee={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},se=r("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[r("h3",{class:"font-semibold text-black dark:text-white"})],-1),oe={class:"pt-0 p-6.5"},re={style:{display:"flex",padding:"5px 27px"}},te={class:"pl-7 p-6.5",style:{display:"flex","justify-content":"center"}};function le(s,e,p,f,o,t){const m=d("ImageInput"),c=d("Input"),w=d("InputColor"),b=d("Checkbox01"),E=d("loader-spinning");return n(),a(g,null,[r("div",A,[r("nav",null,[r("ol",U,[r("li",null,[r("a",{class:"font-medium cursor-pointer",onClick:e[0]||(e[0]=l=>this.$router.push("/employees"))},u(t.getName("employees"))+" /",1)]),r("li",z,u(t.getName("create")),1)])])]),r("div",G,[r("div",H,[r("div",J,[r("div",M,[r("h3",Q,u(t.getName("add_employee")),1)]),r("form",W,[r("div",X,[i(m,{onImage:e[1]||(e[1]=l=>o.image=l),Photo:o.photo,Label:"Photo"},null,8,["Photo"]),r("div",Y,[i(c,{Couple:!1,Label:t.getName("employee_name"),onOnInput:e[2]||(e[2]=l=>o.name=l),isError:t.hasKey("name"),message:o.errorObj.name,Value:o.name},null,8,["Label","isError","message","Value"]),i(c,{Couple:!1,Label:t.getName("Position_employee"),onOnInput:e[3]||(e[3]=l=>o.position=l),isError:t.hasKey("position"),message:o.errorObj.position,Value:o.position},null,8,["Label","isError","message","Value"])]),i(c,{Label:t.getName("login"),onOnInput:e[4]||(e[4]=l=>t.testLogin(l)),Value:o.login,isError:o.isLoginError||o.errorObj.login,message:o.errorObj.login?o.errorObj.login:"Login is available !"},null,8,["Label","Value","isError","message"]),r("div",Z,[i(w,{Type:"color",Couple:!1,Label:t.getName("color"),onOnInput:e[5]||(e[5]=l=>o.color=l),isError:t.hasKey("color"),message:o.errorObj.color,Value:o.color},null,8,["Label","isError","message","Value"]),i(c,{Type:"number",Couple:!1,Label:t.getName("Serial_number"),onOnInput:e[6]||(e[6]=l=>o.sort_order=l),isError:t.hasKey("sort_order"),message:o.errorObj.sort_order,Value:o.sort_order},null,8,["Label","isError","message","Value"])])])])])]),r("div",$,[r("div",ee,[se,r("p",oe,u(t.getName("employee_roles"))+":",1),r("ul",re,[r("li",null,[(n(!0),a(g,null,k(o.Permissions.slice(0,10),l=>(n(),a("span",null,[i(b,{onClick:I=>t.addRoles(l.id),onCheck:o.Roles.includes(l.id),Title:t.getName(l.lang_name),Class:"genderCheckbox"},null,8,["onClick","onCheck","Title"]),h("   ")]))),256))]),h("                "),r("li",null,[(n(!0),a(g,null,k(o.Permissions.slice(10,o.Permissions.length),l=>(n(),a("span",null,[i(b,{onClick:I=>t.addRoles(l.id),onCheck:o.Roles.includes(l.id),Title:t.getName(l.lang_name),Class:"genderCheckbox"},null,8,["onClick","onCheck","Title"]),h("   ")]))),256))])]),r("div",te,[o.Loader?(n(),C(E,{key:0,style:{margin:"0 auto"}})):x("",!0),o.Loader?x("",!0):(n(),a("button",{key:1,onClick:e[7]||(e[7]=(...l)=>t.sendData&&t.sendData(...l)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},u(t.getName("create")),1))])])])])],64)}const ie=_(S,[["render",le]]),ne={components:{FormLayouts:ie,Page:v}};function ae(s,e,p,f,o,t){const m=d("FormLayouts"),c=d("Page");return n(),C(c,{Classes:!1,Animation:!1},{default:F(()=>[i(m)]),_:1})}const ge=_(ne,[["render",ae]]);export{ge as default};

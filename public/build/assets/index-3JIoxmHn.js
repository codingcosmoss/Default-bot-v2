import{P as V}from"./Page-8n99lQGG.js";import{_ as v,u as w,o as l,c as i,a as e,t as o,n as f,k as A,h as m,L as z,M as F,$ as T,ab as R,A as _,ac as q,ad as H,ae as K,a2 as C,af as Q,ag as Y,bt as Z,ai as G,bu as J,r as h,b as c,F as N,D as P,w as y,E as W,f as M,s as S}from"./app-TemNFbnf.js";import{I as X}from"./Input-FG7ZHoFJ.js";import{I as $}from"./InputDefault-tLeF0Vsp.js";import{M as ee}from"./Switch-ytQAvUOl.js";import te from"./CreateForm-QH3CCTcw.js";import{_ as se}from"./pagination-01.vue_vue_type_style_index_0_lang-ZvTme92P.js";import{P as re}from"./paginate-OCobNe55.js";import{i as ae}from"./InputText-v4oYWxFI.js";import{T as ne}from"./Textarea-2uEfp-ul.js";import{I as oe,a as le}from"./InputTime-I--emg10.js";import{T as ie}from"./Table-sCHTkm6R.js";import{S as ue}from"./ShowForm-VFAmAa4M.js";import{P as de}from"./PrimaryButton2-EuaGbrzE.js";import{D as ce}from"./DangerButton-8GnEtunP.js";import{C as me}from"./Checkbox01-7mbR3o1K.js";import"./Select-2LcnBieZ.js";import"./Input-kd4mt6Nc.js";import"./Loader-rZq7vIO3.js";import"./Table-OMRAnh-d.js";import"./InputColor-d1VPOoHj.js";const he={data(){return{order:"asc",search:"",column:"id"}},methods:{getName(t){return w().getName(t)}}},_e={class:"grid grid-cols-8 border-b border-stroke dark:border-strokedark sm:grid-cols-8 overflow-x-auto media_header media_header2"},pe={class:"flex items-center justify-center p-2.5 xl:p-5"},fe={class:"font-medium text-black dark:text-white"},ge={class:"flex items-center justify-center p-2.5 xl:p-5"},ye={class:"font-medium text-black dark:text-white"},be={class:"flex items-center justify-center p-2.5 xl:p-5"},ke={class:"font-medium text-black dark:text-white"},xe={class:"flex items-center justify-center p-2.5 xl:p-5"},we={class:"font-medium text-black dark:text-white"},ve={class:"flex items-center justify-center p-2.5 xl:p-5"},Ne={class:"font-medium text-black dark:text-white"},Pe={class:"flex items-center justify-center p-2.5 xl:p-5"},Te={class:"font-medium text-black dark:text-white"},Ce={class:"flex items-center justify-center p-2.5 xl:p-5"},Se={class:"font-medium text-black dark:text-white"},Me={class:"flex items-center justify-center p-2.5 xl:p-5"},Ie={class:"font-medium text-black dark:text-white"};function De(t,n,u,d,a,s){return l(),i("div",_e,[e("div",pe,[e("p",fe,o(s.getName("fio")),1)]),e("div",ge,[e("p",ye,o(s.getName("phone")),1)]),e("div",be,[e("p",ke,o(s.getName("Doctor")),1)]),e("div",xe,[e("p",we,o(s.getName("TreatmentStarted_at")),1)]),e("div",ve,[e("p",Ne,o(s.getName("Reports")),1)]),e("div",Pe,[e("p",Te,o(s.getName("status")),1)]),e("div",Ce,[e("p",Se,o(s.getName("Payment_status")),1)]),e("div",Me,[e("p",Ie,o(s.getName("actions")),1)])])}const Le=v(he,[["render",De],["__scopeId","data-v-e5599a6f"]]),Ue={props:{number:{type:Number,default:0},active:{type:Boolean,default:!1},link:{type:String,default:0}}};function Ee(t,n,u,d,a,s){return l(),i("a",{class:f([u.active?"active":"","cursor-pointer"])},o(u.number),3)}const je=v(Ue,[["render",Ee]]),Oe={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},Be={class:"mb-2.5 block text-black dark:text-white"},Ve={key:0,class:"text-danger"};function Ae(t,n,u,d,a,s){return l(),i("div",{class:f(u.Couple?"mb-4.5":"w-full xl:w-1/2")},[e("label",Be,o(u.Label),1),e("select",{onInput:n[0]||(n[0]=g=>this.$emit("onSelect",g.target.value)),class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[A(t.$slots,"default")],32),u.isError?(l(),i("p",Ve,o(u.message),1)):m("",!0)],2)}const ze=v(Oe,[["render",Ae]]),Fe={setup(){const t=w();return{useConterStore:w,counterStore:t}},components:{Checkbox01:me,DangerButton:ce,PrimaryButton2:de,ShowForm:ue,Table:ie,Paginate:re,InputTime:oe,InputDateTime:le,Pagination01:se,CreateForm:te,Textarea:ne,ModalLayout:ee,Input:X,VueAwesomePaginate:z,InputDefault:$,PaginateBtn:je,TableHeader:Le,InputText:ae,Select:ze,isPayment:!1},props:{Treatments:{type:[Array,Object],default:[]},Header:{type:Boolean,default:!0}},data(){return{items:[],search:"",Loader:!1,column:"updated_at",userPayments:0,order:"asc",paginateCount:10,pagination:{},last_page:0,currentPage:1,password_1:".",password_2:"",isPasswordError:!1,ExitModal:!1,isPaymentModal:!1,Duration:0,service_id:"",PaymentType:"",Amount:"",isShowModal:!1,errorObj:[],UpdateId:0,crud:"",Employees:[],Employee_id:0,DateTime:"",TextData:"",Time:"0",Modal:0,Item:[],patient_id:0,status:1,categoryName:"",Model:[],doctor:[],Patient:[],paymentTypes:[],PatientId:"",debtUser:"doctor",debtData:"",debtText:"",patientPayments:[],discount_percent:0,discount_sum:0,discount_total_sum:0,RealPrice:0,discountError:!1,isPayment:!1}},methods:{router(){return F},async getEmployee(){const t=await T(null,1e3);this.Employees=t.data.employees},sumInput(t){this.discount_sum=t,this.RealPrice>0?this.discount_percent=100*t/this.RealPrice:this.discount_percent=0},percentInput(t){Number(t)>100?this.discount_percent=100:this.discount_percent=t,this.RealPrice>0?this.discount_sum=this.RealPrice*t/100:this.discount_sum=0},async treatementFinished(t){const n=await R(t);console.log(n),n.status?(_("success","Treatment is complete"),this.getItems()):_("error","Error!")},debtModal(t){this.Item=t,this.debtUser="doctor",this.Modal="debt",this.getDate(),this.UpdateId=t.id,this.isShowModal=!0},discountModal(t){this.Item=t,this.debtUser=t.type_of_discount!=15?"doctor":"polyclinic",this.Modal="discount",this.discount_sum=t.discount_sum,this.discount_percent=t.discount_percent,this.discount_total_sum=Number(t.user_payment),this.RealPrice=t.service_real_price,this.UpdateId=t.id,this.isShowModal=!0,console.log("Item",t)},istoryPaymentModal(t){this.Item=t,this.Modal="istory-payment",this.patientPayments=[],this.getPatientPayments(t.patient_id),this.UpdateId=t.id,this.isShowModal=!0},paymentNumberFormat(t){const n=document.querySelector(".format_input");["0","1","2","3","4","5","6","7","8","9"," ",""].includes(t.slice(t.length-1,t.length))==!0?(n.value=this.counterStore.formatNumber(t),this.Amount=Number(t.replace(/\s+/g,""))):n.value=this.counterStore.formatNumber(this.Amount),console.log("trih",this.Amount)},async getModal(){const t=await q(this.UpdateId);this.Model=t.data,this.doctor=t.data.doctor,this.Patient=t.data.patient},async sendDiscount(){if(this.discount_sum>this.discount_total_sum)return this.discountError=!0,console.log("error fkfr0",this.discount_sum),!0;let t={discount_sum:this.discount_sum,discount_percent:this.discount_percent,discount_total_sum:this.discount_total_sum,discounter:this.debtUser=="doctor"?16:15,treatment_id:this.Item.id};const n=await H(t);console.log("response:",n),n.status?(this.debtUser="",this.discount_sum=0,this.discount_total_sum=0,this.discount_percent=0,this.errorObj=[],this.isShowModal=!1,this.getItems(),_("success","Saved successfully !")):(this.errorObj=n.data,_("error","There is an error in the form"))},async saveOwed(){let t={patient_id:this.Item.patient_id,authorizing:this.debtUser,treatment_id:this.Item.id,return_at:this.debtData,description:this.debtText};const n=await K(t);console.log("Response:->",n),n.status?(this.debtUser="",this.debtData="",this.debtText="",this.isShowModal=!1,_("success","Saved successfully !")):(this.errorObj=n.data,_("error","There is an error in the form"))},async getPatientPayments(t){const n=await C(t);this.patientPayments=n.data.payments.items,console.log("Payment:",n.data.payments.items),this.Loader=!1},async getPayments(t){return(await Q(t)).data},async getPaymentTypes(){const t=await Y(1,1e3);this.paymentTypes=t.data.items},getDate(){const t=new Date,n=t.getFullYear(),u=("0"+(t.getMonth()+1)).slice(-2),d=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2);var g=`${n}-${u}-${d} ${a}:${s}`,b=`${n}-${u}-${d}`;this.DateTime=g,this.debtData=b},Show(t){this.Model=[],this.Model=t,this.Modal=0,this.UpdateId=t.id,this.isShowModal=!0},paymentModal(t){this.Modal=1,this.UpdateId=t.id,this.PatientId=t.patient_id,this.userPayments=t.user_payment,this.isShowModal=!0,this.Modal="payment"},onClickHandler(t){this.paginate=t,this.currentPage=t,this.getItems()},async getEmployees(){await T(null,1e3)},onModal(t){this.service_id=t,this.isPaymentModal=!0},getName(t){return w().getName(t)},openModal(){document.querySelector(".modal").classList.remove("hidden")},async getItems(){const t=await Z(this.currentPage,this.paginateCount);this.pagination=t.data.pagination,this.last_page=t.data.pagination.last_page,this.current_page=t.data.pagination.currentPage,this.items=t.data.items},async onPayment(){if(this.isPayment=!0,this.Modal=="debt")return this.saveOwed(),!0;if(this.Modal=="discount")return this.sendDiscount(),!0;if(this.userPayments<this.Amount)return this.isPayment=!1,_("error",this.getName("PaymentError")),!1;const t={patient_id:this.PatientId,payment_type_id:this.PaymentType,treatment_id:this.UpdateId,amount:this.Amount},n=await G(t);console.log("Response:",n),n.status?(this.PaymentType="",this.PatientId="",this.Amount="",this.isShowModal=!1,this.paymentTypes=[],this.isPayment=!1,this.getPaymentTypes(),this.getItems(),this.isPayment=!1,this.errorObj=[],_("success","The payment was made successfully")):(this.isPayment=!1,this.errorObj=n.data,_("error","There is an error in the form"))},async getModel(){(await C(this.$route.query.id)).status},async editPassword(t){this.password_1=t,t==this.password_2},async clickSearch(t,n){this.search=t,this.order=n;var u={search:this.search,order:this.order,column:this.column,paginate:this.paginateCount};const d=await J(u);console.log("respons",d),this.items=d.data.items},async onDelete(t){var n="ÐÑ ÑÐ²ÐµÑÐµÐ½Ñ, ÑÑÐ¾ ÑÐ¾ÑÐ¸ÑÐµ ÑÑÐ¾ ÑÐ´Ð°Ð»Ð¸ÑÑ?";confirm(n)&&(await patientDelete(t)).status==!0&&(_("success","Deleted successfully !"),this.getItems())},onCheck(t){return window.location.origin+"#/check?id="+t},hasKey(t){return this.errorObj.hasOwnProperty(t)},getStatus(t){if(t==7)return this.getName("New");if(t==8)return this.getName("DoctorFinished");if(t==9)return this.getName("Finished");if(t==10)return this.getName("Unpaint");if(t==11)return this.getName("NotFullPaint");if(t==12)return this.getName("Closed")},getClass(t){return t==10?"unmount":t==11||t==7?"fullUnmount":""},onSearch(t){this.order=t,this.clickSearch()},onPaginate(t){this.paginateCount=t,this.getItems()},hasPermission(t){return!!localStorage.getItem("permissions").split(",").includes(t)}},watch:{UpdateId:function(t,n){this.getModal()}},mounted(){this.getItems(),this.getEmployee(),this.getDate(),this.getPaymentTypes()}},Re={class:"col-span-12 xl:col-span-12"},qe={class:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1"},He={class:"mb-6 text-xl font-bold text-black dark:text-white"},Ke={class:"flex flex-col table_media_box"},Qe={key:0,class:"grid grid-cols-3 rounded-sm mb-2 sm:grid-cols-5 relative media_top_bar"},Ye={selected:"",value:"sort_order"},Ze=e("option",{value:"id"},"Id",-1),Ge={value:"start"},Je={value:"first_name"},We={value:"last_name"},Xe={value:"status"},$e={value:"created_at"},et={value:"updated_at"},tt={class:"ml-4 flex btn01"},st=["title"],rt=e("path",{fill:"currentColor",d:"M6 17.59L7.41 19L12 14.42L16.59 19L18 17.59l-6-6z"},null,-1),at=e("path",{fill:"currentColor",d:"m6 11l1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},null,-1),nt=[rt,at],ot=["title"],lt=e("path",{fill:"currentColor",d:"M18 6.41L16.59 5L12 9.58L7.41 5L6 6.41l6 6z"},null,-1),it=e("path",{fill:"currentColor",d:"m18 13l-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},null,-1),ut=[lt,it],dt={class:"ml-4"},ct=e("option",{value:"10"},"10",-1),mt=e("option",{value:"20"},"20",-1),ht=e("option",{value:"50"},"50",-1),_t=e("option",{value:"100"},"100",-1),pt=[ct,mt,ht,_t],ft={class:"grid tableBox grid-cols-8 border-b border-stroke dark:border-strokedark sm:grid-cols-8 databes_table"},gt={class:"flex items-center gap-3 p-2.5 xl:p-5"},yt={class:"font-medium text-black dark:text-white sm:block"},bt={class:"flex items-center justify-center p-2.5 xl:p-5"},kt={class:"font-medium text-black dark:text-white"},xt={class:"flex items-center justify-center p-2.5 xl:p-5"},wt={class:"font-medium text-black dark:text-white"},vt={class:"flex items-center justify-center p-2.5 xl:p-5"},Nt={class:"font-medium text-black dark:text-white"},Pt={class:"flex items-center justify-center p-2.5 xl:p-5"},Tt={style:{width:"95%"},class:"font-medium text-black dark:text-white"},Ct={class:"report_box"},St={class:"flex items-center justify-center p-2.5 xl:p-5"},Mt={class:"flex items-center justify-center p-2.5 xl:p-5"},It={class:"button-box0 items-center justify-center p-2.5 sm:flex xl:p-5"},Dt={class:"font-medium text-meta-5 btns",style:{position:"relative"}},Lt=["onClick"],Ut=["onClick"],Et=["onClick","title"],jt=["onClick","title"],Ot=["onClick","title"],Bt=["onClick"],Vt=["onClick"],At=["href"],zt={key:0,title:"Tolov cheki",class:"fa-regular fas fa-print setting-icon cursor-pointer"},Ft=["onClick"],Rt={key:7,class:"finish_loader_box"},qt=["onClick"],Ht=["onClick"],Kt={key:0,class:"table01"},Qt={key:1,class:"table01"},Yt={colspan:"3",style:{border:"none"}},Zt={style:{width:"100%",display:"flex","justify-content":"center"}},Gt={key:2},Jt=e("br",null,null,-1),Wt={class:"flex"},Xt=e("br",null,null,-1),$t={key:3},es=e("br",null,null,-1),ts={key:0,class:"text-danger"},ss=e("br",null,null,-1),rs={class:"flex"},as=e("br",null,null,-1),ns={key:4},os=e("option",{selected:""},"---",-1),ls=["value"];function is(t,n,u,d,a,s){const g=h("TableHeader"),b=h("loader-spinning"),I=h("vue-awesome-paginate"),D=h("Pagination01"),L=h("Paginate"),k=h("Checkbox01"),x=h("Input"),U=h("Textarea"),E=h("DangerButton"),j=h("Select"),O=h("ShowForm");return l(),i("div",Re,[e("div",qe,[e("h4",He,o(s.getName("DebtTreatments")),1),e("div",Ke,[u.Header?(l(),i("div",Qe,[e("div",null,[e("input",{type:"text",placeholder:"Search",onInput:n[0]||(n[0]=r=>s.clickSearch(r.target.value,a.order)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,32)]),e("div",null,[e("select",{placeholder:"Search",onInput:n[1]||(n[1]=r=>a.column=r.target.value),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},[e("option",Ye,o(s.getName("serial_number")),1),Ze,e("option",Ge,o(s.getName("TreatmentStarted_at")),1),e("option",Je,o(s.getName("name")),1),e("option",We,o(s.getName("last_name")),1),e("option",Xe,o(s.getName("New")),1),e("option",$e,o(s.getName("Created_at")),1),e("option",et,o(s.getName("Updated_at")),1)],32)]),e("div",tt,[(l(),i("svg",{onClick:n[2]||(n[2]=r=>s.clickSearch(a.search,"asc")),title:s.getName("growth"),class:f(a.order=="asc"?"active":""),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},nt,10,st)),(l(),i("svg",{onClick:n[3]||(n[3]=r=>s.clickSearch(a.search,"desc")),class:f(a.order=="desc"?"active":""),title:s.getName("decrease"),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},ut,10,ot))]),e("div",dt,[e("select",{placeholder:"Search",onInput:n[4]||(n[4]=r=>s.onPaginate(r.target.value)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},pt,32)])])):m("",!0),c(g),(l(!0),i(N,null,P(u.Treatments.length>0?u.Treatments:a.items,(r,B)=>(l(),i("div",ft,[e("div",gt,[e("p",yt,o(B+1)+". "+o(r.patient.first_name+" "+r.patient.last_name),1)]),e("div",bt,[e("p",kt,o(r.patient.phone),1)]),e("div",xt,[e("p",wt,o(r.doctor.name),1)]),e("div",vt,[e("p",Nt,o(r.start),1)]),e("div",Pt,[e("p",Tt,[e("ul",Ct,[e("li",null,o(s.getName("TreatmentPrice"))+": "+o(d.useConterStore().formatNumber(Number(r.service_real_price))),1),e("li",null,o(s.getName("PaymentsUser"))+": "+o(d.useConterStore().formatNumber(Number(r.payment_amount))),1),e("li",null,o(s.getName("AmountOwed"))+": "+o(d.useConterStore().formatNumber(Number(r.user_payment))),1)])])]),e("div",St,[e("p",{class:f(["font-medium text-black dark:text-white status-text",s.getClass(r.status)])},o(s.getStatus(r.status)),3)]),e("div",Mt,[e("p",{class:f(["font-medium dark:text-white status-text",s.getClass(r.payment_status)])},o(s.getStatus(r.payment_status)),3)]),e("div",It,[e("p",Dt,[e("i",{onClick:p=>s.Show(r),class:"fa-solid setting-icon fa-eye"},null,8,Lt),r.status==8&&r.payment_status!=12&&r.status!=17&&s.hasPermission("Treatments-update")?(l(),i("i",{key:0,titile:"Tahrirlash",onClick:p=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:r.patient_id,treatment_id:r.id}}),class:"fa-solid setting-icon fa-pen-to-square"},null,8,Ut)):m("",!0),r.status==7&&r.status!=17&&s.hasPermission("Treatments-treatment")?(l(),i("i",{key:1,onClick:p=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:r.patient_id,treatment_id:r.id}}),title:s.getName("Treatment"),class:"fa-regular setting-icon fa-calendar-plus cursor-pointer"},null,8,Et)):m("",!0),r.payment_status!=12&&r.status!=7&&r.status!=17&&s.hasPermission("Treatments-payOff")?(l(),i("i",{key:2,onClick:p=>(s.paymentModal(r),a.userPayments=r.user_payment),title:s.getName("Payments"),class:"fa-regular fas fa-donate setting-icon cursor-pointer"},null,8,jt)):m("",!0),r.payment_status==11||r.payment_status==12&&r.status!=17?(l(),i("i",{key:3,title:"Tolov tarixi",onClick:p=>(s.istoryPaymentModal(r),a.Loader=!0),class:"fa-solid fa-clock-rotate-left setting-icon cursor-pointer"},null,8,Ot)):m("",!0),r.payment_status!=12&&r.status!=9&&r.status!=7&&r.status!=17&&s.hasPermission("Treatments-giveDiscount")?(l(),i("i",{key:4,title:"Chegirma berish",onClick:p=>s.discountModal(r),class:"fa-regular fas fa-percent setting-icon cursor-pointer"},null,8,Bt)):m("",!0),r.payment_status!=12&&r.status!=9&&r.status!=7&&r.status!=17&&s.hasPermission("Treatments-debtEnforcement")?(l(),i("i",{key:5,title:"Qarzga bajarish",onClick:p=>s.debtModal(r),class:"fa-regular fas fa-coins setting-icon cursor-pointer"},null,8,Vt)):m("",!0),e("a",{target:"_blank",href:s.onCheck(r.id)},[r.payment_status!=10&&r.status!=17?(l(),i("i",zt)):m("",!0)],8,At),r.status!=9&&r.status!=7&&r.status!=17&&!t.finishLoader&&s.hasPermission("Treatments-treatment")?(l(),i("i",{key:6,title:"Tugatish",onClick:p=>s.treatementFinished(r.id),class:"fa-regular fas fa-square-check setting-icon cursor-pointer"},null,8,Ft)):m("",!0),t.finishLoader&&r.status!=9&&r.status!=7&&r.status!=17?(l(),i("div",Rt,[c(b,{class:"finishLoader",style:{margin:"0 auto"}})])):m("",!0),r.status==7&&s.hasPermission("Treatments-treatment")?(l(),i("i",{key:8,title:"Bekor qilish",onClick:p=>t.cancletedModal(r),class:"fa-solid fa-x setting-icon cursor-pointer text-danger"},null,8,qt)):m("",!0),r.status==17?(l(),i("i",{key:9,title:"Bekor qilish tasnifi",onClick:p=>t.onInfoModal(r),class:"fa-solid fa-circle-info setting-icon cursor-pointer"},null,8,Ht)):m("",!0)])])]))),256)),c(L,null,{default:y(()=>[c(D,null,{default:y(()=>[c(I,{"total-items":a.last_page,"items-per-page":1,"max-pages-shown":1,modelValue:a.currentPage,"onUpdate:modelValue":n[5]||(n[5]=r=>a.currentPage=r),"on-click":s.onClickHandler},null,8,["total-items","modelValue","on-click"])]),_:1})]),_:1})]),c(O,{isSubmit:this.Modal!="istory-payment",isButton:a.isPayment,onOnSubmit:n[16]||(n[16]=r=>a.Modal=="0"?a.isShowModal=!1:s.onPayment()),UpdateId:a.UpdateId,onCloseModal:n[17]||(n[17]=r=>(a.isShowModal=r,a.errorObj=[])),isShowModal:a.isShowModal},{default:y(()=>[a.Modal==0&&a.Model!=[]?(l(),i("table",Kt,[e("tr",null,[e("th",null,o(s.getName("name"))+": Â Â ",1),e("td",null,o(a.Patient.last_name),1)]),e("tr",null,[e("th",null,o(s.getName("last_name"))+": Â Â ",1),e("td",null,o(a.Patient.first_name),1)]),e("tr",null,[e("th",null,o(s.getName("Doctor"))+": Â Â ",1),e("td",null,o(a.doctor.name),1)]),e("tr",null,[e("th",null,o(s.getName("TreatmentStarted_at"))+": Â Â ",1),e("td",null,o(a.Model.start),1)]),e("tr",null,[e("th",null,o(s.getName("Finished_at"))+": Â Â ",1),e("td",null,o(a.Model.end),1)]),e("tr",null,[e("th",null,o(s.getName("PatientEndPayment"))+": Â Â ",1),e("td",null,o(a.Model.latest_payment!=null?a.Model.latest_payment.amount:"0 UZS"),1)]),e("tr",null,[e("th",null,o(s.getName("AmountOwedType"))+": Â Â ",1),e("td",null,o(a.Model.latest_payment!=null?a.Model.latest_payment.payment_type:"---"),1)]),e("tr",null,[e("th",null,o(s.getName("TreatmentPrice"))+": Â Â ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.service_real_price)))+" uzs",1)]),e("tr",null,[e("th",null,o(s.getName("PaymentsUser"))+": Â Â ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.payment_amount)))+" uzs",1)]),e("tr",null,[e("th",null,o(s.getName("AmountOwed"))+": Â Â ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.user_payment)))+" uzs",1)]),e("tr",null,[e("th",null,o(s.getName("Discount"))+": Â Â ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.discount_sum)))+" uzs",1)]),e("tr",null,[e("th",null,o(s.getName("Payment_status"))+": Â Â ",1),e("td",null,[e("p",{class:f(["font-medium dark:text-white status-text",s.getClass(a.Model.payment_status)])},o(s.getStatus(a.Model.payment_status)),3)])])])):m("",!0),a.Modal=="istory-payment"&&a.Model!=[]?(l(),i("table",Qt,[e("tr",null,[e("th",null,o(s.getName("Amount")),1),e("th",null,o(s.getName("Created_at")),1),e("th",null,o(s.getName("Type")),1)]),(l(!0),i(N,null,P(a.patientPayments,r=>(l(),i("tr",null,[e("td",null,o(r.amount),1),e("td",null,o(r.created_at),1),e("td",null,[e("p",{class:"font-medium dark:text-white status-text",style:W("background: "+r.color)},o(r.payment_type),5)])]))),256)),e("tr",null,[e("td",Yt,[e("div",Zt,[a.Loader?(l(),M(b,{key:0,style:{margin:"0 auto"}})):m("",!0)])])])])):a.Modal=="debt"?(l(),i("div",Gt,[e("h1",null,o(s.getName("DebitTitle")),1),Jt,e("div",Wt,[c(k,{onClick:n[6]||(n[6]=r=>a.debtUser="doctor"),onCheck:a.debtUser=="doctor",Title:s.getName("Doctor")},null,8,["onCheck","Title"]),S(" Â  Â  Â  Â  "),c(k,{onClick:n[7]||(n[7]=r=>a.debtUser="polyclinic"),onCheck:a.debtUser=="polyclinic",Title:s.getName("PolyClinic")},null,8,["onCheck","Title"])]),Xt,c(x,{Label:s.getName("DebitData"),onOnInput:n[8]||(n[8]=r=>a.debtData=r),isError:s.hasKey("debt_data"),message:a.errorObj.debt_data,Type:"date",Value:"2024-03-01"},null,8,["Label","isError","message"]),c(U,{Label:s.getName("Description"),onOnInput:n[9]||(n[9]=r=>a.debtText=r),isError:s.hasKey("debt_text"),message:a.errorObj.debt_text,Value:a.debtText},null,8,["Label","isError","message","Value"])])):a.Modal=="discount"?(l(),i("div",$t,[e("h1",null,o(s.getName("Summa"))+": "+o(d.counterStore.formatNumber(a.RealPrice))+" uzs",1),e("h1",null,o(s.getName("PaymentSum"))+": "+o(d.counterStore.formatNumber(a.discount_total_sum))+" uzs",1),es,c(x,{Label:s.getName("Discount")+" (%)",onOnInput:n[10]||(n[10]=r=>s.percentInput(r)),isError:s.hasKey("discount_percent"),message:a.errorObj.discount_percent,Value:a.discount_percent,Tyoe:"number"},null,8,["Label","isError","message","Value"]),c(x,{Label:s.getName("Discount")+" (sum)",onOnInput:n[11]||(n[11]=r=>s.sumInput(r)),isError:s.hasKey("discount_sum"),message:a.errorObj.discount_sum,Value:a.discount_sum,Tyoe:"number"},null,8,["Label","isError","message","Value"]),a.discountError?(l(),i("p",ts,o(s.getName("DiscountError")),1)):m("",!0),e("h1",null,o(s.getName("DebitTitle")),1),ss,e("div",rs,[c(k,{onClick:n[12]||(n[12]=r=>a.debtUser="doctor"),onCheck:a.debtUser=="doctor",Title:s.getName("Doctor")},null,8,["onCheck","Title"]),S(" Â  Â  Â  Â  "),c(k,{onClick:n[13]||(n[13]=r=>a.debtUser="polyclinic"),onCheck:a.debtUser=="polyclinic",Title:s.getName("PolyClinic")},null,8,["onCheck","Title"])]),as])):a.Modal=="payment"?(l(),i("div",ns,[c(E,{style:{"font-size":"20px"},isActive:a.userPayments<=0,Title:d.useConterStore().formatNumber(Number(a.userPayments))+" uzs"},null,8,["isActive","Title"]),c(x,{Pholder:"0",Class:"format_input",Label:s.getName("Amount"),onOnInput:n[14]||(n[14]=r=>s.paymentNumberFormat(r)),isError:s.hasKey("amount"),message:a.errorObj.amount,Value:d.counterStore.formatNumber(a.Amount)},null,8,["Label","isError","message","Value"]),c(j,{Label:s.getName("PaymentTypes"),isError:s.hasKey("payment_type_id"),message:a.errorObj.payment_type_id,onOnSelect:n[15]||(n[15]=r=>a.PaymentType=r)},{default:y(()=>[os,(l(!0),i(N,null,P(a.paymentTypes,r=>(l(),i("option",{value:r.id},o(r.name),9,ls))),256))]),_:1},8,["Label","isError","message"])])):m("",!0)]),_:1},8,["isSubmit","isButton","UpdateId","isShowModal"])])])}const us=v(Fe,[["render",is]]),Ds={__name:"index",setup(t){return(n,u)=>(l(),M(V,null,{default:y(()=>[c(us)]),_:1}))}};export{Ds as default};

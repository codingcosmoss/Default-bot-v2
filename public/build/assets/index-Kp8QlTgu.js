import{a as I,P as S}from"./Page-FAX3c1D0.js";import{_ as v,u as D,D as T,l as s,J as A,K as E,M as N,A as o,N as L,O as G,P as O,d as m,w as l,r as i,o as a,a as n,e as h,b as _,t as c,c as d,f as C,F as b,g as p}from"./app-vet2y67C.js";import{B as V}from"./BasicTable-V7p4lhVL.js";import{G as q,P as z}from"./GrowingLoader-WhvMV74Z.js";import{D as F}from"./DefaultInput-9R5fBSGy.js";const M={components:{DefaultInput:F,PrimaryBtn:I,GrowingLoader:q,PrimaryIconBtn:z,BasicTable:V,Page:S},setup(){return{counterStore:D()}},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],loader:!1}},methods:{async index(){try{this.loader=!0;const e=await T();this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async indexActives(){try{this.loader=!0;const e=await roleActives(this.paginateCount);this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async indexPaginates(){try{this.loader=!0;const e=await A(this.paginateCount);this.items=e.data.items,this.loader=!1}catch(e){s(this,e)}},async orderBys(){try{this.loader=!0;const e=await roleOrderBys(this.column,this.type);this.items=e.data,this.loader=!1}catch(e){s(this,e)}},async show(e){try{const t=await E(e);this.item=t.data}catch(t){s(this,t)}},async create(){try{const t=await N({});return t.status?(o("success",this.$t("create")),!0):(this.errors=t.errors,o("error",this.$t("formError")),!1)}catch(e){return s(this,e),!1}},async update(){try{const t=await L({});return t.status?(o("success",this.$t("update")),!0):(this.errors=t.errors,o("error",this.$t("formError")),!1)}catch(e){return s(this,e),!1}},async search(e=""){try{if(this.loader=!0,e=="")return this.indexPaginates(),!0;const t=await G(e);return this.items=t.data,this.loader=!1,t.status?(this.loader=!1,!0):(o("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return s(this,t),this.loader=!1,!1}},async delete(e){try{if(!confirm(this.$t("DeleteAlert")))return!1;const t=await O(e);return this.items=t.data,t.status&&(o("success",this.$t("delete")),this.indexPaginates()),o("error",this.$t("formError")),!1}catch(t){return s(this,t),!1}}},mounted(){this.indexPaginates()}},R={class:"row"},J={class:"role_user_block"},K={key:0,class:"badge badge-pill badge-soft-success font-size-12",style:{"margin-right":"4px"}},U=["onClick"];function j(e,t,H,$,f,y){const w=i("DefaultInput"),P=i("PrimaryBtn"),g=i("PrimaryIconBtn"),B=i("GrowingLoader"),k=i("BasicTable"),x=i("Page");return a(),m(x,{Title:""},{default:l(()=>[n("div",R,[h(k,{Modal:"userCreate",Th:[e.$t("Id"),e.$t("RoleName"),e.$t("Employees"),e.$t("CreatedAt"),e.$t("Settings")],Title:"All Roles",Col:"col-lg-12",onOnSearch:t[2]||(t[2]=r=>y.search(r))},{inputs:l(()=>[h(w,{Class:"col-lg-3 col-sm-2",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:t[0]||(t[0]=r=>y.search(r))})]),buttons:l(()=>[h(P,{onClick:t[1]||(t[1]=r=>this.$router.push("/admin/roles/create")),role:"button"},{default:l(()=>[_(c(e.$t("Create")),1)]),_:1})]),default:l(()=>[(a(!0),d(b,null,C(f.items,r=>(a(),d("tr",null,[n("td",null,"#"+c(r.id),1),n("td",null,c(r.name),1),n("td",null,[n("div",J,[r.users.length==0?(a(),d("span",K,"---")):p("",!0),r.users.length>0?(a(!0),d(b,{key:1},C(r.users,u=>(a(),d("span",{onClick:Q=>this.$router.push({path:"/admin/users/show",query:{id:u.id}}),class:"badge badge-pill cursor-pointer badge-soft-success font-size-12",style:{margin:"4px"}},c(u.name),9,U))),256)):p("",!0)])]),n("td",null,c($.counterStore.formatDate(r.created_at)),1),n("td",null,[h(g,{onClick:u=>this.$router.push({path:"/admin/roles/update",query:{id:r.id}}),Icon:"bx bx-edit-alt"},null,8,["onClick"]),_("Â  "),r.users.length==0?(a(),m(g,{key:0,onClick:u=>this.delete(r.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):p("",!0)])]))),256)),f.loader?(a(),m(B,{key:0,Cols:"5"})):p("",!0)]),_:1},8,["Th"])])]),_:1})}const te=v(M,[["render",j]]);export{te as default};

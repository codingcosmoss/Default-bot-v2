import{P as Q}from"./Page-oy7_sxtd.js";import{q as ee,s as I,v as te,x as se,y as ie,z as re,B as ae,C as T,D as oe,E as ne,_ as R,o as h,b,k as le,M as de,H as ce,u as ue,I as he,J as O,K as pe,N as me,c as $,w as _,r as C,e as s,d as w,F as E,g as S,a as u,t as m}from"./app-wtO1z4Rv.js";import{A as M}from"./apexcharts.common-eo18mC31.js";import{C as be}from"./CardBlock-m2-Ghyod.js";import{C as fe}from"./CardClassicBlock-2OLb_qJC.js";const j=["animationEnd","beforeMount","mounted","updated","click","mouseMove","mouseLeave","legendClick","markerClick","selection","dataPointSelection","dataPointMouseEnter","dataPointMouseLeave","beforeZoom","beforeResetZoom","zoomed","scrolled","brushScrolled"],B=ee({name:"apexchart",props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0},width:{default:"100%"},height:{default:"auto"}},emits:j,setup(e,{emit:r}){const o=I(null),a=I(null),t=i=>i&&typeof i=="object"&&!Array.isArray(i)&&i!=null,p=(i,n)=>{typeof Object.assign!="function"&&function(){Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");let k=Object(l);for(let y=1;y<arguments.length;y++){let D=arguments[y];if(D!=null)for(let z in D)D.hasOwnProperty(z)&&(k[z]=D[z])}return k}}();let v=Object.assign({},i);return t(i)&&t(n)&&Object.keys(n).forEach(l=>{t(n[l])?l in i?v[l]=p(i[l],n[l]):Object.assign(v,{[l]:n[l]}):Object.assign(v,{[l]:n[l]})}),v},c=async()=>{if(await ne(),a.value)return;const i={chart:{type:e.type||e.options.chart.type||"line",height:e.height,width:e.width,events:{}},series:e.series},n=e.options.chart.events;j.forEach(l=>{let k=(...y)=>r(l,...y);i.chart.events[l]=(...y)=>{k(...y),n&&n.hasOwnProperty(l)&&n[l](...y)}});const v=p(e.options,i);return a.value=new M(o.value,v),a.value.render()},g=()=>(f(),c()),f=()=>{a.value.destroy()},N=(i,n)=>a.value.updateSeries(i,n),x=(i,n,v,l)=>a.value.updateOptions(i,n,v,l),L=i=>a.value.toggleSeries(i),P=i=>{a.value.showSeries(i)},d=i=>{a.value.hideSeries(i)},q=(i,n)=>a.value.appendSeries(i,n),V=()=>{a.value.resetSeries()},F=(i,n)=>{a.value.toggleDataPointSelection(i,n)},U=i=>a.value.appendData(i),J=(i,n)=>a.value.zoomX(i,n),X=i=>a.value.dataURI(i),Y=i=>a.value.setLocale(i),G=(i,n)=>{a.value.addXaxisAnnotation(i,n)},W=(i,n)=>{a.value.addYaxisAnnotation(i,n)},Z=(i,n)=>{a.value.addPointAnnotation(i,n)},H=(i,n)=>{a.value.removeAnnotation(i,n)},K=()=>{a.value.clearAnnotations()};te(()=>{window.ApexCharts=M}),se(()=>{o.value=ie().proxy.$el,c()}),re(()=>{a.value&&f()});const A=ae(e);return T(A.options,()=>{!a.value&&e.options?c():a.value.updateOptions(e.options)}),T(A.series,()=>{!a.value&&e.series?c():a.value.updateSeries(e.series)},{deep:!0}),T(A.type,()=>{g()}),T(A.width,()=>{g()}),T(A.height,()=>{g()}),{chart:a,init:c,refresh:g,destroy:f,updateOptions:x,updateSeries:N,toggleSeries:L,showSeries:P,hideSeries:d,resetSeries:V,zoomX:J,toggleDataPointSelection:F,appendData:U,appendSeries:q,addXaxisAnnotation:G,addYaxisAnnotation:W,addPointAnnotation:Z,removeAnnotation:H,clearAnnotations:K,setLocale:Y,dataURI:X}},render(){return oe("div",{class:"vue-apexcharts"})}}),ve=e=>{e.component(B.name,B)};B.install=ve;const ye={},Ce={class:"col-sm-3"},ge=le('<div class="card"><div class="card-body"><div class="d-flex align-items-center mb-3"><div class="avatar-xs me-3"><span class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-18"><i class="bx bx-copy-alt placeholder"></i></span></div><h5 class="font-size-14 mb-0 placeholder">Mijozlarga sotilgan dorilar</h5></div><div class="text-muted mt-4"><h4 class="placeholder">1,452 </h4><div class="d-flex placeholder"><span class="badge badge-soft-success font-size-12"></span> <span class="ms-2 text-truncate">From previous period</span></div></div></div></div>',1),xe=[ge];function _e(e,r){return h(),b("div",Ce,xe)}const Se=R(ye,[["render",_e]]),Me={components:{ModalCentered:de,CardClassicBlockLoader:Se,apexchart:B,CardClassicBlock:fe,CardBlock:be,BaseBox:ce,Page:Q},setup(){return{counterStore:ue()}},data(){return{items:[],item:[],isChart0:!1,paginateCount:10,cardClassicLoader:!1,column:"id",type:"desc",errors:[],loader:!1,cardLoader:!1,sellings:[],purchases:[],registeredMedicines:0,expiredMedicines:[],importedMedicines:0,realMedicines:0,expiredMedicinesCount:0,medicinesSoldCustomers:[],medicinesSoldCustomersAmount:0,importedSubtotalMedicines:[],importedSubtotalMedicinesAmount:0,expenses:[],netProfit:[],totalNetProfit:[],isChart2:!1,bestSellerEmployees:[],bestSellerEmployeesAmount:[],chart2Data:{series:[{data:[]}],chartOptions:{chart:{type:"bar",height:380},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"end",horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]}}},chart0Data:{series:[{data:[]}],chartOptions:{chart:{type:"bar",height:380},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"end",horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]}}},realMedicineNumbers:[],realMedicineArr:[],outdatedDrugs:[],expiredDrugs:[],signsArr:[]}},methods:{chart0(){var e={chart:{height:380,width:"100%",type:"bar",animations:{initialAnimation:{enabled:!1}}},series:this.bestSellerEmployees,labels:this.bestSellerEmployeesAmount},r=new M(document.querySelector("#dashboardChart0"),e);r.render()},chart1(){this.signsArr.forEach(e=>{let r=this.sellings.filter(p=>p.currency==e),o=this.purchases.filter(p=>p.currency==e);r.forEach(p=>delete p.currency),o.forEach(p=>delete p.currency);let a={chart:{height:345,width:"100%",type:"area",zoom:!1,animations:{zoom:!1,initialAnimation:{enabled:!1}}},series:[{name:this.$t("Selling"),data:r},{name:this.$t("Purchase"),data:o}],xaxis:{type:"datetime"}};var t=new M(document.querySelector("#dashboardChart1"+e),a);t.render()})},chart3(){var e={chart:{height:380,width:"100%",type:"pie",animations:{initialAnimation:{enabled:!1}}},series:this.realMedicineNumbers,labels:this.realMedicineArr},r=new M(document.querySelector("#dashboardChart3"),e);r.render()},chart4(){var e={chart:{height:350,type:"line",zoom:{enabled:!1}},series:[{name:this.$t("Amount"),data:[10,41,35,51,49,62,69,91,148]}],dataLabels:{enabled:!1},stroke:{curve:"straight"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:0}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]}},r=new M(document.querySelector("#dashboardChart4"),e);r.render()},async quantityVerification(){try{this.loader=!0;const e=await he();this.loader=!1}catch(e){O(this,e)}},async dashboardCart1(){try{this.cardLoader=!0;const e=await pe();let r=e.data;if(e.status){r.bestSellerEmployees.forEach(t=>{this.bestSellerEmployees.push(t.name),this.bestSellerEmployeesAmount.push(t.total_amount)}),this.chart0Data.chartOptions.xaxis.categories=this.bestSellerEmployees,this.chart0Data.series[0].data=this.bestSellerEmployeesAmount,this.isChart0=!0,this.registeredMedicines=r.medicines_count,this.realMedicinesArr=r.realMedicinesCount,this.realMedicines=0,r.realMedicinesCount.forEach(t=>{this.realMedicines+=t.amount,t.amount>0?(this.realMedicineNumbers.push(t.amount),this.realMedicineArr.push(t.name)):(t.amount=0,this.outdatedDrugs.push(t))}),this.expiredMedicinesCount=0,r.expiredMedicines.forEach(t=>{this.expiredMedicinesCount+=t.amount,this.expiredDrugs.push(t)}),(this.outdatedDrugs.length>0||this.expiredDrugs.length)&&new bootstrap.Modal(document.getElementById("dashboardAlert")).show(),this.chart3(),r.importedMedicines.forEach(t=>{this.importedMedicines+=t.amount});let o=[],a=[];r.bestSellers.forEach(t=>{o.push(t.name),a.push(t.total_amount)}),this.chart2Data.chartOptions.xaxis.categories=o,this.chart2Data.series[0].data=a,this.isChart2=!0,this.expiredMedicines=r.expiredMedicines}this.cardLoader=!1}catch(e){O(this,e)}},async dashboardCart2(){try{this.cardClassicLoader=!0;const e=await me();let r=e.data;e.status&&(this.medicinesSoldCustomers=r.medicinesSoldCustomers,this.importedSubtotalMedicines=r.importedSubtotalMedicines,this.expenses=r.expenses,r.medicinesSoldCustomers.forEach(o=>{this.medicinesSoldCustomersAmount+=Number(o.total_amount)}),r.importedSubtotalMedicines.forEach(o=>{this.importedSubtotalMedicinesAmount+=Number(o.amount)}),r.sellings.forEach(o=>{this.signsArr.includes(o.title)||this.signsArr.push(o.title),this.sellings.push({x:o.date.split("-")[1]+"-"+o.date.split("-")[2]+"-"+o.date.split("-")[0]+" GMT",y:o.subtotal.toFixed(2),currency:o.title})}),r.purchases.forEach(o=>{this.signsArr.includes(o.title)||this.signsArr.push(o.title),this.purchases.push({x:o.date.split("-")[1]+"-"+o.date.split("-")[2]+"-"+o.date.split("-")[0]+" GMT",y:o.subtotal.toFixed(2),currency:o.title})}),this.medicinesSoldCustomers.forEach((o,a)=>{let t=0;r.importedSubtotalMedicines.forEach(c=>{c.currency_id==o.currency_id&&(t+=Number(c.total_cost))}),r.expenses.forEach(c=>{c.currency_id==o.currency_id&&(t+=Number(c.total_cost))});let p=0;o.total_cost-t>0&&(p=o.total_cost-t),this.totalNetProfit.push({total_cost:p,sign:o.sign})}),this.cardClassicLoader=!1),this.cardClassicLoader=!1,setTimeout(()=>{this.chart1()})}catch(e){O(this,e)}}},mounted(){this.dashboardCart1(),this.dashboardCart2(),this.quantityVerification()}},Ae={class:"row"},Te={class:"col-lg-3 cursor-pointer"},we=s("div",{class:"card mini-stats-wid"},[s("div",{class:"card-body"},[s("div",{class:"d-flex flex-wrap"},[s("div",{class:"me-3"},[s("p",{class:"mb-2 placeholder"},"Uzbekistani Uzbekistani"),s("br"),s("h5",{class:"mb-0 placeholder"},"201 000 сўм")]),s("div",{class:"avatar-sm ms-auto"},[s("div",{class:"avatar-title bg-light rounded-circle text-primary font-size-20"},[s("i",{class:"bx bx-money placeholder"})])])])])],-1),Ee=[we],Ne={key:0,class:"row"},ke={key:1,class:"row"},De={key:2,class:"row"},Be={class:"row"},Le={key:0,id:"dashboardChart0"},Pe=["id"],ze={key:0,id:"dashboardChart2"},Oe=s("div",{id:"dashboardChart3"},null,-1),Ie={class:"col-xl-12"},$e={class:"card"},je={class:"card-body p-0"},Re={class:"card-title text-center"},qe={class:"table-responsive"},Ve={class:"table mb-0"},Fe={class:"table-light"},Ue={class:"font-size-12 text-wrap"},Je={class:"col-xl-12"},Xe={class:"card"},Ye={class:"card-body p-0 text-center"},Ge={class:"card-title"},We={class:"table-responsive"},Ze={class:"table mb-0"},He={class:"table-light"};function Ke(e,r,o,a,t,p){const c=C("CardBlock"),g=C("CardClassicBlockLoader"),f=C("CardClassicBlock"),N=C("apexchart"),x=C("BaseBox"),L=C("ModalCentered"),P=C("Page");return h(),$(P,{Title:""},{default:_(()=>[s("div",Ae,[t.cardLoader?(h(),b(E,{key:0},w(4,d=>s("div",Te,Ee)),64)):S("",!0)]),t.cardLoader?S("",!0):(h(),b("div",Ne,[s("div",{class:"col-md-3 cursor-pointer",onClick:r[0]||(r[0]=d=>this.$router.push("/admin/medicines"))},[u(c,{Title:e.$t("RegisteredMedicines"),Number:a.counterStore.formatNumber(t.registeredMedicines),Icon:"bx bx-copy-alt font-size-24"},null,8,["Title","Number"])]),s("div",{class:"col-md-3 cursor-pointer",onClick:r[1]||(r[1]=d=>this.$router.push("/admin/expired-medicines"))},[u(c,{Title:e.$t("ExpiredMedicines"),Number:a.counterStore.formatNumber(t.expiredMedicinesCount),Icon:"bx bx-time font-size-24"},null,8,["Title","Number"])]),s("div",{class:"col-md-3 cursor-pointer",onClick:r[2]||(r[2]=d=>this.$router.push("/admin/import/medicines"))},[u(c,{Title:e.$t("ImportedDrugs"),Number:a.counterStore.formatNumber(t.importedMedicines),Icon:"bx bx-import font-size-24"},null,8,["Title","Number"])]),s("div",{class:"col-md-3 cursor-pointer",onClick:r[3]||(r[3]=d=>this.$router.push("/admin/medicines"))},[u(c,{Title:e.$t("WarehouseAvailableMedicines"),Number:a.counterStore.formatNumber(t.realMedicines),Icon:"bx bx-pie-chart-alt-2 font-size-24"},null,8,["Title","Number"])])])),t.cardClassicLoader?(h(),b("div",ke,[(h(),b(E,null,w(4,d=>u(g)),64))])):S("",!0),t.cardClassicLoader?S("",!0):(h(),b("div",De,[u(f,{Icon:"bx bx-export",Title:e.$t("TotalPaid"),Currencies:t.medicinesSoldCustomers,Share:t.medicinesSoldCustomersAmount,Text:e.$t("SubtotalAmount")+":"},null,8,["Title","Currencies","Share","Text"]),u(f,{Icon:"bx bx-import",Title:e.$t("ImportPaid"),Currencies:t.importedSubtotalMedicines,Share:t.importedSubtotalMedicinesAmount,Text:e.$t("SubtotalAmount")+":"},null,8,["Title","Currencies","Share","Text"]),u(f,{Icon:"bx bx-collection",Title:e.$t("TotalCosts"),Currencies:t.expenses,Share:"",Text:""},null,8,["Title","Currencies"]),u(f,{Icon:"bx bx-collection",Title:e.$t("TotalNetProfit"),Currencies:t.totalNetProfit,Share:"",Text:""},null,8,["Title","Currencies"])])),s("div",Be,[u(x,{Col:"col-xl-6",Title:e.$t("BestSellers")},{default:_(()=>[t.isChart0?(h(),b("div",Le,[u(N,{type:"bar",height:"345",options:t.chart0Data.chartOptions,series:t.chart0Data.series},null,8,["options","series"])])):S("",!0)]),_:1},8,["Title"]),(h(!0),b(E,null,w(t.signsArr,d=>(h(),$(x,{Col:"col-xl-6",Title:e.$t("SalesandPurchasestatistics")+" ("+d+")"},{default:_(()=>[s("div",{id:"dashboardChart1"+d},null,8,Pe)]),_:2},1032,["Title"]))),256)),u(x,{Title:e.$t("MostSoldMedicines")},{default:_(()=>[t.isChart2?(h(),b("div",ze,[u(N,{type:"bar",height:"345",options:t.chart2Data.chartOptions,series:t.chart2Data.series},null,8,["options","series"])])):S("",!0)]),_:1},8,["Title"]),u(x,{Title:e.$t("CurrentMedicinesAmount")},{default:_(()=>[Oe]),_:1},8,["Title"])]),u(L,{isSubmit:!1,ModalName:"dashboardAlert",Title:e.$t("Info")},{default:_(()=>[s("div",Ie,[s("div",$e,[s("div",je,[s("h4",Re,m(e.$t("ExpiredMedicines")),1),s("div",qe,[s("table",Ve,[s("thead",Fe,[s("tr",null,[s("th",null,m(e.$t("MedicineName")),1),s("th",null,m(e.$t("Collection")),1),s("th",null,m(e.$t("Amount")),1),s("th",null,m(e.$t("ExpirationDate")),1)])]),s("tbody",null,[(h(!0),b(E,null,w(t.expiredDrugs,d=>(h(),b("tr",null,[s("td",null,[s("p",Ue,m(d.medicine.name),1)]),s("td",null,m(d.name),1),s("td",null,m(d.amount),1),s("td",null,m(d.expiry_date_finished),1)]))),256))])])])])])]),s("div",Je,[s("div",Xe,[s("div",Ye,[s("h4",Ge,m(e.$t("WarehouseNotAmount")),1),s("div",We,[s("table",Ze,[s("thead",He,[s("tr",null,[s("th",null,m(e.$t("MedicineName")),1),s("th",null,m(e.$t("Amount")),1)])]),s("tbody",null,[(h(!0),b(E,null,w(t.outdatedDrugs,d=>(h(),b("tr",null,[s("td",null,m(d.name),1),s("td",null,m(d.amount),1)]))),256))])])])])])])]),_:1},8,["Title"])]),_:1})}const rt=R(Me,[["render",Ke]]);export{rt as default};

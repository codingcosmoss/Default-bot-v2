import{_ as v,u as w,o as l,c as i,a as e,t as o,n as f,k as V,h as c,N as A,O as z,a1 as M,ac as F,A as h,ad as R,ae as q,af as H,ag as K,a4 as T,ah as Q,ai as Y,aj as Z,ak as G,al as J,r as _,b as m,F as N,C as P,f as S,w as x,H as W,x as I}from"./app-wmakNrFD.js";import{I as X}from"./Input-sHi6_j3C.js";import{I as $}from"./InputDefault-Ik0lJLaM.js";import{M as ee}from"./Switch-cfRwjxIO.js";import te from"./CreateForm-fIWWO4D_.js";import{_ as se}from"./pagination-01.vue_vue_type_style_index_0_lang-Z69Tj-9G.js";import{P as re}from"./paginate-CoOZTaYR.js";import{i as ae}from"./InputText-6RZcbKqC.js";import{T as ne}from"./Textarea-gzzG5tJ2.js";import{I as oe,a as le}from"./InputTime-ugXbQN2E.js";import{T as ie}from"./Table-EiW3ZRf-.js";import{S as ue}from"./ShowForm-oN4ajyXb.js";import{P as de}from"./PrimaryButton2-VF5CKIB7.js";import{D as ce}from"./DangerButton-woQCp7QM.js";import{C as me}from"./Checkbox01-R3umV7Dp.js";const he={data(){return{order:"asc",search:"",column:"id"}},methods:{getName(t){return w().getName(t)}}},_e={class:"grid grid-cols-8 border-b border-stroke dark:border-strokedark sm:grid-cols-8 overflow-x-auto media_header media_header2"},pe={class:"flex items-center justify-center p-2.5 xl:p-5"},fe={class:"font-medium text-black dark:text-white"},ye={class:"flex items-center justify-center p-2.5 xl:p-5"},ge={class:"font-medium text-black dark:text-white"},be={class:"flex items-center justify-center p-2.5 xl:p-5"},ke={class:"font-medium text-black dark:text-white"},xe={class:"flex items-center justify-center p-2.5 xl:p-5"},we={class:"font-medium text-black dark:text-white"},ve={class:"flex items-center justify-center p-2.5 xl:p-5"},Ne={class:"font-medium text-black dark:text-white"},Pe={class:"flex items-center justify-center p-2.5 xl:p-5"},Ce={class:"font-medium text-black dark:text-white"},Me={class:"flex items-center justify-center p-2.5 xl:p-5"},Te={class:"font-medium text-black dark:text-white"},Se={class:"flex items-center justify-center p-2.5 xl:p-5"},Ie={class:"font-medium text-black dark:text-white"};function De(t,n,u,d,a,r){return l(),i("div",_e,[e("div",pe,[e("p",fe,o(r.getName("fio")),1)]),e("div",ye,[e("p",ge,o(r.getName("phone")),1)]),e("div",be,[e("p",ke,o(r.getName("Doctor")),1)]),e("div",xe,[e("p",we,o(r.getName("TreatmentStarted_at")),1)]),e("div",ve,[e("p",Ne,o(r.getName("Reports")),1)]),e("div",Pe,[e("p",Ce,o(r.getName("status")),1)]),e("div",Me,[e("p",Te,o(r.getName("Payment_status")),1)]),e("div",Se,[e("p",Ie,o(r.getName("actions")),1)])])}const Le=v(he,[["render",De],["__scopeId","data-v-7fee8209"]]),Ue={props:{number:{type:Number,default:0},active:{type:Boolean,default:!1},link:{type:String,default:0}}};function je(t,n,u,d,a,r){return l(),i("a",{class:f([u.active?"active":"","cursor-pointer"])},o(u.number),3)}const Ee=v(Ue,[["render",je]]),Oe={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""}}},Be={class:"mb-2.5 block text-black dark:text-white"},Ve={key:0,class:"text-danger"};function Ae(t,n,u,d,a,r){return l(),i("div",{class:f(u.Couple?"mb-4.5":"w-full xl:w-1/2")},[e("label",Be,o(u.Label),1),e("select",{onInput:n[0]||(n[0]=y=>this.$emit("onSelect",y.target.value)),class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[V(t.$slots,"default")],32),u.isError?(l(),i("p",Ve,o(u.message),1)):c("",!0)],2)}const ze=v(Oe,[["render",Ae]]),Fe={setup(){const t=w();return{useConterStore:w,counterStore:t}},components:{Checkbox01:me,DangerButton:ce,PrimaryButton2:de,ShowForm:ue,Table:ie,Paginate:re,InputTime:oe,InputDateTime:le,Pagination01:se,CreateForm:te,Textarea:ne,ModalLayout:ee,Input:X,VueAwesomePaginate:A,InputDefault:$,PaginateBtn:Ee,TableHeader:Le,InputText:ae,Select:ze},props:{Treatments:{type:[Array,Object],default:[]},isPaginate:{type:Boolean,default:!0},Header:{type:Boolean,default:!0}},data(){return{items:[],search:"",finishLoader:!1,Loader:!1,column:"updated_at",userPayments:0,order:"asc",paginateCount:10,pagination:{},last_page:0,currentPage:1,password_1:".",password_2:"",isPasswordError:!1,ExitModal:!1,isPaymentModal:!1,Duration:0,service_id:"",PaymentType:"",Amount:"",isShowModal:!1,errorObj:[],UpdateId:0,crud:"",Employees:[],Employee_id:0,DateTime:"",TextData:"",Time:"0",Modal:0,Item:[],patient_id:0,status:1,categoryName:"",Model:[],doctor:[],Patient:[],paymentTypes:[],PatientId:"",debtUser:"doctor",debtData:"",debtText:"",patientPayments:[],discount_percent:0,discount_sum:0,discount_total_sum:0,RealPrice:0,discountError:!1,isPayment:!1,cancletedText:""}},methods:{router(){return z},async getEmployee(){const t=await M(null,1e3);this.Employees=t.data.employees},async treatementCancleted(t){let n={treatment_id:this.Item.id,description:this.cancletedText};const u=await F(n);u.status?(h("success","Canceled !"),this.isShowModal=!1,this.getItems()):(this.errorObj=u.data,h("error","Error!")),this.isPayment=!1},cancletedModal(t){this.Item=t,this.Modal="cancleted",this.cancletedText="",this.UpdateId=t.id,this.isShowModal=!0},onInfoModal(t){this.Item=t,this.Modal="info",this.UpdateId=t.id,this.isShowModal=!0},sumInput(t){this.discount_sum=t,this.RealPrice>0?this.discount_percent=100*t/this.RealPrice:this.discount_percent=0},percentInput(t){Number(t)>100?this.discount_percent=100:this.discount_percent=t,this.RealPrice>0?this.discount_sum=this.RealPrice*t/100:this.discount_sum=0},async treatementFinished(t){this.finishLoader=!0;const n=await R(t);console.log(n),n.status?(this.$emit("onPayment",!0),this.finishLoader=!1,h("success","Treatment is complete"),this.getItems()):h("error","Error!"),this.finishLoader=!1},debtModal(t){this.Item=t,this.debtUser="doctor",this.Modal="debt",this.getDate(),this.UpdateId=t.id,this.isShowModal=!0},discountModal(t){this.Item=t,this.debtUser=t.type_of_discount!=15?"doctor":"polyclinic",this.Modal="discount",this.discount_sum=t.discount_sum,this.discount_percent=t.discount_percent,this.discount_total_sum=Number(t.user_payment),this.RealPrice=t.service_real_price,this.UpdateId=t.id,this.isShowModal=!0,console.log("Item",t)},istoryPaymentModal(t){this.Item=t,this.Modal="istory-payment",this.patientPayments=[],this.getPatientPayments(t.patient_id),this.UpdateId=t.id,this.isShowModal=!0},paymentNumberFormat(t){const n=document.querySelector(".format_input");["0","1","2","3","4","5","6","7","8","9"," ",""].includes(t.slice(t.length-1,t.length))==!0?(n.value=this.counterStore.formatNumber(t),this.Amount=Number(t.replace(/\s+/g,""))):n.value=this.counterStore.formatNumber(this.Amount),console.log("trih",this.Amount)},async getModal(){const t=await q(this.UpdateId);this.Model=t.data,this.doctor=t.data.doctor,this.Patient=t.data.patient},async sendDiscount(){if(this.discount_sum>this.discount_total_sum)return this.discountError=!0,console.log("error",this.discount_sum),!0;let t={discount_sum:this.discount_sum,discount_percent:this.discount_percent,discount_total_sum:this.discount_total_sum,discounter:this.debtUser=="doctor"?16:15,treatment_id:this.Item.id};const n=await H(t);console.log("response:",n),n.status?(this.debtUser="",this.discount_sum=0,this.discount_total_sum=0,this.discount_percent=0,this.errorObj=[],this.isShowModal=!1,this.getItems(),this.$emit("onPayment",!0),this.isPayment=!1,h("success","Saved successfully !")):(this.errorObj=n.data,h("error","There is an error in the form"))},async saveOwed(){let t={patient_id:this.Item.patient_id,authorizing:this.debtUser,treatment_id:this.Item.id,return_at:this.debtData,description:this.debtText};const n=await K(t);console.log("Response:->",n),n.status?(this.debtUser="",this.debtData="",this.debtText="",this.isShowModal=!1,this.$emit("onPayment",!0),this.isPayment=!1,h("success","Saved successfully !")):(this.errorObj=n.data,h("error","There is an error in the form"))},async getPatientPayments(t){const n=await T(t);this.patientPayments=n.data.payments.items,console.log("Payment:",n.data.payments.items),this.Loader=!1},async getPayments(t){return(await Q(t)).data},async getPaymentTypes(){const t=await Y(1,1e3);this.paymentTypes=t.data.items},getDate(){const t=new Date,n=t.getFullYear(),u=("0"+(t.getMonth()+1)).slice(-2),d=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),r=("0"+t.getMinutes()).slice(-2);var y=`${n}-${u}-${d} ${a}:${r}`,g=`${n}-${u}-${d}`;this.DateTime=y,this.debtData=g},Show(t){this.Model=[],this.Model=t,this.Modal=0,this.UpdateId=t.id,this.isShowModal=!0},paymentModal(t){this.Modal=1,this.UpdateId=t.id,this.PatientId=t.patient_id,this.userPayments=t.user_payment,this.isShowModal=!0,this.Modal="payment"},onClickHandler(t){this.paginate=t,this.currentPage=t,this.getItems()},async getEmployees(){await M(null,1e3)},onModal(t){this.service_id=t,this.isPaymentModal=!0},getName(t){return w().getName(t)},openModal(){document.querySelector(".modal").classList.remove("hidden")},async getItems(){const t=await Z(this.currentPage,this.paginateCount);this.pagination=t.data.pagination,this.last_page=t.data.pagination.last_page,this.current_page=t.data.pagination.currentPage,this.items=t.data.items},async onPayment(){if(this.isPayment=!0,this.Modal=="debt")return this.saveOwed(),!0;if(this.Modal=="discount")return this.sendDiscount(),!0;if(this.Modal=="cancleted")return this.treatementCancleted(),!0;if(this.Modal=="info")return this.isPayment=!1,this.isShowModal=!1,!0;if(this.userPayments<this.Amount)return this.isPayment=!1,h("error",this.getName("PaymentError")),!1;const t={patient_id:this.PatientId,payment_type_id:this.PaymentType,treatment_id:this.UpdateId,amount:this.Amount},n=await G(t);console.log("Response:",n),n.status?(this.PaymentType="",this.PatientId="",this.Amount="",this.isShowModal=!1,this.paymentTypes=[],this.getPaymentTypes(),this.getItems(),this.isPayment=!1,this.$emit("onPayment",!0),this.errorObj=[],h("success","The payment was made successfully")):(this.isPayment=!1,this.errorObj=n.data,h("error","There is an error in the form"))},async getModel(){(await T(this.$route.query.id)).status},async editPassword(t){this.password_1=t,t==this.password_2},async clickSearch(t,n){this.search=t,this.order=n;var u={search:this.search,order:this.order,column:this.column,paginate:this.paginateCount};const d=await J(u);this.items=d.data.items},async onDelete(t){var n="Вы уверены, что хотите это удалить?";confirm(n)&&(await patientDelete(t)).status==!0&&(h("success","Deleted successfully !"),this.getItems())},onCheck(t){return window.location.origin+"#/check?id="+t},hasKey(t){return this.errorObj.hasOwnProperty(t)},getStatus(t){if(t==7)return this.getName("New");if(t==8)return this.getName("DoctorFinished");if(t==9)return this.getName("Finished");if(t==10)return this.getName("Unpaint");if(t==11)return this.getName("NotFullPaint");if(t==12)return this.getName("Closed");if(t==17)return this.getName("Concleted")},getClass(t){return t==10?"unmount":t==11||t==7?"fullUnmount":t==17?"concleted":""},onSearch(t){this.order=t,this.clickSearch()},onPaginate(t){this.paginateCount=t,this.getItems()}},watch:{UpdateId:function(t,n){this.getModal()}},mounted(){this.getItems(),this.getEmployee(),this.getDate(),this.getPaymentTypes()}},Re={class:"col-span-12 xl:col-span-12"},qe={class:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1"},He={class:"mb-6 text-xl font-bold text-black dark:text-white"},Ke={class:"flex flex-col table_media_box"},Qe={key:0,class:"grid grid-cols-3 rounded-sm mb-2 sm:grid-cols-5 relative media_top_bar"},Ye={selected:"",value:"sort_order"},Ze=e("option",{value:"id"},"Id",-1),Ge={value:"start"},Je={value:"first_name"},We={value:"last_name"},Xe={value:"status"},$e={value:"created_at"},et={value:"updated_at"},tt={class:"ml-4 flex btn01"},st=["title"],rt=e("path",{fill:"currentColor",d:"M6 17.59L7.41 19L12 14.42L16.59 19L18 17.59l-6-6z"},null,-1),at=e("path",{fill:"currentColor",d:"m6 11l1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},null,-1),nt=[rt,at],ot=["title"],lt=e("path",{fill:"currentColor",d:"M18 6.41L16.59 5L12 9.58L7.41 5L6 6.41l6 6z"},null,-1),it=e("path",{fill:"currentColor",d:"m18 13l-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},null,-1),ut=[lt,it],dt={class:"ml-4"},ct=e("option",{value:"10"},"10",-1),mt=e("option",{value:"20"},"20",-1),ht=e("option",{value:"50"},"50",-1),_t=e("option",{value:"100"},"100",-1),pt=[ct,mt,ht,_t],ft={class:"grid tableBox grid-cols-8 border-b border-stroke dark:border-strokedark sm:grid-cols-8 databes_table"},yt={class:"flex items-center gap-3 p-2.5 xl:p-5"},gt={class:"font-medium text-black dark:text-white sm:block"},bt={class:"flex items-center justify-center p-2.5 xl:p-5"},kt={class:"font-medium text-black dark:text-white"},xt={class:"flex items-center justify-center p-2.5 xl:p-5"},wt={class:"font-medium text-black dark:text-white"},vt={class:"flex items-center justify-center p-2.5 xl:p-5"},Nt={class:"font-medium text-black dark:text-white"},Pt={class:"flex items-center justify-center p-2.5 xl:p-5"},Ct={style:{width:"95%"},class:"font-medium text-black dark:text-white"},Mt={class:"report_box"},Tt={class:"flex items-center justify-center p-2.5 xl:p-5"},St={class:"flex items-center justify-center p-2.5 xl:p-5"},It={class:"button-box0 items-center justify-center p-2.5 sm:flex xl:p-5"},Dt={class:"font-medium text-meta-5 btns",style:{position:"relative"}},Lt=["onClick"],Ut=["onClick"],jt=["onClick","title"],Et=["onClick","title"],Ot=["onClick","title"],Bt=["onClick"],Vt=["onClick"],At=["href"],zt={key:0,title:"Tolov cheki",class:"fa-regular fas fa-print setting-icon cursor-pointer"},Ft=["onClick"],Rt={key:7,class:"finish_loader_box"},qt=["onClick"],Ht=["onClick"],Kt={key:0,class:"table01"},Qt={key:1,class:"table01"},Yt={colspan:"3",style:{border:"none"}},Zt={style:{width:"100%",display:"flex","justify-content":"center"}},Gt={key:2},Jt=e("br",null,null,-1),Wt={class:"flex"},Xt=e("br",null,null,-1),$t={key:3},es={key:4},ts=e("br",null,null,-1),ss={key:0,class:"text-danger"},rs=e("br",null,null,-1),as={class:"flex"},ns=e("br",null,null,-1),os={key:5},ls=e("option",{selected:""},"---",-1),is=["value"],us={key:6},ds={class:"table01"};function cs(t,n,u,d,a,r){const y=_("TableHeader"),g=_("loader-spinning"),D=_("vue-awesome-paginate"),L=_("Pagination01"),U=_("Paginate"),b=_("Checkbox01"),k=_("Input"),C=_("Textarea"),j=_("DangerButton"),E=_("Select"),O=_("ShowForm");return l(),i("div",Re,[e("div",qe,[e("h4",He,o(r.getName("Treatmetns")),1),e("div",Ke,[u.Header?(l(),i("div",Qe,[e("div",null,[e("input",{type:"text",placeholder:"Search",onInput:n[0]||(n[0]=s=>r.clickSearch(s.target.value,a.order)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,32)]),e("div",null,[e("select",{placeholder:"Search",onInput:n[1]||(n[1]=s=>a.column=s.target.value),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},[e("option",Ye,o(r.getName("serial_number")),1),Ze,e("option",Ge,o(r.getName("TreatmentStarted_at")),1),e("option",Je,o(r.getName("name")),1),e("option",We,o(r.getName("last_name")),1),e("option",Xe,o(r.getName("New")),1),e("option",$e,o(r.getName("Created_at")),1),e("option",et,o(r.getName("Updated_at")),1)],32)]),e("div",tt,[(l(),i("svg",{onClick:n[2]||(n[2]=s=>r.clickSearch(a.search,"asc")),title:r.getName("growth"),class:f(a.order=="asc"?"active":""),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},nt,10,st)),(l(),i("svg",{onClick:n[3]||(n[3]=s=>r.clickSearch(a.search,"desc")),class:f(a.order=="desc"?"active":""),title:r.getName("decrease"),xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},ut,10,ot))]),e("div",dt,[e("select",{placeholder:"Search",onInput:n[4]||(n[4]=s=>r.onPaginate(s.target.value)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},pt,32)])])):c("",!0),m(y),(l(!0),i(N,null,P(u.Treatments.length>0?u.Treatments:a.items,(s,B)=>(l(),i("div",ft,[e("div",yt,[e("p",gt,o(B+1)+". "+o(s.patient.first_name+" "+s.patient.last_name),1)]),e("div",bt,[e("p",kt,o(s.patient.phone),1)]),e("div",xt,[e("p",wt,o(s.doctor.name),1)]),e("div",vt,[e("p",Nt,o(s.start),1)]),e("div",Pt,[e("p",Ct,[e("ul",Mt,[e("li",null,o(r.getName("TreatmentPrice"))+": "+o(d.useConterStore().formatNumber(Number(s.service_real_price))),1),e("li",null,o(r.getName("PaymentsUser"))+": "+o(d.useConterStore().formatNumber(Number(s.payment_amount))),1),e("li",null,o(r.getName("AmountOwed"))+": "+o(d.useConterStore().formatNumber(Number(s.user_payment))),1)])])]),e("div",Tt,[e("p",{class:f(["font-medium text-black dark:text-white status-text",r.getClass(s.status)])},o(r.getStatus(s.status)),3)]),e("div",St,[e("p",{class:f(["font-medium dark:text-white status-text",r.getClass(s.payment_status)])},o(r.getStatus(s.payment_status)),3)]),e("div",It,[e("p",Dt,[e("i",{onClick:p=>r.Show(s),class:"fa-solid setting-icon fa-eye"},null,8,Lt),s.status==8&&s.payment_status!=12&&s.status!=17?(l(),i("i",{key:0,titile:"Tahrirlash",onClick:p=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:s.patient_id,treatment_id:s.id}}),class:"fa-solid setting-icon fa-pen-to-square"},null,8,Ut)):c("",!0),s.status==7&&s.status!=17?(l(),i("i",{key:1,onClick:p=>this.$router.push({path:"/treatmetns/treatmetn",query:{id:s.patient_id,treatment_id:s.id}}),title:r.getName("Treatment"),class:"fa-regular setting-icon fa-calendar-plus cursor-pointer"},null,8,jt)):c("",!0),s.payment_status!=12&&s.status!=7&&s.status!=17?(l(),i("i",{key:2,onClick:p=>(r.paymentModal(s),a.userPayments=s.user_payment),title:r.getName("Payments"),class:"fa-regular fas fa-donate setting-icon cursor-pointer"},null,8,Et)):c("",!0),s.payment_status==11||s.payment_status==12&&s.status!=17?(l(),i("i",{key:3,title:"Tolov tarixi",onClick:p=>(r.istoryPaymentModal(s),a.Loader=!0),class:"fa-solid fa-clock-rotate-left setting-icon cursor-pointer"},null,8,Ot)):c("",!0),s.payment_status!=12&&s.status!=9&&s.status!=7&&s.status!=17?(l(),i("i",{key:4,title:"Chegirma berish",onClick:p=>r.discountModal(s),class:"fa-regular fas fa-percent setting-icon cursor-pointer"},null,8,Bt)):c("",!0),s.payment_status!=12&&s.status!=9&&s.status!=7&&s.status!=17?(l(),i("i",{key:5,title:"Qarzga bajarish",onClick:p=>r.debtModal(s),class:"fa-regular fas fa-coins setting-icon cursor-pointer"},null,8,Vt)):c("",!0),e("a",{target:"_blank",href:r.onCheck(s.id)},[s.payment_status!=10&&s.status!=17?(l(),i("i",zt)):c("",!0)],8,At),s.status!=9&&s.status!=7&&s.status!=17&&!a.finishLoader?(l(),i("i",{key:6,title:"Tugatish",onClick:p=>r.treatementFinished(s.id),class:"fa-regular fas fa-square-check setting-icon cursor-pointer"},null,8,Ft)):c("",!0),a.finishLoader&&s.status!=9&&s.status!=7&&s.status!=17?(l(),i("div",Rt,[m(g,{class:"finishLoader",style:{margin:"0 auto"}})])):c("",!0),s.status==7?(l(),i("i",{key:8,title:"Bekor qilish",onClick:p=>r.cancletedModal(s),class:"fa-solid fa-x setting-icon cursor-pointer text-danger"},null,8,qt)):c("",!0),s.status==17?(l(),i("i",{key:9,title:"Bekor qilish tasnifi",onClick:p=>r.onInfoModal(s),class:"fa-solid fa-circle-info setting-icon cursor-pointer"},null,8,Ht)):c("",!0)])])]))),256)),u.isPaginate?(l(),S(U,{key:1},{default:x(()=>[m(L,null,{default:x(()=>[m(D,{"total-items":a.last_page,"items-per-page":1,"max-pages-shown":1,modelValue:a.currentPage,"onUpdate:modelValue":n[5]||(n[5]=s=>a.currentPage=s),"on-click":r.onClickHandler},null,8,["total-items","modelValue","on-click"])]),_:1})]),_:1})):c("",!0)]),m(O,{isSubmit:this.Modal!="istory-payment",isButton:a.isPayment,onOnSubmit:n[17]||(n[17]=s=>a.Modal=="0"?a.isShowModal=!1:r.onPayment()),UpdateId:a.UpdateId,onCloseModal:n[18]||(n[18]=s=>(a.isShowModal=s,a.errorObj=[])),isShowModal:a.isShowModal},{default:x(()=>[a.Modal==0&&a.Model!=[]?(l(),i("table",Kt,[e("tr",null,[e("th",null,o(r.getName("name"))+":   ",1),e("td",null,o(a.Patient.last_name),1)]),e("tr",null,[e("th",null,o(r.getName("last_name"))+":   ",1),e("td",null,o(a.Patient.first_name),1)]),e("tr",null,[e("th",null,o(r.getName("Doctor"))+":   ",1),e("td",null,o(a.doctor.name),1)]),e("tr",null,[e("th",null,o(r.getName("TreatmentStarted_at"))+":   ",1),e("td",null,o(a.Model.start),1)]),e("tr",null,[e("th",null,o(r.getName("Finished_at"))+":   ",1),e("td",null,o(a.Model.end),1)]),e("tr",null,[e("th",null,o(r.getName("PatientEndPayment"))+":   ",1),e("td",null,o(a.Model.latest_payment!=null?a.Model.latest_payment.amount:"0 UZS"),1)]),e("tr",null,[e("th",null,o(r.getName("AmountOwedType"))+":   ",1),e("td",null,o(a.Model.latest_payment!=null?a.Model.latest_payment.payment_type:"---"),1)]),e("tr",null,[e("th",null,o(r.getName("TreatmentPrice"))+":   ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.service_real_price)))+" uzs",1)]),e("tr",null,[e("th",null,o(r.getName("PaymentsUser"))+":   ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.payment_amount)))+" uzs",1)]),e("tr",null,[e("th",null,o(r.getName("AmountOwed"))+":   ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.user_payment)))+" uzs",1)]),e("tr",null,[e("th",null,o(r.getName("Discount"))+":   ",1),e("td",null,o(d.useConterStore().formatNumber(Number(a.Model.discount_sum)))+" uzs",1)]),e("tr",null,[e("th",null,o(r.getName("Payment_status"))+":   ",1),e("td",null,[e("p",{class:f(["font-medium dark:text-white status-text",r.getClass(a.Model.payment_status)])},o(r.getStatus(a.Model.payment_status)),3)])])])):c("",!0),a.Modal=="istory-payment"&&a.Model!=[]?(l(),i("table",Qt,[e("tr",null,[e("th",null,o(r.getName("Amount")),1),e("th",null,o(r.getName("Created_at")),1),e("th",null,o(r.getName("Type")),1)]),(l(!0),i(N,null,P(a.patientPayments,s=>(l(),i("tr",null,[e("td",null,o(s.amount),1),e("td",null,o(s.created_at),1),e("td",null,[e("p",{class:"dark:text-white status-text",style:W("background: "+s.color)},o(s.payment_type),5)])]))),256)),e("tr",null,[e("td",Yt,[e("div",Zt,[a.Loader?(l(),S(g,{key:0,style:{margin:"0 auto"}})):c("",!0)])])])])):a.Modal=="debt"?(l(),i("div",Gt,[e("h1",null,o(r.getName("DebitTitle")),1),Jt,e("div",Wt,[m(b,{onClick:n[6]||(n[6]=s=>a.debtUser="doctor"),onCheck:a.debtUser=="doctor",Title:r.getName("Doctor")},null,8,["onCheck","Title"]),I("         "),m(b,{onClick:n[7]||(n[7]=s=>a.debtUser="polyclinic"),onCheck:a.debtUser=="polyclinic",Title:r.getName("PolyClinic")},null,8,["onCheck","Title"])]),Xt,m(k,{Label:r.getName("DebitData"),onOnInput:n[8]||(n[8]=s=>a.debtData=s),isError:r.hasKey("debt_data"),message:a.errorObj.debt_data,Type:"date",Value:"2024-03-01"},null,8,["Label","isError","message"]),m(C,{Label:r.getName("Description"),onOnInput:n[9]||(n[9]=s=>a.debtText=s),isError:r.hasKey("debt_text"),message:a.errorObj.debt_text,Value:a.debtText},null,8,["Label","isError","message","Value"])])):a.Modal=="cancleted"?(l(),i("div",$t,[m(C,{Label:r.getName("CancletedText"),onOnInput:n[10]||(n[10]=s=>a.cancletedText=s),isError:r.hasKey("description"),message:a.errorObj.description,Value:a.cancletedText},null,8,["Label","isError","message","Value"])])):a.Modal=="discount"?(l(),i("div",es,[e("h1",null,o(r.getName("Summa"))+": "+o(d.counterStore.formatNumber(a.RealPrice))+" uzs",1),e("h1",null,o(r.getName("PaymentSum"))+": "+o(d.counterStore.formatNumber(a.discount_total_sum))+" uzs",1),ts,m(k,{Label:r.getName("Discount")+" (%)",onOnInput:n[11]||(n[11]=s=>r.percentInput(s)),isError:r.hasKey("discount_percent"),message:a.errorObj.discount_percent,Value:a.discount_percent,Tyoe:"number"},null,8,["Label","isError","message","Value"]),m(k,{Label:r.getName("Discount")+" (sum)",onOnInput:n[12]||(n[12]=s=>r.sumInput(s)),isError:r.hasKey("discount_sum"),message:a.errorObj.discount_sum,Value:a.discount_sum,Tyoe:"number"},null,8,["Label","isError","message","Value"]),a.discountError?(l(),i("p",ss,o(r.getName("DiscountError")),1)):c("",!0),e("h1",null,o(r.getName("DebitTitle")),1),rs,e("div",as,[m(b,{onClick:n[13]||(n[13]=s=>a.debtUser="doctor"),onCheck:a.debtUser=="doctor",Title:r.getName("Doctor")},null,8,["onCheck","Title"]),I("         "),m(b,{onClick:n[14]||(n[14]=s=>a.debtUser="polyclinic"),onCheck:a.debtUser=="polyclinic",Title:r.getName("PolyClinic")},null,8,["onCheck","Title"])]),ns])):a.Modal=="payment"?(l(),i("div",os,[m(j,{style:{"font-size":"20px"},isActive:a.userPayments<=0,Title:d.useConterStore().formatNumber(Number(Math.abs(a.userPayments)))+" uzs"},null,8,["isActive","Title"]),m(k,{Pholder:"0",Class:"format_input",Label:r.getName("Amount"),onOnInput:n[15]||(n[15]=s=>r.paymentNumberFormat(s)),isError:r.hasKey("amount"),message:a.errorObj.amount,Value:d.counterStore.formatNumber(a.Amount)},null,8,["Label","isError","message","Value"]),m(E,{Label:r.getName("PaymentTypes"),isError:r.hasKey("payment_type_id"),message:a.errorObj.payment_type_id,onOnSelect:n[16]||(n[16]=s=>a.PaymentType=s)},{default:x(()=>[ls,(l(!0),i(N,null,P(a.paymentTypes,s=>(l(),i("option",{value:s.id},o(s.name),9,is))),256))]),_:1},8,["Label","isError","message"])])):a.Modal=="info"?(l(),i("div",us,[e("table",ds,[e("tr",null,[e("th",null,o(r.getName("Description"))+":",1),e("td",null,o(a.Item.cancleted_description),1)])])])):c("",!0)]),_:1},8,["isSubmit","isButton","UpdateId","isShowModal"])])])}const Ms=v(Fe,[["render",cs]]);export{Ms as T};

import{a as w,b as N,P as B}from"./Page-WY9jM6QH.js";import{_ as D,M as x,u as F,ci as L,J as _,cj as k,cf as A,A as G,c,w as u,r as p,o as i,e as s,a as g,t as r,i as S,b as d,d as I,F as v,g as h}from"./app-NOWLkVVR.js";import{B as M}from"./BasicTable-BPH9PCc1.js";import{G as E}from"./GrowingLoader-naN9lJFn.js";import{P as V}from"./PrimaryIconBtn-iSQma8Yq.js";import{D as $}from"./DefaultInput-3ATS3cy3.js";import{P as O}from"./Paginate-Y51O1NaA.js";import{D as R}from"./DefaultSelect-M0WKtz1z.js";import{A as j}from"./apexcharts.common-Nl0D2Tct.js";const q={components:{DefaultSelect:R,Paginate:O,DefaultInput:$,PrimaryBtn:w,ModalCentered:x,PrimaryIconBtn:V,PrimaryButton:N,GrowingLoader:E,BasicTable:M,Page:B},setup(){return{counterStore:F()}},data(){return{items:[],item:[],boxItem:[],selling_current_page:1,selling_last_page:1,paginateCount:10,last_page:1,current_page:1,boxLast_page:1,boxCurrent_page:1,column:"id",type:"desc",errors:[],loader:!1,boxLoader:!1,boxItems:[],sellingItems:[],purchasesItems:[],sellings:[],purchases:[]}},methods:{renderChart(){var t={chart:{height:380,width:"100%",type:"area",animations:{initialAnimation:{enabled:!1}}},series:[{name:this.$t("Selling"),data:this.sellings},{name:this.$t("Purchase"),data:this.purchases}],xaxis:{type:"datetime"}},e=new j(document.querySelector("#sellingPurchase"),t);e.render()},async getSellings(t=1,e=!0){try{this.loader=e;const n=await L(this.paginateCount,t);n.status&&(this.selling_current_page=n.data.pagination.current_page,this.selling_last_page=n.data.pagination.last_page,this.sellingItems=n.data.items.data,this.sellingItems.forEach(o=>{this.sellings.push({x:o.date.split("-")[1]+"-"+o.date.split("-")[2]+"-"+o.date.split("-")[0]+" GMT",y:o.total_subtotal.toFixed(2)})}),e&&this.getPurchases()),this.loader=!1}catch(n){_(this,n)}},async getPurchases(t=1,e=!0){try{this.loader=e;const n=await k(this.paginateCount,t);n.status&&(this.current_page=n.data.pagination.current_page,this.last_page=n.data.pagination.last_page,this.purchasesItems=n.data.items.data,this.purchasesItems.forEach(o=>{this.purchases.push({x:o.date.split("-")[1]+"-"+o.date.split("-")[2]+"-"+o.date.split("-")[0]+" GMT",y:o.total_subtotal.toFixed(2)})})),this.loader=!1}catch(n){_(this,n)}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await A(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(G("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return _(this,e),this.loader=!1,!1}}},mounted(){this.getSellings()}},J=s("div",{id:"sellingPurchase"},null,-1),z={class:"row"},H={value:"10",selected:""},K=s("option",{value:"10"},"10",-1),Q=s("option",{value:"20"},"20",-1),U=s("option",{value:"50"},"50",-1),W=s("option",{value:"100"},"100",-1),X={value:"10",selected:""},Y=s("option",{value:"10"},"10",-1),Z=s("option",{value:"20"},"20",-1),tt=s("option",{value:"50"},"50",-1),et=s("option",{value:"100"},"100",-1);function st(t,e,n,o,l,f){const P=p("DefaultSelect"),b=p("Paginate"),y=p("GrowingLoader"),C=p("BasicTable"),T=p("Page");return i(),c(T,{Title:""},{default:u(()=>[J,s("div",z,[g(C,{Th:[t.$t("No"),t.$t("Date"),t.$t("Amount"),t.$t("Subtotal"),t.$t("Indebtedness")],Title:t.$t("ReportSaleMedicines"),Col:"col-lg-6"},{inputs:u(()=>[g(P,{Label:"",Class:"col-lg-4 col-sm-4",onOnInput:e[0]||(e[0]=a=>(this.paginateCount=a,this.indexPaginates()))},{default:u(()=>[s("option",H,r(t.$t("NumberDownloads")),1),K,Q,U,W]),_:1}),S("   ")]),default:u(()=>[(i(!0),d(v,null,I(l.sellingItems,(a,m)=>(i(),d("tr",null,[s("td",null,r((l.selling_current_page-1)*l.paginateCount+m+1),1),s("td",null,r(a.date),1),s("td",null,r(o.counterStore.formatNumber(a.total_amount)),1),s("td",null,r(o.counterStore.formatNumber(a.total_subtotal.toFixed(2)))+" "+r(a.currency.sign),1),s("td",null,r(o.counterStore.formatNumber(a.must_paid.toFixed(2)))+" "+r(a.currency.sign),1)]))),256)),l.selling_last_page!=1?(i(),c(b,{key:0,Cols:"7",currentPage:this.selling_current_page,totalPages:this.selling_last_page,onChangePage:e[1]||(e[1]=a=>f.getSellings(a,!1))},null,8,["currentPage","totalPages"])):h("",!0),l.loader?(i(),c(y,{key:1,Cols:"7"})):h("",!0)]),_:1},8,["Th","Title"]),g(C,{Th:[t.$t("No"),t.$t("Date"),t.$t("Subtotal"),t.$t("Indebtedness")],Title:t.$t("ReportPurchasesMedicines"),Col:"col-lg-6"},{inputs:u(()=>[g(P,{Label:"",Class:"col-lg-4 col-sm-4",onOnInput:e[2]||(e[2]=a=>(this.paginateCount=a,this.getPurchases()))},{default:u(()=>[s("option",X,r(t.$t("NumberDownloads")),1),Y,Z,tt,et]),_:1}),S("   ")]),default:u(()=>[(i(!0),d(v,null,I(l.purchasesItems,(a,m)=>(i(),d("tr",null,[s("td",null,r((l.current_page-1)*l.paginateCount+m+1),1),s("td",null,r(a.date),1),s("td",null,r(o.counterStore.formatNumber(a.total_subtotal.toFixed(2)))+" "+r(a.currency.sign),1),s("td",null,r(o.counterStore.formatNumber(a.must_paid.toFixed(2)))+" "+r(a.currency.sign),1)]))),256)),l.last_page!=1?(i(),c(b,{key:0,Cols:"7",currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[3]||(e[3]=a=>f.getPurchases(a))},null,8,["currentPage","totalPages"])):h("",!0),l.loader?(i(),c(y,{key:1,Cols:"7"})):h("",!0)]),_:1},8,["Th","Title"])])]),_:1})}const gt=D(q,[["render",st]]);export{gt as default};

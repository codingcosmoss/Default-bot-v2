import{P as v}from"./Page-X_CL2XrS.js";import{_ as h,o as g,c as _,a as e,h as w,b as y,i as p,u as L,G as l,A as a,L as b,d as S,w as k,r as d,e as c,j as u,n as x}from"./app-HuQxhYkh.js";import{L as E}from"./LoginInput-SOPIGRKx.js";const $={},I={class:"account-pages my-5 pt-sm-5"},P={class:"container"},V={class:"row justify-content-center"},U={class:"col-md-8 col-lg-6 col-xl-5"},C={class:"card overflow-hidden"},N=p('<div class="bg-primary-subtle"><div class="row"><div class="col-7"><div class="text-primary p-4"><h5 class="text-primary">Welcome Back !</h5><p>Sign in to continue to Skote.</p></div></div><div class="col-5 align-self-end"><img src="http://127.0.0.1:8000/assets/images/profile-img.png" alt="" class="img-fluid"></div></div></div>',1),B={class:"card-body pt-0"},F=p('<div class="auth-logo"><a href="index.html" class="auth-logo-light"><div class="avatar-md profile-user-wid mb-4"><span class="avatar-title rounded-circle bg-light"><img src="http://127.0.0.1:8000/assets/images/logo-light.svg" alt="" class="rounded-circle" height="34"></span></div></a><a href="index.html" class="auth-logo-dark"><div class="avatar-md profile-user-wid mb-4"><span class="avatar-title rounded-circle bg-light"><img src="http://127.0.0.1:8000/assets/images/logo.svg" alt="" class="rounded-circle" height="34"></span></div></a></div>',1),O={class:"p-2"},z={class:"mt-5 text-center"},K=e("p",null,"© Zari maroqli suhbatdosh loyhasi",-1);function T(t,s){return g(),_("div",I,[e("div",P,[e("div",V,[e("div",U,[e("div",C,[N,e("div",B,[F,e("div",O,[w(t.$slots,"default")]),e("div",z,[e("div",null,[e("p",null,[y("Hisobingiz yo‘qmi ? "),e("a",{onClick:s[0]||(s[0]=m=>this.$router.push("/register")),class:"fw-medium text-primary"}," Ro'yxatdan o'tish ")]),K])])])])])])])])}const j=h($,[["render",T]]),q={setup(){return{counterStore:L()}},components:{LoginInput:E,Layout:j,Page:v},data(){return{login:"admin",password:"12345678adc",isError:!1,Loader:!1,errors:[]}},methods:{async getUser(){const t=await l();console.log(t),t.success==200&&(a("info",this.$t("youlogged")),localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("token",t.data.role_token),this.counterStore.updateUser(t.data),this.$router.push("/admin"))},async addForm(){try{this.Loader=!0;let t={login:this.login,password:this.password};const s=await b(t);return s.success!=null?s.success==200?(this.isError=!1,this.Loader=!1,localStorage.setItem("0008a78764c2",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),localStorage.setItem("token",s.data.user.role_token),localStorage.setItem("reload",!0),this.counterStore.updateUser(s.data.user),this.$router.push("/redirect"),a("success",this.$t("loginSuccess")),!0):(this.Loader=!1,a("error",this.$t("loginPasswordError")),!1):(this.errors=s.data,a("error",this.$t("loginPasswordError")),this.isError=!0,this.Loader=!1,!1)}catch{a("error",this.$t("loginPasswordError")),this.Loader=!1,this.isError=!0}},async getUserLocal(){await l(),this.$router.push("/")}},mounted(){this.getUser()}},A=e("br",null,null,-1),G={class:"mt-3 d-grid"};function J(t,s,m,H,r,i){const n=d("LoginInput"),f=d("Layout");return g(),S(f,null,{default:k(()=>[c(n,{Label:"Username",Pholder:"username",Value:r.login,onOnInput:s[0]||(s[0]=o=>r.login=o),onKeyup:s[1]||(s[1]=u(o=>i.addForm(),["enter"])),isError:"login"in r.errors},null,8,["Value","isError"]),c(n,{Label:"Password",Pholder:"password",Value:r.password,onOnInput:s[2]||(s[2]=o=>r.password=o),Type:"password",onKeyup:s[3]||(s[3]=u(o=>i.addForm(),["enter"])),isError:"password"in r.errors},null,8,["Value","isError"]),A,e("div",G,[e("button",{class:x([r.Loader&&"disabled","btn btn-primary waves-effect waves-light"]),onClick:s[4]||(s[4]=o=>i.addForm()),type:"submit"},"Tizimga kirish",2)])]),_:1})}const D=h(q,[["render",J]]);export{D as default};

import{a as $,M as T,b as N,P as L}from"./Page-k1RhpKxv.js";import{_ as x,u as D,aJ as U,H as u,aK as E,A as m,o as d,c as _,w as p,e as r,a as n,t as l,f as I,r as a,P as H,aL as A,aM as J,aN as K,aO as Q,aP as Y,aQ as W,aR as X,g as V,b,d as S,Y as Z,F as v}from"./app-tuttM9Io.js";import{a as F,B as ee}from"./BasicTable-dpWtiJ4i.js";import{G as te}from"./GrowingLoader-ajX8lziD.js";import{P as se}from"./PrimaryIconBtn-utELPCpc.js";import{D as O}from"./DefaultInput-AnvAhpkM.js";import{D as k}from"./DefaultSelect-mJwZsmUq.js";import{I as G}from"./ImageInput-sm-pHeYj.js";import{P as re}from"./Paginate-YTLkHTO4.js";const ae={components:{ImageInput:G,DefaultSelect:k,PrimaryBtn:$,BtnBox:F,ModalCentered:T,PrimaryButton:N,DefaultInput:O,Page:L},setup(){return{counterStore:D()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",image:""}},methods:{async show(t){try{const e=await U(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){u(this,e)}},save(t){this.item=t,this.name=t.name,this.address=t.address,this.phone=t.phone,this.image=t.image!=null?t.image[0].url:""},async update(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,image:this.image};const e=await E(this.Item.id,t);return e.status?(this.show(e.data.id),m("success",this.$t("update")),this.loader=!1,this.counterStore.hiddenModal("supplierUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=e.errors,m("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return u(this,t),this.loader=!1,!1}}},watch:{Item:function(t,e){this.save(this.Item)}}},oe={class:"row"},ne={class:"row"},ie={class:"row"},le={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function de(t,e,M,c,s,g){const P=a("ImageInput"),h=a("DefaultInput"),C=a("BaseBox"),y=a("PrimaryBtn"),B=a("BtnBox"),w=a("ModalCentered");return d(),_(w,{Title:t.$t("Update"),ModalName:"supplierUpdate",isModalFooter:!1},{default:p(()=>[r("div",oe,[n(C,{Col:"col-xl-12",Title:""},{default:p(()=>[n(P,{Title:t.$t("ProfilPhoto"),Name:"supplierUpdateImage",onSupplierUpdateImage:e[0]||(e[0]=o=>(s.image=o,delete this.errors.image)),Validated:s.errors,Image:s.image},null,8,["Title","Validated","Image"]),r("div",ne,[n(h,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=o=>(s.name=o,delete this.errors.name))},null,8,["Label","Validated","Value"]),n(h,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=o=>(s.phone=o,delete this.errors.phone))},null,8,["Label","Validated","Value"])]),r("div",ie,[n(h,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[3]||(e[3]=o=>(s.address=o,delete this.errors.address))},null,8,["Label","Validated","Value"])])]),_:1}),n(B,null,{default:p(()=>[r("button",le,l(t.$t("Close")),1),I("   "),n(y,{Loader:s.loader,onOnButton:e[4]||(e[4]=o=>g.update())},{default:p(()=>[I(l(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const ue=x(ae,[["render",de]]),pe={components:{ImageInput:G,DefaultSelect:k,PrimaryBtn:$,BtnBox:F,ModalCentered:T,PrimaryButton:N,DefaultInput:O,Page:L},setup(){return{counterStore:D()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await H(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){u(this,e)}},async save(){try{this.item="",this.name="",this.address="",this.phone="",this.image=""}catch(t){u(this,t)}},async create(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,image:this.image};const e=await A(t);return e.status?(m("success",this.$t("create")),this.save(),this.loader=!1,this.counterStore.hiddenModal("supplierCreate"),this.$emit("onCreate",!0),!0):(this.errors=e.errors,m("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return u(this,t),this.loader=!1,!1}}},mounted(){},watch:{Item:function(t,e){this.save()}}},me={class:"row"},he={class:"row"},ce={class:"row"},ge={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function fe(t,e,M,c,s,g){const P=a("ImageInput"),h=a("DefaultInput"),C=a("BaseBox"),y=a("PrimaryBtn"),B=a("BtnBox"),w=a("ModalCentered");return d(),_(w,{Title:t.$t("Create"),ModalName:"supplierCreate",isModalFooter:!1},{default:p(()=>[r("div",me,[n(C,{Col:"col-xl-12",Title:""},{default:p(()=>[n(P,{Title:t.$t("ProfilPhoto"),Name:"supplierCreateImage",onSupplierCreateImage:e[0]||(e[0]=o=>(s.image=o,delete this.errors.image,console.log("Image",o))),Validated:s.errors},null,8,["Title","Validated"]),r("div",he,[n(h,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=o=>(s.name=o,delete this.errors.name))},null,8,["Label","Validated","Value"]),n(h,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=o=>(s.phone=o,delete this.errors.phone))},null,8,["Label","Validated","Value"])]),r("div",ce,[n(h,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[3]||(e[3]=o=>(s.address=o,delete this.errors.address))},null,8,["Label","Validated","Value"])])]),_:1}),n(B,null,{default:p(()=>[r("button",ge,l(t.$t("Close")),1),I("   "),n(y,{Loader:s.loader,onOnButton:e[4]||(e[4]=o=>g.create())},{default:p(()=>[I(l(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const _e=x(pe,[["render",fe]]),ye={components:{DefaultSelect:k,Paginate:re,DefaultInput:O,PrimaryBtn:$,ModalCentered:T,PrimaryIconBtn:se,PrimaryButton:N,GrowingLoader:te,BasicTable:ee,Page:L,Update:ue,Create:_e},setup(){return{counterStore:D()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],loader:!1}},methods:{async index(){try{const t=await J();this.items=t.data}catch(t){u(this,t)}},async indexActives(){try{const t=await K(this.paginateCount);this.items=t.data}catch(t){u(this,t)}},async indexPaginates(t=1){try{this.loader=!0;const e=await Q(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){u(this,e)}},async orderBys(){try{const t=await Y(this.column,this.type);this.items=t.data}catch(t){u(this,t)}},async show(t){try{const e=await U(t);this.item=e.data}catch(e){u(this,e)}},async create(){try{const e=await A({});return e.status?(m("success",this.$t("create")),!0):(this.errors=e.errors,m("error",this.$t("formError")),!1)}catch(t){return u(this,t),!1}},async update(){try{const e=await E({});return e.status?(m("success",this.$t("update")),!0):(this.errors=e.errors,m("error",this.$t("formError")),!1)}catch(t){return u(this,t),!1}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await W(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(m("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return u(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await X(t);return this.items=e.data,e.status&&(this.indexPaginates(this.current_page),m("success",this.$t("delete"))),m("error",this.$t("formError")),!1}catch(e){return u(this,e),!1}}},mounted(){this.indexPaginates()}},be={class:"row"},Ie={value:"10",selected:""},Pe=r("option",{value:"10"},"10",-1),Ce=r("option",{value:"20"},"20",-1),Be=r("option",{value:"50"},"50",-1),we=r("option",{value:"100"},"100",-1),Ve={class:"m-0"},Se={class:"m-0"};function ve(t,e,M,c,s,g){const P=a("DefaultInput"),h=a("DefaultSelect"),C=a("PrimaryBtn"),y=a("PrimaryIconBtn"),B=a("Paginate"),w=a("GrowingLoader"),o=a("BasicTable"),R=a("Update"),j=a("Create"),q=a("Page");return d(),_(q,{Title:""},{default:p(()=>[r("div",be,[n(o,{Th:[t.$t("No"),t.$t("Image"),t.$t("Name"),t.$t("Phone"),t.$t("Address"),t.$t("ImportedMedicines"),t.$t("Paid"),t.$t("Indebtedness"),t.$t("Settings")],Title:t.$t("Suppliers"),Col:"col-lg-12"},{inputs:p(()=>[n(P,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:e[0]||(e[0]=i=>g.search(i))}),n(h,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:e[1]||(e[1]=i=>(this.paginateCount=i,this.indexPaginates()))},{default:p(()=>[r("option",Ie,l(t.$t("NumberDownloads")),1),Pe,Ce,Be,we]),_:1}),I("   ")]),buttons:p(()=>[c.counterStore.hasRole("Suppliers-create")?(d(),_(C,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#supplierCreate"},{default:p(()=>[I(l(t.$t("Create")),1)]),_:1})):V("",!0)]),default:p(()=>[(d(!0),b(v,null,S(s.items,(i,z)=>(d(),b("tr",null,[r("td",null,l((s.current_page-1)*s.paginateCount+z+1),1),r("td",null,[r("div",{class:"table_image",style:Z("background-image: url("+i.image[0].url+")")},null,4)]),r("td",null,l(i.name),1),r("td",null,l(i.phone),1),r("td",null,l(i.address),1),r("td",null,l(c.counterStore.formatNumber(i.imported_medicines)),1),r("td",null,[(d(!0),b(v,null,S(i.paid,f=>(d(),b("p",Ve,l(c.counterStore.formatNumber(f.total_amount.toFixed(2)))+" "+l(f.sign),1))),256))]),r("td",null,[(d(!0),b(v,null,S(i.loan,f=>(d(),b("p",Se,l(c.counterStore.formatNumber(f.total_amount.toFixed(2)))+" "+l(f.sign),1))),256))]),r("td",null,[c.counterStore.hasRole("Suppliers-update")?(d(),_(y,{key:0,onClick:f=>this.item=i,Icon:"bx bx-edit-alt",Modal:"supplierUpdate"},null,8,["onClick"])):V("",!0),n(y,{onClick:f=>this.$router.push({path:"/admin/suppliers/show",query:{id:i.id}}),Icon:"bx bx-show"},null,8,["onClick"]),c.counterStore.hasRole("Suppliers-delete")?(d(),_(y,{key:1,onClick:f=>this.delete(i.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):V("",!0)])]))),256)),s.last_page!=1?(d(),_(B,{key:0,Cols:"10",currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[2]||(e[2]=i=>g.indexPaginates(i))},null,8,["currentPage","totalPages"])):V("",!0),s.loader?(d(),_(w,{key:1,Cols:"10"})):V("",!0)]),_:1},8,["Th","Title"])]),n(R,{Item:s.item,onOnUpdate:e[3]||(e[3]=i=>g.indexPaginates(this.current_page))},null,8,["Item"]),n(j,{onOnCreate:e[4]||(e[4]=i=>g.indexPaginates(this.current_page))})]),_:1})}const Ue=x(ye,[["render",ve]]);export{Ue as default};

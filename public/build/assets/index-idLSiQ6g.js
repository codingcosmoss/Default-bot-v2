import{a as w,b as B,P as S}from"./Page-4XnC08k8.js";import{_ as T,M as L,u as N,ah as F,I as d,ai as G,A as c,o as p,c as g,w as u,e as r,a as o,t as l,f as b,r as i,S as j,an as q,c1 as H,c2 as z,c3 as J,c4 as K,b$ as Q,c5 as W,c6 as X,c7 as Y,g as v,b as O,d as Z,F as ee}from"./app-e-hkRfMH.js";import{a as k,B as te}from"./BasicTable-ycGBBi3k.js";import{G as se}from"./GrowingLoader-n5uhokVF.js";import{P as ae}from"./PrimaryIconBtn-HrObfPKe.js";import{D}from"./DefaultInput-nO-G-v5V.js";import{D as $}from"./DefaultSelect-vsYjQnTI.js";import{I as M}from"./ImageInput-D0gHF8ac.js";import{P as re}from"./Paginate-rw2bL9E0.js";const oe={components:{ImageInput:M,DefaultSelect:$,PrimaryBtn:w,BtnBox:k,ModalCentered:L,PrimaryButton:B,DefaultInput:D,Page:S},setup(){return{counterStore:N()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await F(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.email=e.data.email,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){d(this,e)}},save(t){this.item=t,this.name=t.name,this.address=t.address,this.email=t.email,this.phone=t.phone,this.image=t.image!=null?t.image[0].url:""},async update(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,email:this.email,image:this.image};const e=await G(this.Item.id,t);return e.status?(this.show(e.data.id),c("success",this.$t("update")),this.loader=!1,this.counterStore.hiddenModal("customerUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=e.errors,c("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return d(this,t),this.loader=!1,!1}}},watch:{Item:function(t,e){this.save(this.Item)}}},ne={class:"row"},ie={class:"row"},le={class:"row"},de={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function ue(t,e,f,y,s,h){const I=i("ImageInput"),m=i("DefaultInput"),P=i("BaseBox"),_=i("PrimaryBtn"),C=i("BtnBox"),V=i("ModalCentered");return p(),g(V,{Title:t.$t("Update"),ModalName:"customerUpdate",isModalFooter:!1},{default:u(()=>[r("div",ne,[o(P,{Col:"col-xl-12",Title:""},{default:u(()=>[o(I,{Title:t.$t("ProfilPhoto"),Name:"customerUpdateImage",onCustomerUpdateImage:e[0]||(e[0]=a=>(s.image=a,delete this.errors.image)),Validated:s.errors,Image:s.image},null,8,["Title","Validated","Image"]),r("div",ie,[o(m,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=a=>(s.name=a,delete this.errors.name)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=a=>(s.phone=a,delete this.errors.phone)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])]),r("div",le,[o(m,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:s.errors,Value:s.email,onOnInput:e[3]||(e[3]=a=>(s.email=a,delete this.errors.email)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[4]||(e[4]=a=>(s.address=a,delete this.errors.address)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])])]),_:1}),o(C,null,{default:u(()=>[r("button",de,l(t.$t("Close")),1),b("   "),o(_,{Loader:s.loader,onOnButton:e[5]||(e[5]=a=>h.update())},{default:u(()=>[b(l(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const me=T(oe,[["render",ue]]),ce={components:{ImageInput:M,DefaultSelect:$,PrimaryBtn:w,BtnBox:k,ModalCentered:L,PrimaryButton:B,DefaultInput:D,Page:S},setup(){return{counterStore:N()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await j(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.email=e.data.email,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){d(this,e)}},async save(){try{this.item="",this.name="",this.address="",this.email="",this.phone="",this.image=""}catch(t){d(this,t)}},async create(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,email:this.email,image:this.image};const e=await q(t);return e.status?(c("success",this.$t("create")),this.save(),this.loader=!1,this.counterStore.hiddenModal("customerCreate"),this.$emit("onCreate",!0),!0):(this.errors=e.errors,c("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return d(this,t),this.loader=!1,!1}}},mounted(){},watch:{Item:function(t,e){this.save()}}},he={class:"row"},pe={class:"row"},ge={class:"row"},fe={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function ye(t,e,f,y,s,h){const I=i("ImageInput"),m=i("DefaultInput"),P=i("BaseBox"),_=i("PrimaryBtn"),C=i("BtnBox"),V=i("ModalCentered");return p(),g(V,{Title:t.$t("Create"),ModalName:"customerCreate",isModalFooter:!1},{default:u(()=>[r("div",he,[o(P,{Col:"col-xl-12",Title:""},{default:u(()=>[o(I,{Title:t.$t("ProfilPhoto"),Name:"customerCreateImage",onCustomerCreateImage:e[0]||(e[0]=a=>(s.image=a,delete this.errors.image)),Validated:s.errors},null,8,["Title","Validated"]),r("div",pe,[o(m,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=a=>(s.name=a,delete this.errors.name)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=a=>(s.phone=a,delete this.errors.phone)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])]),r("div",ge,[o(m,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:s.errors,Value:s.email,onOnInput:e[3]||(e[3]=a=>(s.email=a,delete this.errors.email)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[4]||(e[4]=a=>(s.address=a,delete this.errors.address)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])])]),_:1}),o(C,null,{default:u(()=>[r("button",fe,l(t.$t("Close")),1),b("   "),o(_,{Loader:s.loader,onOnButton:e[5]||(e[5]=a=>h.create())},{default:u(()=>[b(l(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const _e=T(ce,[["render",ye]]),Ce={components:{DefaultSelect:$,Paginate:re,DefaultInput:D,PrimaryBtn:w,ModalCentered:L,PrimaryIconBtn:ae,PrimaryButton:B,GrowingLoader:se,BasicTable:te,Page:S,Update:me,Create:_e},setup(){return{counterStore:N()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],loader:!1,startDate:null,finishDate:null,isSearch:!1}},methods:{async index(){try{const t=await invoices();this.items=t.data}catch(t){d(this,t)}},async indexActives(){try{const t=await H(this.paginateCount);this.items=t.data}catch(t){d(this,t)}},async indexPaginates(t=1){try{this.loader=!0,this.isSearch=!1;const e=await z(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){d(this,e)}},async orderBys(){try{const t=await J(this.column,this.type);this.items=t.data}catch(t){d(this,t)}},async show(t){try{const e=await K(t);this.item=e.data}catch(e){d(this,e)}},async create(){try{const e=await Q({});return e.status?(c("success",this.$t("create")),!0):(this.errors=e.errors,c("error",this.$t("formError")),!1)}catch(t){return d(this,t),!1}},async update(){try{const e=await W({});return e.status?(c("success",this.$t("update")),!0):(this.errors=e.errors,c("error",this.$t("formError")),!1)}catch(t){return d(this,t),!1}},async search(t=1){try{this.loader=!0;let e={start:this.startDate,finish:this.finishDate};this.isSearch=!0;const f=await X(e,t);return this.items=f.data.items,this.current_page=f.data.pagination.current_page,this.last_page=f.data.pagination.last_page,this.loader=!1,f.status?(this.loader=!1,!0):(c("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return d(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await Y(t);return this.items=e.data,e.status&&(this.indexPaginates(this.current_page),c("success",this.$t("delete"))),c("error",this.$t("formError")),!1}catch(e){return d(this,e),!1}}},mounted(){this.indexPaginates()}},be={class:"row"},Ie={value:"10",selected:""},Pe=r("option",{value:"10"},"10",-1),Ve=r("option",{value:"20"},"20",-1),ve=r("option",{value:"50"},"50",-1),we=r("option",{value:"100"},"100",-1);function Be(t,e,f,y,s,h){const I=i("DefaultSelect"),m=i("DefaultInput"),P=i("PrimaryBtn"),_=i("PrimaryIconBtn"),C=i("Paginate"),V=i("GrowingLoader"),a=i("BasicTable"),x=i("Update"),E=i("Create"),U=i("Page");return p(),g(U,{Title:""},{default:u(()=>[r("div",be,[o(a,{Th:[t.$t("No"),t.$t("MedicineName"),t.$t("Date"),t.$t("Identifikator"),t.$t("Customer"),t.$t("Seller"),t.$t("Amount"),t.$t("Subtotal"),t.$t("Settings")],Title:t.$t("ReturnHistory"),Col:"col-lg-12"},{inputs:u(()=>[o(I,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:e[0]||(e[0]=n=>(this.paginateCount=n,this.indexPaginates()))},{default:u(()=>[r("option",Ie,l(t.$t("NumberDownloads")),1),Pe,Ve,ve,we]),_:1}),b("   "),o(m,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"start",Type:"date",onOnInput:e[1]||(e[1]=n=>(s.startDate=n,h.search()))}),o(m,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"finish",Type:"date",onOnInput:e[2]||(e[2]=n=>(s.finishDate=n,h.search()))})]),buttons:u(()=>[y.counterStore.hasRole("invoices-create")?(p(),g(P,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#invoiceCreate"},{default:u(()=>[b(l(t.$t("Create")),1)]),_:1})):v("",!0)]),default:u(()=>[(p(!0),O(ee,null,Z(s.items,(n,A)=>(p(),O("tr",null,[r("td",null,l((s.current_page-1)*s.paginateCount+A+1),1),r("td",null,l(n.name),1),r("td",null,l(y.counterStore.formatDate(n.created_at)),1),r("td",null,"#"+l(n.invoice_id),1),r("td",null,l(n.customer.name),1),r("td",null,l(n.user.name),1),r("td",null,l(y.counterStore.formatNumber(n.amount)),1),r("td",null,l(y.counterStore.formatNumber(n.subtotal))+" "+l(n.currency.sign),1),r("td",null,[o(_,{onClick:R=>this.$router.push({path:"/admin/returned/invoices/show",query:{id:n.invoice_id}}),Icon:"bx bx-show"},null,8,["onClick"]),y.counterStore.hasRole("invoices-delete")?(p(),g(_,{key:0,onClick:R=>this.delete(n.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):v("",!0)])]))),256)),s.last_page!=1&&!s.isSearch?(p(),g(C,{key:0,Cols:"9",currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[3]||(e[3]=n=>h.indexPaginates(n))},null,8,["currentPage","totalPages"])):v("",!0),s.last_page!=1&&s.isSearch?(p(),g(C,{key:1,Cols:"9",currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[4]||(e[4]=n=>h.search(n))},null,8,["currentPage","totalPages"])):v("",!0),s.loader?(p(),g(V,{key:2,Cols:"9"})):v("",!0)]),_:1},8,["Th","Title"])]),o(x,{Item:s.item,onOnUpdate:e[5]||(e[5]=n=>h.indexPaginates(this.current_page))},null,8,["Item"]),o(E,{onOnCreate:e[6]||(e[6]=n=>h.indexPaginates(this.current_page))})]),_:1})}const xe=T(Ce,[["render",Be]]);export{xe as default};

import{b as B,a as L,P as D}from"./Page-C0EjvpJs.js";import{_ as T,M as O,u as P,a9 as x,J as a,aa as M,ab as v,ac as E,ad as A,ae as J,A as n,af as U,ag as k,ah as F,c as q,w as d,r as l,o as p,e as i,a as o,i as y,t as u,b as g,d as z,F as R}from"./app-LAVUBCmT.js";import{I as j}from"./ImageInput-AMVtyHKb.js";import{D as G}from"./DefaultInput-fCD-8529.js";import{D as H}from"./DefaultSelect-dPDJB3o4.js";import{D as K}from"./DefaultIconInput-ryoU-XoY.js";import{S as _}from"./sweetalert2.all-Goi0Wxrt.js";const Q={components:{DefaultIconInput:K,ModalCentered:O,DefaultSelect:H,PrimaryButton:B,PrimaryBtn:L,DefaultInput:G,ImageInput:j,Page:D},setup(){return{counterStore:P()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],headers:[],loader:!1,image:"",name:"",phone:"",email:"",address:"",currency_id:"",currencies:[],amount:0,sign:"",oldSign:""}},methods:{onCurrency(t){let e=this.counterStore.inputNumberFormat("currency_input",this.amount,t);this.amount=e},async index(){try{this.loader=!0;const t=await x();this.items=t.data,this.loader=!1}catch(t){a(this,t)}},openModal(){new bootstrap.Modal(document.getElementById("Currency")).show()},async getCurrencies(){try{this.loader=!0;const t=await M();this.currencies=t.data,this.loader=!1}catch(t){a(this,t)}},async indexActives(){try{this.loader=!0;const t=await v(this.paginateCount);this.items=t.data,this.loader=!1}catch(t){a(this,t)}},async indexPaginates(t=1){try{this.loader=!0;const e=await E(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){a(this,e)}},async orderBys(){try{this.loader=!0;const t=await settingOrderBys(this.column,this.type);this.items=t.data,this.loader=!1}catch(t){a(this,t)}},async show(t=null){try{this.loader=!0;const e=await A(this.counterStore.user.clinic_id);this.item=e.data,this.name=e.data.name,this.address=e.data.address,this.email=e.data.email,this.phone=e.data.phone,this.currency_id=e.data.currency_id,this.oldSign=e.data.currency.sign,this.image=e.data.logo[0].url,this.loader=!1;let c=this.counterStore.user;c.logo=e.data.logo,c.currency=e.data.currency,c.currency_id=e.data.currency_id,localStorage.setItem("user",JSON.stringify(c)),this.counterStore.updateUser(c)}catch(e){a(this,e)}},async create(){try{this.loader=!0;const e=await J({});return e.status?(n("success",this.$t("create")),this.loader=!1,!0):(this.errors=e.errors,n("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return a(this,t),this.loader=!1,!1}},async update(){try{this.loader=!0;let t={name:this.name,address:this.address,email:this.email,phone:this.phone,image:this.image};const e=await U(null,t);return e.status?(n("success",this.$t("update")),this.counterStore.updateCurrency(e.data.currency),this.show(e.data.clinic_id),this.loader=!1,!0):(this.errors=e.errors,n("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return a(this,t),this.loader=!1,!1}},onUpdate(){_.fire({title:this.$t("CurrencyInfo"),text:"",icon:"info"}).then(t=>{t.isConfirmed&&this.updateCurrency()})},async updateCurrency(){try{if(this.amount<=0){this.errors.amount=this.$t("CurrencyRequired"),n("error",this.$t("CurrencyRequired"));return}this.loader=!0;let t={currency_id:this.currency_id,amount:this.amount};const e=await k(t);return e.status?(this.counterStore.updateCurrency(e.data.currency),this.show(),this.counterStore.hiddenModal("Currency"),_.fire({title:this.$t("update"),text:"",icon:"success"}),this.loader=!1,!0):(this.errors=e.errors,n("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return a(this,t),this.loader=!1,!1}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await settingSearch(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(n("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return a(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await F(t);return this.items=e.data,e.status&&(this.indexPaginates(),n("success",this.$t("delete"))),n("error",this.$t("formError")),!1}catch(e){return a(this,e),!1}}},mounted(){this.getCurrencies(),this.show(null)}},W={class:"row"},X=["selected","value"],Y={class:"col-12 mt-3"},Z={class:"card border border-primary"},$={class:"card-body"},ee={class:"card-title"},te={class:"card-text"},re={class:"w-100 d-flex justify-content-center align-items-center gap-3"},se={class:"m-0 font-size-20 text-success fw-bold"},ae=i("p",{class:"m-0 font-size-20 text-success fw-bold"},"=",-1);function oe(t,e,c,C,r,h){const S=l("ImageInput"),m=l("DefaultInput"),I=l("PrimaryButton"),f=l("BaseBox"),w=l("DefaultSelect"),V=l("DefaultIconInput"),b=l("ModalCentered"),N=l("Page");return p(),q(N,{Title:""},{default:d(()=>[i("div",W,[o(f,{Col:"col-xl-6",Title:t.$t("CompanySettings")},{default:d(()=>[o(S,{Title:t.$t("CompanyLogo"),Name:"CompanyLogo",onCompanyLogo:e[0]||(e[0]=s=>(r.image=s,delete this.errors.image)),Image:r.image,Validated:r.errors},null,8,["Title","Image","Validated"]),o(m,{Label:t.$t("CompanyName"),Name:"name",Type:"text",Validated:r.errors,Value:r.name,onOnInput:e[1]||(e[1]=s=>(r.name=s,delete this.errors.name))},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:r.errors,Value:r.address,onOnInput:e[2]||(e[2]=s=>(r.address=s,delete this.errors.address))},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:r.errors,Value:r.phone,onOnInput:e[3]||(e[3]=s=>(r.phone=s,delete this.errors.phone))},null,8,["Label","Validated","Value"]),o(m,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:r.errors,Value:r.email,onOnInput:e[4]||(e[4]=s=>(r.email=s,delete this.errors.email))},null,8,["Label","Validated","Value"]),o(I,{Loader:r.loader,onOnButton:h.update},{default:d(()=>[y(u(t.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"]),o(f,{Col:"col-xl-6",Title:t.$t("ProgramSettings")},{default:d(()=>[o(w,{Label:t.$t("Currency"),Name:"currency_id",onOnInput:e[5]||(e[5]=s=>(r.currency_id=JSON.parse(s).id,r.sign=JSON.parse(s).sign,h.openModal())),Validated:r.errors},{default:d(()=>[(p(!0),g(R,null,z(r.currencies,s=>(p(),g("option",{selected:s.id==r.currency_id,value:JSON.stringify(s)},u(s.title)+" ("+u(s.sign)+")",9,X))),256))]),_:1},8,["Label","Validated"])]),_:1},8,["Title"]),o(b,{Title:t.$t("NewCurrencyTitle"),ModalName:"Currency",onOnModal:e[7]||(e[7]=s=>h.onUpdate())},{default:d(()=>[i("div",Y,[i("div",Z,[i("div",$,[i("h5",ee,u(t.$t("Info")),1),i("p",te,u(t.$t("NewCurrencyInfo")),1)])])]),i("div",re,[i("p",se,"1 "+u(r.oldSign),1),ae,o(V,{Label:"",Class:"col-lg-6 col-sm-6 currency_input",Value:C.counterStore.formatNumber(r.amount),Validated:r.errors,onOnInput:e[6]||(e[6]=s=>(h.onCurrency(s),delete this.errors.amount))},{default:d(()=>[y(u(r.sign),1)]),_:1},8,["Value","Validated"])])]),_:1},8,["Title"])])]),_:1})}const me=T(Q,[["render",oe]]);export{me as default};

import{a as P,b as g,P as D}from"./Page-oDaSi7Lo.js";import{_ as V,M as b,u as B,bJ as T,A as s,I as v,o as i,c as C,w as o,e as d,a as l,f as S,t as m,b as c,d as M,F as x,r as n}from"./app-YVDEE9Za.js";import{D as N}from"./DefaultInput-p6HHK0Yr.js";import{I as w}from"./ImageInput-8YHD6RYu.js";import{a as A}from"./BasicTable-ZfmzSUNN.js";import{D as E}from"./DefaultSelect-Mq9jguBD.js";import{D as L}from"./DefaultIconInput-GCd7khMq.js";const O={components:{DefaultIconInput:L,DefaultSelect:E,PrimaryBtn:P,BtnBox:A,ModalCentered:b,ImageInput:w,PrimaryButton:g,DefaultInput:N,Page:D},setup(){return{counterStore:B()}},props:{Item:Object,paymentTypes:{type:[Object,Array],default:[]}},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,payment_type_id:null,document_id:null,currency_id:null,paid:0,sign:""}},methods:{async toPay(){try{if(this.loader=!0,!this.vatidator()){this.loader=!1;return}let t={payment_type_id:this.payment_type_id,amount:this.paid,supplier_id:this.Item.supplier_id,document_id:this.document_id,currency_id:this.currency_id};console.log("Data:",t);const e=await T(t);return e.status?(this.$emit("onPayment",!0),this.counterStore.hiddenModal("documentToPayModal"),this.discharge(),s("success",this.$t("save")),this.loader=!1,!0):(this.errors=e.errors,s("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return v(this,t),this.loader=!1,!1}},vatidator(){return this.paid==0?(this.errors.amount=this.$t("EnterPaymentAmount"),s("error",this.$t("EnterPaymentAmount")),!1):this.paid>this.Item.loan_amount?(this.errors.amount=this.$t("TheIncreased"),s("error",this.$t("TheIncreased")),!1):(this.errors.amount="",!0)},async save(){this.sign=this.Item.currency.sign,this.currency_id=this.Item.currency.id,this.item=this.Item,this.document_id=this.Item.id},discharge(){this.item="",this.document_id=null,this.currency_id=null,this.paid=0,this.errors=[]},addPrice(t){let e=this.counterStore.inputNumberFormat("reportPrice",this.paid,t);this.paid=e}},mounted(){this.discharge()},watch:{Item:function(t,e){this.save()}}},$={class:"row"},k=d("p",{class:"form-label text-danger"},null,-1),F=d("option",{selected:""},"---",-1),j=["value"];function J(t,e,p,h,a,u){const _=n("DefaultIconInput"),y=n("DefaultSelect"),f=n("BaseBox"),I=n("ModalCentered");return i(),C(I,{Title:t.$t("ToPay"),ModalName:"documentToPayModal",onOnModal:e[2]||(e[2]=r=>u.toPay())},{default:o(()=>[d("div",$,[l(f,{Col:"col-xl-12",Title:""},{default:o(()=>[l(_,{DefaultIconInput:"",Label:t.$t("Amount"),Name:"amount",Type:"text",Validated:a.errors,onOnInput:e[0]||(e[0]=r=>(u.addPrice(r),delete this.errors.amount)),inputClass:"reportPrice",Value:h.counterStore.formatNumber(a.paid)},{default:o(()=>[S(m(a.sign),1)]),_:1},8,["Label","Validated","Value"]),k,l(y,{Label:t.$t("PaymentType"),Name:"payment_type_id",Validated:a.errors,Value:a.payment_type_id,onOnInput:e[1]||(e[1]=r=>(a.payment_type_id=r,delete this.errors.payment_type_id))},{default:o(()=>[F,(i(!0),c(x,null,M(p.paymentTypes,r=>(i(),c("option",{value:r.id},m(r.name),9,j))),256))]),_:1},8,["Label","Validated","Value"])]),_:1})])]),_:1},8,["Title"])}const U=V(O,[["render",J]]);export{U as t};

import{a as B,M as w,b as v,P as T}from"./Page-6po4WWvc.js";import{_ as L,u as $,a0 as k,l as i,a1 as E,A as m,o as h,d as g,w as d,a as r,e as n,t as c,b as y,r as o,x as q,a2 as M,a3 as z,a4 as H,a5 as J,a6 as K,a7 as Q,a8 as W,g as V,c as D,f as X,F as Y,I as Z}from"./app-qjkFfopU.js";import{a as U,B as ee}from"./BasicTable-DVjjvWl8.js";import{P as te,G as se}from"./GrowingLoader-C9t3ZqrR.js";import{D as S}from"./DefaultInput-qAxpax30.js";import{D as N}from"./DefaultSelect-QS9w35hK.js";import{I as A}from"./ImageInput-rzGOIOcx.js";import{P as ae}from"./Paginate-pkoQmS0i.js";const re={components:{ImageInput:A,DefaultSelect:N,PrimaryBtn:B,BtnBox:U,ModalCentered:w,PrimaryButton:v,DefaultInput:S,Page:T},setup(){return{counterStore:$()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await k(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.email=e.data.email,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){i(this,e)}},save(t){this.item=t,this.name=t.name,this.address=t.address,this.email=t.email,this.phone=t.phone,this.image=t.image!=null?t.image[0].url:""},async update(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,email:this.email,image:this.image};const e=await E(this.Item.id,t);return e.status?(this.show(e.data.id),m("success",this.$t("update")),this.loader=!1,this.counterStore.hiddenModal("customerUpdate"),this.$emit("onUpdate",!0),!0):(this.errors=e.errors,m("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return i(this,t),this.loader=!1,!1}}},watch:{Item:function(t,e){this.save(this.Item)}}},oe={class:"row"},ne={class:"row"},le={class:"row"},ie={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function de(t,e,x,_,s,p){const C=o("ImageInput"),u=o("DefaultInput"),b=o("BaseBox"),f=o("PrimaryBtn"),I=o("BtnBox"),P=o("ModalCentered");return h(),g(P,{Title:t.$t("Update"),ModalName:"customerUpdate",isModalFooter:!1},{default:d(()=>[r("div",oe,[n(b,{Col:"col-xl-12",Title:""},{default:d(()=>[n(C,{Title:t.$t("ProfilPhoto"),Name:"customerUpdateImage",onCustomerUpdateImage:e[0]||(e[0]=a=>(s.image=a,delete this.errors.image)),Validated:s.errors,Image:s.image},null,8,["Title","Validated","Image"]),r("div",ne,[n(u,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=a=>(s.name=a,delete this.errors.name)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(u,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=a=>(s.phone=a,delete this.errors.phone)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])]),r("div",le,[n(u,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:s.errors,Value:s.email,onOnInput:e[3]||(e[3]=a=>(s.email=a,delete this.errors.email)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(u,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[4]||(e[4]=a=>(s.address=a,delete this.errors.address)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])])]),_:1}),n(I,null,{default:d(()=>[r("button",ie,c(t.$t("Close")),1),y("   "),n(f,{Loader:s.loader,onOnButton:e[5]||(e[5]=a=>p.update())},{default:d(()=>[y(c(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const ue=L(re,[["render",de]]),me={components:{ImageInput:A,DefaultSelect:N,PrimaryBtn:B,BtnBox:U,ModalCentered:w,PrimaryButton:v,DefaultInput:S,Page:T},setup(){return{counterStore:$()}},props:{Item:Object},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",address:"",phone:"",email:"",image:""}},methods:{async show(t){try{const e=await q(t);this.item=e.data,this.name=e.data.name,this.login=e.data.login,this.email=e.data.email,this.phone=e.data.phone,this.image=e.data.image[0].url}catch(e){i(this,e)}},async save(){try{this.item="",this.name="",this.address="",this.email="",this.phone="",this.image=""}catch(t){i(this,t)}},async create(){try{this.loader=!0;let t={name:this.name,phone:this.phone,address:this.address,email:this.email,image:this.image};const e=await M(t);return e.status?(m("success",this.$t("create")),this.save(),this.loader=!1,this.counterStore.hiddenModal("customerCreate"),this.$emit("onCreate",!0),!0):(this.errors=e.errors,m("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return i(this,t),this.loader=!1,!1}}},mounted(){},watch:{Item:function(t,e){this.save()}}},ce={class:"row"},he={class:"row"},pe={class:"row"},ge={type:"button",class:"btn btn-light","data-bs-dismiss":"modal"};function fe(t,e,x,_,s,p){const C=o("ImageInput"),u=o("DefaultInput"),b=o("BaseBox"),f=o("PrimaryBtn"),I=o("BtnBox"),P=o("ModalCentered");return h(),g(P,{Title:t.$t("Create"),ModalName:"customerCreate",isModalFooter:!1},{default:d(()=>[r("div",ce,[n(b,{Col:"col-xl-12",Title:""},{default:d(()=>[n(C,{Title:t.$t("ProfilPhoto"),Name:"customerCreateImage",onCustomerCreateImage:e[0]||(e[0]=a=>(s.image=a,delete this.errors.image)),Validated:s.errors},null,8,["Title","Validated"]),r("div",he,[n(u,{Label:t.$t("Name"),Name:"name",Type:"text",Validated:s.errors,Value:s.name,onOnInput:e[1]||(e[1]=a=>(s.name=a,delete this.errors.name)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(u,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:s.errors,Value:s.phone,onOnInput:e[2]||(e[2]=a=>(s.phone=a,delete this.errors.phone)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])]),r("div",pe,[n(u,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:s.errors,Value:s.email,onOnInput:e[3]||(e[3]=a=>(s.email=a,delete this.errors.email)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"]),n(u,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:s.errors,Value:s.address,onOnInput:e[4]||(e[4]=a=>(s.address=a,delete this.errors.address)),Class:"col-lg-6 col-sm-12"},null,8,["Label","Validated","Value"])])]),_:1}),n(I,null,{default:d(()=>[r("button",ge,c(t.$t("Close")),1),y("   "),n(f,{Loader:s.loader,onOnButton:e[5]||(e[5]=a=>p.create())},{default:d(()=>[y(c(t.$t("Save")),1)]),_:1},8,["Loader"])]),_:1})])]),_:1},8,["Title"])}const ye=L(me,[["render",fe]]),_e={components:{DefaultSelect:N,Paginate:ae,DefaultInput:S,PrimaryBtn:B,ModalCentered:w,PrimaryIconBtn:te,PrimaryButton:v,GrowingLoader:se,BasicTable:ee,Page:T,Update:ue,Create:ye},setup(){return{counterStore:$()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],loader:!1}},methods:{async index(){try{const t=await z();this.items=t.data}catch(t){i(this,t)}},async indexActives(){try{const t=await H(this.paginateCount);this.items=t.data}catch(t){i(this,t)}},async indexPaginates(t=1){try{this.loader=!0;const e=await J(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){i(this,e)}},async orderBys(){try{const t=await K(this.column,this.type);this.items=t.data}catch(t){i(this,t)}},async show(t){try{const e=await k(t);this.item=e.data}catch(e){i(this,e)}},async create(){try{const e=await M({});return e.status?(m("success",this.$t("create")),!0):(this.errors=e.errors,m("error",this.$t("formError")),!1)}catch(t){return i(this,t),!1}},async update(){try{const e=await E({});return e.status?(m("success",this.$t("update")),!0):(this.errors=e.errors,m("error",this.$t("formError")),!1)}catch(t){return i(this,t),!1}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await Q(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(m("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return i(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await W(t);return this.items=e.data,e.status&&(this.indexPaginates(this.current_page),m("success",this.$t("delete"))),m("error",this.$t("formError")),!1}catch(e){return i(this,e),!1}}},mounted(){this.indexPaginates()}},Ce={class:"row"},be={value:"10",selected:""},Ie=r("option",{value:"10"},"10",-1),Pe=r("option",{value:"20"},"20",-1),Ve=r("option",{value:"50"},"50",-1),Be=r("option",{value:"100"},"100",-1);function we(t,e,x,_,s,p){const C=o("DefaultInput"),u=o("DefaultSelect"),b=o("PrimaryBtn"),f=o("PrimaryIconBtn"),I=o("Paginate"),P=o("GrowingLoader"),a=o("BasicTable"),F=o("Update"),G=o("Create"),R=o("Page");return h(),g(R,{Title:""},{default:d(()=>[r("div",Ce,[n(a,{Th:[t.$t("No"),t.$t("Image"),t.$t("Name"),t.$t("Phone"),t.$t("Email"),t.$t("Address"),t.$t("Settings")],Title:t.$t("Customers"),Col:"col-lg-12"},{inputs:d(()=>[n(C,{Class:"col-lg-3 col-sm-2 search_input",Label:"",Name:"name",Type:"text",Pholder:"Search...",onOnInput:e[0]||(e[0]=l=>p.search(l))}),n(u,{Label:"",Class:"col-lg-2 col-sm-2",onOnInput:e[1]||(e[1]=l=>(this.paginateCount=l,this.indexPaginates()))},{default:d(()=>[r("option",be,c(t.$t("NumberDownloads")),1),Ie,Pe,Ve,Be]),_:1}),y("   ")]),buttons:d(()=>[_.counterStore.hasRole("Customers-create")?(h(),g(b,{key:0,role:"button","data-bs-toggle":"modal","data-bs-target":"#customerCreate"},{default:d(()=>[y(c(t.$t("Create")),1)]),_:1})):V("",!0)]),default:d(()=>[(h(!0),D(Y,null,X(s.items,(l,j)=>(h(),D("tr",null,[r("td",null,c((s.current_page-1)*s.paginateCount+j+1),1),r("td",null,[r("div",{class:"table_image",style:Z("background-image: url("+l.image[0].url+")")},null,4)]),r("td",null,c(l.name),1),r("td",null,c(l.phone),1),r("td",null,c(l.email),1),r("td",null,c(l.address),1),r("td",null,[_.counterStore.hasRole("Customers-update")?(h(),g(f,{key:0,onClick:O=>this.item=l,Icon:"bx bx-edit-alt",Modal:"customerUpdate"},null,8,["onClick"])):V("",!0),n(f,{onClick:O=>this.$router.push({path:"/admin/customers/show",query:{id:l.id}}),Icon:"bx bx-show"},null,8,["onClick"]),_.counterStore.hasRole("Customers-delete")?(h(),g(f,{key:1,onClick:O=>this.delete(l.id),class:"bg-danger border-danger",Icon:"bx bx-trash-alt"},null,8,["onClick"])):V("",!0)])]))),256)),s.last_page!=1?(h(),g(I,{key:0,currentPage:this.current_page,totalPages:this.last_page,onChangePage:e[2]||(e[2]=l=>p.indexPaginates(l))},null,8,["currentPage","totalPages"])):V("",!0),s.loader?(h(),g(P,{key:1,Cols:"7"})):V("",!0)]),_:1},8,["Th","Title"])]),n(F,{Item:s.item,onOnUpdate:e[3]||(e[3]=l=>p.indexPaginates(this.current_page))},null,8,["Item"]),n(G,{onOnCreate:e[4]||(e[4]=l=>p.indexPaginates(this.current_page))})]),_:1})}const De=L(_e,[["render",we]]);export{De as default};

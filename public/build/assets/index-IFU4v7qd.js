import{P as S}from"./Page-8n99lQGG.js";import{_,u as x,o as n,c as d,a as r,t as m,k as B,n as K,X as A,A as k,r as i,f as N,w as p,b as l,V as H,W as q,L as F,M as z,bc as R,bd as X,as as G,be as J,bf as Q,bg as Y,bh as Z,bi as $,h as y,F as v,D as w,s as M}from"./app-TemNFbnf.js";import{I as ee}from"./InputDefault-tLeF0Vsp.js";import{_ as te}from"./pagination-01.vue_vue_type_style_index_0_lang-ZvTme92P.js";import{S as j,M as C}from"./Switch-ytQAvUOl.js";import{S as L}from"./Select-2LcnBieZ.js";import{I as O}from"./Input-kd4mt6Nc.js";import{L as se}from"./Loader-rZq7vIO3.js";import{W as ae}from"./WarehouseTopbar-ZNY-viIW.js";import{T as re}from"./Table-OMRAnh-d.js";import{I as oe}from"./Input01-nqTv5NXN.js";import{T as ne}from"./Textarea-2uEfp-ul.js";import"./Input-FG7ZHoFJ.js";import"./InputColor-d1VPOoHj.js";import"./paginate-OCobNe55.js";const ie={data(){return{order:"asc",search:"",column:"id"}},methods:{getName(e){return x().getName(e)}}},le={class:"grid grid-cols-5 border-b border-stroke dark:border-strokedark sm:grid-cols-5 databes_table overflow-x-auto"},de={class:"flex items-center justify-content-end p-2.5 xl:p-5"},ce={class:"font-medium text-black dark:text-white"},ue={class:"flex items-center justify-center p-2.5 xl:p-5"},me={class:"font-medium text-black dark:text-white"},pe={class:"flex items-center justify-center p-2.5 xl:p-5"},he={class:"font-medium text-black dark:text-white"},_e={class:"flex items-center justify-center p-2.5 xl:p-5"},ge={class:"font-medium text-black dark:text-white"};function fe(e,t,c,h,a,s){return n(),d("div",le,[r("div",de,[r("p",ce,m(s.getName("name_content")),1)]),r("div",ue,[r("p",me,m(s.getName("price")),1)]),r("div",pe,[r("p",he,m(s.getName("Created_at")),1)]),r("div",_e,[r("p",ge,m(s.getName("actions")),1)])])}const be=_(ie,[["render",fe],["__scopeId","data-v-35858ee6"]]),ye={},xe={class:"box"},ve={class:"pagination"};function ke(e,t){return n(),d("div",xe,[r("div",ve,[B(e.$slots,"default")])])}const Ne=_(ye,[["render",ke]]),Ie={props:{number:{type:Number,default:0},active:{type:Boolean,default:!1},link:{type:String,default:0}}};function we(e,t,c,h,a,s){return n(),d("a",{class:K([c.active?"active":"","cursor-pointer"])},m(c.number),3)}const Me=_(Ie,[["render",we]]),Se={components:{Switch:j,Input:O,Select:L,ModalLayout:C,Page:S},data(){return{status:1,categoryName:"",errorObj:{}}},props:{isCreateModal:{type:Boolean,default:!1},isUpdateModal:{type:Boolean,default:!1}},methods:{getName(e){return x().getName(e)},hasKey(e){return e in this.errorObj},async createCategory(){var e={name:this.categoryName,status:this.status};const t=await A(e);console.log(t),t.status?(this.categoryName="",this.$emit("closeModal",!1),this.$emit("Created",!0),k("success","Created successfully !")):this.errorObj=t.data}}},Ce=r("option",{value:1}," Active",-1),Le=r("option",{value:0}," Inactive",-1);function Oe(e,t,c,h,a,s){const g=i("Input"),f=i("Select"),b=i("ModalLayout");return n(),N(b,{onOnButton:s.createCategory,isModal:c.isCreateModal,onCloseModal:t[2]||(t[2]=u=>this.$emit("closeModal",u)),Title:s.getName("create")},{default:p(()=>[l(g,{Label:s.getName("name_content"),onOnInput:t[0]||(t[0]=u=>a.categoryName=u),isError:s.hasKey("name"),message:a.errorObj.name,Value:a.categoryName},null,8,["Label","isError","message","Value"]),l(f,{Label:s.getName("status"),onOnSelect:t[1]||(t[1]=u=>this.status=u)},{default:p(()=>[Ce,Le]),_:1},8,["Label"])]),_:1},8,["onOnButton","isModal","Title"])}const Pe=_(Se,[["render",Oe]]),je={components:{Input:O,Select:L,ModalLayout:C,Page:S},data(){return{status:1,categoryName:"",errorObj:{}}},props:{isUpdateModal:{type:Boolean,default:!1},Updated_Id:{type:Number,default:0}},methods:{getName(e){return x().getName(e)},hasKey(e){return e in this.errorObj},async getModel(){console.log(this.isUpdateModal);const e=await H(this.Updated_Id);this.categoryName=e.data.name,this.status=e.data.status},async updateCategory(){var e={name:this.categoryName,status:this.status};const t=await q(this.Updated_Id,e);t.status?(this.categoryName="",this.$emit("closeModal",!1),this.$emit("Created",!0),k("success","Update successfully !")):this.errorObj=t.data}},watch:{Updated_Id:function(e,t){this.getModel()}}},Ue=["selected"],De=["selected"];function Te(e,t,c,h,a,s){const g=i("Input"),f=i("Select"),b=i("ModalLayout");return n(),N(b,{onOnButton:s.updateCategory,isModal:c.isUpdateModal,onCloseModal:t[2]||(t[2]=u=>this.$emit("closeUpdatedModal",!1)),Title:s.getName("update")},{default:p(()=>[l(g,{Label:s.getName("name_content"),onOnInput:t[0]||(t[0]=u=>a.categoryName=u),isError:s.hasKey("name"),message:a.errorObj.name,Value:a.categoryName},null,8,["Label","isError","message","Value"]),l(f,{Label:s.getName("status"),onOnSelect:t[1]||(t[1]=u=>a.status=u)},{default:p(()=>[r("option",{selected:a.status==1,value:1}," Active",8,Ue),r("option",{selected:a.status!=1,value:0}," Inactive",8,De)]),_:1},8,["Label"])]),_:1},8,["onOnButton","isModal","Title"])}const Ve=_(je,[["render",Te]]),Ee={setup(){return{useConterStore:x}},components:{Textarea:ne,Input01:oe,Table:re,WarehouseTopbar:ae,Loader:se,Switch:j,Select:L,Input:O,CreateForm:Pe,ModalLayout:C,Pagination01:te,UpdateForm:Ve,VueAwesomePaginate:F,InputDefault:ee,PaginateBtn:Me,Paginate:Ne,TableHeader:be},data(){return{items:[],search:"",column:"updated_at",isError:"",order:"asc",paginateCount:10,pagination:{},last_page:0,currentPage:1,UpdatedId:0,isModal:!1,ExitModal:!1,errorObj:{},crud:"",supplierId:"",Suppliers:[],Warehouses:[],warehouseId:"",Name:"",Description:"",Summ:0}},methods:{router(){return z},closeModal(){this.isModal=!1,this.Products=[],this.SearchText="",this.SearchPrducts=[],this.isError=[],this.Summ=0},onClickHandler(e){this.paginate=e,this.currentPage=e,this.getItems()},onModal(e){e==null?(this.crud="created",this.categoryName=""):(this.crud="",this.UpdatedId=e,this.getModel()),this.errorObj={},this.isModal=!0},async getModel(){const e=await R(this.UpdatedId);this.Name=e.data.name,this.supplierId=e.data.supplier_id,this.warehouseId=e.data.warehouse_id,this.Description=e.data.description,this.Summ=e.data.summ},onUpdateModal(e){this.UpdatedId=e,this.isUpdateModal=!0},async getSuppliers(){const e=await X(1,1e3);this.Suppliers=e.data.items},async getWarehouses(){const e=await G(1,1e3);this.Warehouses=e.data.items},hasKey(e){return e in this.errorObj},async CRUD(){var e={name:this.Name,warehouse_id:this.warehouseId,supplier_id:this.supplierId,description:this.Description},t="";this.crud=="created"?t=await J(e):t=await Q(this.UpdatedId,e),t.status?(this.cleaningVarables(),this.UpdatedId=null,this.isModal=!1,this.closeModal(),this.getItems(),k("success","Created successfully !")):(this.errorObj=t.data,console.log(t))},cleaningVarables(){this.Name="",this.warehouseId="",this.supplierId="",this.Description=""},getName(e){return x().getName(e)},openModal(){document.querySelector(".modal").classList.remove("hidden")},async getItems(){const e=await Y(this.currentPage,this.paginateCount);this.pagination=e.data.pagination,this.last_page=e.data.pagination.last_page,this.current_page=e.data.pagination.currentPage,this.items=e.data.items},async clickSearch(e,t){if(this.search=e,this.order=t,e!=""){var c={search:this.search,order:this.order,column:this.column,paginate:this.paginateCount};const h=await Z(c);this.items=h.data.items}else this.getItems()},async onDelete(e){var t="Вы уверены, что хотите это удалить?";confirm(t)&&(await $(e)).status==!0&&(k("success","Deleted successfully !"),this.getItems())},onPaginate(e){this.paginateCount=e,this.getItems()},hasPermission(e){return!!localStorage.getItem("permissions").split(",").includes(e)}},mounted(){this.getItems(),this.getSuppliers(),this.getWarehouses()}},We={class:"col-span-12 xl:col-span-12"},Be={class:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1"},Ke={class:"flex flex-col table_media_box"},Ae={class:"grid grid-cols-3 rounded-sm mb-2 sm:grid-cols-5 relative media_top_bar"},He={class:"ml-4"},qe=r("option",{value:"10"},"10",-1),Fe=r("option",{value:"20"},"20",-1),ze=r("option",{value:"50"},"50",-1),Re=r("option",{value:"100"},"100",-1),Xe=[qe,Fe,ze,Re],Ge={key:0,class:"flex flex-wrap gap-5 xl:gap-20",style:{position:"absolute",right:"0px",top:"0"}},Je={class:"grid grid-cols-5 border-b border-stroke dark:border-strokedark sm:grid-cols-5 databes_table"},Qe=["onClick"],Ye={class:"font-bold text-black dark:text-white sm:block cursor-pointer",style:{color:"#0a91f1"}},Ze={class:"flex items-center justify-center p-2.5 xl:p-5"},$e={class:"font-medium text-black dark:text-white"},et={class:"flex items-center justify-center p-2.5 xl:p-5"},tt={class:"font-medium text-black dark:text-white"},st={class:"flex items-center justify-center p-2.5 sm:flex xl:p-5"},at={class:"font-medium text-meta-5"},rt=["onClick"],ot=["title","onClick"],nt=["onClick"],it=r("option",null,"---",-1),lt=["value","selected"],dt=r("option",null,"---",-1),ct=["value","selected"];function ut(e,t,c,h,a,s){const g=i("WarehouseTopbar"),f=i("TableHeader"),b=i("Loader"),u=i("vue-awesome-paginate"),U=i("Pagination01"),D=i("Paginate"),T=i("Input"),P=i("Select"),V=i("Textarea"),E=i("ModalLayout");return n(),d(v,null,[r("div",We,[r("div",Be,[l(g),r("div",Ke,[r("div",Ae,[r("div",null,[r("input",{type:"text",placeholder:"Search",onInput:t[0]||(t[0]=o=>s.clickSearch(o.target.value,a.order)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,32)]),r("div",He,[r("select",{placeholder:"Search",onInput:t[1]||(t[1]=o=>s.onPaginate(o.target.value)),class:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary ml-4"},Xe,32)]),s.hasPermission("Warehouse-create")?(n(),d("div",Ge,[r("span",{onClick:t[2]||(t[2]=o=>s.onModal(null)),class:"cursor-pointer inline-flex items-center justify-center rounded-md bg-primary py-3 px-10 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10"},m(s.getName("create")),1)])):y("",!0)]),l(f),(n(!0),d(v,null,w(a.items,(o,W)=>(n(),d("div",Je,[r("div",{class:"flex justify-content-end gap-3 p-2.5 xl:p-5",onClick:I=>this.$router.push({path:"/producy-documents/add-products",query:{id:o.id}})},[M(m(W+1)+". ",1),r("p",Ye,m(o.name),1)],8,Qe),r("div",Ze,[r("p",$e,m(h.useConterStore().formatNumber(o.summ))+" uzs ",1)]),r("div",et,[r("p",tt,m(o.status==14?s.getName("notSaved"):o.updated_at),1)]),r("div",st,[r("p",at,[o.status==14&&s.hasPermission("Warehouse-update")?(n(),d("i",{key:0,onClick:I=>s.onModal(o.id),class:"fa-solid setting-icon fa-pen-to-square"},null,8,rt)):y("",!0),M("   "),s.hasPermission("Warehouse-update")?(n(),d("i",{key:1,title:s.getName("AddProduct"),onClick:I=>this.$router.push({path:"/producy-documents/add-products",query:{id:o.id}}),class:"fa-solid fa-file-invoice setting-icon"},null,8,ot)):y("",!0),M("   "),s.hasPermission("Warehouse-delete")?(n(),d("i",{key:2,onClick:I=>s.onDelete(o.id),class:"fa-solid text-danger fa-trash setting-icon"},null,8,nt)):y("",!0)])])]))),256)),a.items.length==0&&a.search==""?(n(),N(b,{key:0})):y("",!0),l(D,null,{default:p(()=>[l(U,null,{default:p(()=>[l(u,{"total-items":a.last_page,"items-per-page":1,"max-pages-shown":1,modelValue:a.currentPage,"onUpdate:modelValue":t[3]||(t[3]=o=>a.currentPage=o),"on-click":s.onClickHandler},null,8,["total-items","modelValue","on-click"])]),_:1})]),_:1})])])]),l(E,{onOnButton:t[8]||(t[8]=o=>s.CRUD()),isModal:a.isModal,onCloseModal:t[9]||(t[9]=o=>s.closeModal()),Title:a.crud=="created"?s.getName("create"):s.getName("update")},{default:p(()=>[l(T,{Label:s.getName("name_content"),onOnInput:t[4]||(t[4]=o=>a.Name=o),isError:s.hasKey("name"),message:a.errorObj.name,Value:a.Name},null,8,["Label","isError","message","Value"]),l(P,{Label:s.getName("Warehouse"),onOnSelect:t[5]||(t[5]=o=>a.warehouseId=o),isError:s.hasKey("warehouse_id"),message:a.errorObj.warehouse_id},{default:p(()=>[it,(n(!0),d(v,null,w(a.Warehouses,o=>(n(),d("option",{value:o.id,selected:o.id==a.warehouseId},m(o.name),9,lt))),256))]),_:1},8,["Label","isError","message"]),l(P,{Label:s.getName("Suppliers"),onOnSelect:t[6]||(t[6]=o=>a.supplierId=o),isError:s.hasKey("supplier_id"),message:a.errorObj.supplier_id},{default:p(()=>[dt,(n(!0),d(v,null,w(a.Suppliers,o=>(n(),d("option",{value:o.id,selected:o.id==a.supplierId},m(o.name),9,ct))),256))]),_:1},8,["Label","isError","message"]),l(V,{Label:s.getName("Description"),onOnSelect:t[7]||(t[7]=o=>a.Description=o),isError:s.hasKey("description"),message:a.errorObj.description,value:a.Description},null,8,["Label","isError","message","value"])]),_:1},8,["isModal","Title"])],64)}const mt=_(Ee,[["render",ut]]),Ct={__name:"index",setup(e){return(t,c)=>(n(),N(S,{Animation:!1},{default:p(()=>[l(mt)]),_:1}))}};export{Ct as default};

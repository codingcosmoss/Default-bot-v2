import{P as K}from"./Page-oDaSi7Lo.js";import{m as Q,q as O,s as ee,v as te,x as se,y as ie,z as ae,B as M,C as re,D as oe,_ as j,o as p,b as m,j as ne,M as le,E as de,u as ce,H as ue,I as $,J as he,K as pe,c as me,w as S,r as C,e as t,d as k,F as B,g as A,a as u,t as h}from"./app-YVDEE9Za.js";import{A as T}from"./apexcharts.common-AbQ-QTuq.js";import{C as be}from"./CardBlock-4ht9T8B7.js";import{C as fe}from"./CardClassicBlock-MS3IFAP3.js";const I=["animationEnd","beforeMount","mounted","updated","click","mouseMove","mouseLeave","legendClick","markerClick","selection","dataPointSelection","dataPointMouseEnter","dataPointMouseLeave","beforeZoom","beforeResetZoom","zoomed","scrolled","brushScrolled"],E=Q({name:"apexchart",props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0},width:{default:"100%"},height:{default:"auto"}},emits:I,setup(e,{emit:r}){const n=O(null),a=O(null),s=i=>i&&typeof i=="object"&&!Array.isArray(i)&&i!=null,x=(i,o)=>{typeof Object.assign!="function"&&function(){Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");let w=Object(l);for(let v=1;v<arguments.length;v++){let N=arguments[v];if(N!=null)for(let z in N)N.hasOwnProperty(z)&&(w[z]=N[z])}return w}}();let f=Object.assign({},i);return s(i)&&s(o)&&Object.keys(o).forEach(l=>{s(o[l])?l in i?f[l]=x(i[l],o[l]):Object.assign(f,{[l]:o[l]}):Object.assign(f,{[l]:o[l]})}),f},d=async()=>{if(await oe(),a.value)return;const i={chart:{type:e.type||e.options.chart.type||"line",height:e.height,width:e.width,events:{}},series:e.series},o=e.options.chart.events;I.forEach(l=>{let w=(...v)=>r(l,...v);i.chart.events[l]=(...v)=>{w(...v),o&&o.hasOwnProperty(l)&&o[l](...v)}});const f=x(e.options,i);return a.value=new T(n.value,f),a.value.render()},_=()=>(b(),d()),b=()=>{a.value.destroy()},g=(i,o)=>a.value.updateSeries(i,o),P=(i,o,f,l)=>a.value.updateOptions(i,o,f,l),D=i=>a.value.toggleSeries(i),L=i=>{a.value.showSeries(i)},c=i=>{a.value.hideSeries(i)},q=(i,o)=>a.value.appendSeries(i,o),R=()=>{a.value.resetSeries()},V=(i,o)=>{a.value.toggleDataPointSelection(i,o)},F=i=>a.value.appendData(i),U=(i,o)=>a.value.zoomX(i,o),J=i=>a.value.dataURI(i),X=i=>a.value.setLocale(i),Y=(i,o)=>{a.value.addXaxisAnnotation(i,o)},G=(i,o)=>{a.value.addYaxisAnnotation(i,o)},W=(i,o)=>{a.value.addPointAnnotation(i,o)},Z=(i,o)=>{a.value.removeAnnotation(i,o)},H=()=>{a.value.clearAnnotations()};ee(()=>{window.ApexCharts=T}),te(()=>{n.value=se().proxy.$el,d()}),ie(()=>{a.value&&b()});const y=ae(e);return M(y.options,()=>{!a.value&&e.options?d():a.value.updateOptions(e.options)}),M(y.series,()=>{!a.value&&e.series?d():a.value.updateSeries(e.series)},{deep:!0}),M(y.type,()=>{_()}),M(y.width,()=>{_()}),M(y.height,()=>{_()}),{chart:a,init:d,refresh:_,destroy:b,updateOptions:P,updateSeries:g,toggleSeries:D,showSeries:L,hideSeries:c,resetSeries:R,zoomX:U,toggleDataPointSelection:V,appendData:F,appendSeries:q,addXaxisAnnotation:Y,addYaxisAnnotation:G,addPointAnnotation:W,removeAnnotation:Z,clearAnnotations:H,setLocale:X,dataURI:J}},render(){return re("div",{class:"vue-apexcharts"})}}),ve=e=>{e.component(E.name,E)};E.install=ve;const Ce={},xe={class:"col-sm-3"},_e=ne('<div class="card"><div class="card-body"><div class="d-flex align-items-center mb-3"><div class="avatar-xs me-3"><span class="avatar-title rounded-circle bg-primary-subtle text-primary font-size-18"><i class="bx bx-copy-alt placeholder"></i></span></div><h5 class="font-size-14 mb-0 placeholder">Mijozlarga sotilgan dorilar</h5></div><div class="text-muted mt-4"><h4 class="placeholder">1,452 </h4><div class="d-flex placeholder"><span class="badge badge-soft-success font-size-12"></span> <span class="ms-2 text-truncate">From previous period</span></div></div></div></div>',1),ge=[_e];function ye(e,r){return p(),m("div",xe,ge)}const Me=j(Ce,[["render",ye]]),Se={components:{ModalCentered:le,CardClassicBlockLoader:Me,apexchart:E,CardClassicBlock:fe,CardBlock:be,BaseBox:de,Page:K},setup(){return{counterStore:ce()}},data(){return{items:[],item:[],paginateCount:10,cardClassicLoader:!1,column:"id",type:"desc",errors:[],loader:!1,cardLoader:!1,sellings:[],purchases:[],registeredMedicines:0,expiredMedicines:[],importedMedicines:0,realMedicines:0,expiredMedicinesCount:0,medicinesSoldCustomers:[],medicinesSoldCustomersAmount:0,importedSubtotalMedicines:[],importedSubtotalMedicinesAmount:0,expenses:[],netProfit:[],totalNetProfit:[],isChart2:!1,chart2Data:{series:[{data:[]}],chartOptions:{chart:{type:"bar",height:380},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"end",horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]}}},realMedicineNumbers:[],realMedicineArr:[],outdatedDrugs:[],expiredDrugs:[]}},methods:{chart1(){var e={chart:{height:380,width:"100%",type:"bar",animations:{zoom:!1,initialAnimation:{enabled:!1}}},series:[{name:this.$t("Selling"),data:this.sellings},{name:this.$t("Purchase"),data:this.purchases}],xaxis:{type:"datetime"}},r=new T(document.querySelector("#dashboardChart1"),e);r.render()},chart3(){var e={chart:{height:380,width:"100%",type:"pie",animations:{initialAnimation:{enabled:!1}}},series:this.realMedicineNumbers,labels:this.realMedicineArr},r=new T(document.querySelector("#dashboardChart3"),e);r.render()},chart4(){var e={chart:{height:350,type:"line",zoom:{enabled:!1}},series:[{name:this.$t("Amount"),data:[10,41,35,51,49,62,69,91,148]}],dataLabels:{enabled:!1},stroke:{curve:"straight"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:0}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]}},r=new T(document.querySelector("#dashboardChart4"),e);r.render()},async quantityVerification(){try{this.loader=!0;const e=await ue();this.loader=!1}catch(e){$(this,e)}},async dashboardCart1(){try{this.cardLoader=!0;const e=await he();let r=e.data;if(e.status){this.registeredMedicines=r.medicines_count,this.realMedicinesArr=r.realMedicinesCount,this.realMedicines=0,r.realMedicinesCount.forEach(s=>{this.realMedicines+=s.amount,s.amount>0?(this.realMedicineNumbers.push(s.amount),this.realMedicineArr.push(s.name)):(s.amount=0,this.outdatedDrugs.push(s))}),this.expiredMedicinesCount=0,r.expiredMedicines.forEach(s=>{this.expiredMedicinesCount+=s.amount,this.expiredDrugs.push(s)}),(this.outdatedDrugs.length>0||this.expiredDrugs.length)&&new bootstrap.Modal(document.getElementById("dashboardAlert")).show(),this.chart3(),r.importedMedicines.forEach(s=>{this.importedMedicines+=s.amount});let n=[],a=[];r.bestSellers.forEach(s=>{n.push(s.name),a.push(s.total_amount)}),this.chart2Data.chartOptions.xaxis.categories=n,this.chart2Data.series[0].data=a,this.isChart2=!0,this.expiredMedicines=r.expiredMedicines}this.cardLoader=!1}catch(e){$(this,e)}},async dashboardCart2(){try{this.cardClassicLoader=!0;const e=await pe();let r=e.data;e.status&&(this.medicinesSoldCustomers=r.medicinesSoldCustomers,this.importedSubtotalMedicines=r.importedSubtotalMedicines,this.expenses=r.expenses,r.medicinesSoldCustomers.forEach(n=>{this.medicinesSoldCustomersAmount+=Number(n.total_amount)}),r.importedSubtotalMedicines.forEach(n=>{this.importedSubtotalMedicinesAmount+=Number(n.amount)}),r.sellings.forEach(n=>{this.sellings.push({x:n.date.split("-")[1]+"-"+n.date.split("-")[2]+"-"+n.date.split("-")[0]+" GMT",y:n.subtotal.toFixed(2)})}),r.purchases.forEach(n=>{this.purchases.push({x:n.date.split("-")[1]+"-"+n.date.split("-")[2]+"-"+n.date.split("-")[0]+" GMT",y:n.subtotal.toFixed(2)})}),this.medicinesSoldCustomers.forEach((n,a)=>{let s=0;r.importedSubtotalMedicines.forEach(d=>{d.currency_id==n.currency_id&&(s+=Number(d.total_cost))}),r.expenses.forEach(d=>{d.currency_id==n.currency_id&&(s+=Number(d.total_cost))});let x=0;n.total_cost-s>0&&(x=n.total_cost-s),this.totalNetProfit.push({total_cost:x,sign:n.sign})}),this.cardClassicLoader=!1),this.cardClassicLoader=!1,this.chart1()}catch(e){$(this,e)}}},mounted(){this.dashboardCart1(),this.dashboardCart2(),this.quantityVerification()}},Ae={class:"row"},Te={class:"col-lg-3 cursor-pointer"},we=t("div",{class:"card mini-stats-wid"},[t("div",{class:"card-body"},[t("div",{class:"d-flex flex-wrap"},[t("div",{class:"me-3"},[t("p",{class:"mb-2 placeholder"},"Uzbekistani Uzbekistani"),t("br"),t("h5",{class:"mb-0 placeholder"},"201 000 сўм")]),t("div",{class:"avatar-sm ms-auto"},[t("div",{class:"avatar-title bg-light rounded-circle text-primary font-size-20"},[t("i",{class:"bx bx-money placeholder"})])])])])],-1),Ne=[we],ke={key:0,class:"row"},Be={key:1,class:"row"},Ee={key:2,class:"row"},Pe={class:"row"},De=t("div",{id:"dashboardChart1"},null,-1),Le={key:0,id:"dashboardChart2"},ze=t("div",{id:"dashboardChart3"},null,-1),$e={class:"col-xl-12"},Oe={class:"card"},Ie={class:"card-body p-0"},je={class:"card-title text-center"},qe={class:"table-responsive"},Re={class:"table mb-0"},Ve={class:"table-light"},Fe={class:"font-size-12 text-wrap"},Ue={class:"col-xl-12"},Je={class:"card"},Xe={class:"card-body p-0 text-center"},Ye={class:"card-title"},Ge={class:"table-responsive"},We={class:"table mb-0"},Ze={class:"table-light"};function He(e,r,n,a,s,x){const d=C("CardBlock"),_=C("CardClassicBlockLoader"),b=C("CardClassicBlock"),g=C("BaseBox"),P=C("apexchart"),D=C("ModalCentered"),L=C("Page");return p(),me(L,{Title:""},{default:S(()=>[t("div",Ae,[s.cardLoader?(p(),m(B,{key:0},k(4,c=>t("div",Te,Ne)),64)):A("",!0)]),s.cardLoader?A("",!0):(p(),m("div",ke,[t("div",{class:"col-md-3 cursor-pointer",onClick:r[0]||(r[0]=c=>this.$router.push("/admin/medicines"))},[u(d,{Title:e.$t("RegisteredMedicines"),Number:a.counterStore.formatNumber(s.registeredMedicines),Icon:"bx bx-copy-alt font-size-24"},null,8,["Title","Number"])]),t("div",{class:"col-md-3 cursor-pointer",onClick:r[1]||(r[1]=c=>this.$router.push("/admin/expired-medicines"))},[u(d,{Title:e.$t("ExpiredMedicines"),Number:a.counterStore.formatNumber(s.expiredMedicinesCount),Icon:"bx bx-time font-size-24"},null,8,["Title","Number"])]),t("div",{class:"col-md-3 cursor-pointer",onClick:r[2]||(r[2]=c=>this.$router.push("/admin/import/medicines"))},[u(d,{Title:e.$t("ImportedDrugs"),Number:a.counterStore.formatNumber(s.importedMedicines),Icon:"bx bx-import font-size-24"},null,8,["Title","Number"])]),t("div",{class:"col-md-3 cursor-pointer",onClick:r[3]||(r[3]=c=>this.$router.push("/admin/medicines"))},[u(d,{Title:e.$t("WarehouseAvailableMedicines"),Number:a.counterStore.formatNumber(s.realMedicines),Icon:"bx bx-pie-chart-alt-2 font-size-24"},null,8,["Title","Number"])])])),s.cardClassicLoader?(p(),m("div",Be,[(p(),m(B,null,k(4,c=>u(_)),64))])):A("",!0),s.cardClassicLoader?A("",!0):(p(),m("div",Ee,[u(b,{Icon:"bx bx-export",Title:e.$t("TotalPaid"),Currencies:s.medicinesSoldCustomers,Share:s.medicinesSoldCustomersAmount,Text:e.$t("SubtotalAmount")+":"},null,8,["Title","Currencies","Share","Text"]),u(b,{Icon:"bx bx-import",Title:e.$t("ImportPaid"),Currencies:s.importedSubtotalMedicines,Share:s.importedSubtotalMedicinesAmount,Text:e.$t("SubtotalAmount")+":"},null,8,["Title","Currencies","Share","Text"]),u(b,{Icon:"bx bx-collection",Title:e.$t("TotalCosts"),Currencies:s.expenses,Share:"",Text:""},null,8,["Title","Currencies"]),u(b,{Icon:"bx bx-collection",Title:e.$t("TotalNetProfit"),Currencies:s.totalNetProfit,Share:"",Text:""},null,8,["Title","Currencies"])])),t("div",Pe,[u(g,{Col:"col-xl-12",Title:e.$t("SalesandPurchasestatistics")},{default:S(()=>[De]),_:1},8,["Title"]),u(g,{Title:e.$t("MostSoldMedicines")},{default:S(()=>[s.isChart2?(p(),m("div",Le,[u(P,{type:"bar",height:"345",options:s.chart2Data.chartOptions,series:s.chart2Data.series},null,8,["options","series"])])):A("",!0)]),_:1},8,["Title"]),u(g,{Title:e.$t("CurrentMedicinesAmount")},{default:S(()=>[ze]),_:1},8,["Title"])]),u(D,{isSubmit:!1,ModalName:"dashboardAlert",Title:e.$t("Info")},{default:S(()=>[t("div",$e,[t("div",Oe,[t("div",Ie,[t("h4",je,h(e.$t("ExpiredMedicines")),1),t("div",qe,[t("table",Re,[t("thead",Ve,[t("tr",null,[t("th",null,h(e.$t("MedicineName")),1),t("th",null,h(e.$t("Collection")),1),t("th",null,h(e.$t("Amount")),1),t("th",null,h(e.$t("ExpirationDate")),1)])]),t("tbody",null,[(p(!0),m(B,null,k(s.expiredDrugs,c=>(p(),m("tr",null,[t("td",null,[t("p",Fe,h(c.medicine.name),1)]),t("td",null,h(c.name),1),t("td",null,h(c.amount),1),t("td",null,h(c.expiry_date_finished),1)]))),256))])])])])])]),t("div",Ue,[t("div",Je,[t("div",Xe,[t("h4",Ye,h(e.$t("WarehouseNotAmount")),1),t("div",Ge,[t("table",We,[t("thead",Ze,[t("tr",null,[t("th",null,h(e.$t("MedicineName")),1),t("th",null,h(e.$t("Amount")),1)])]),t("tbody",null,[(p(!0),m(B,null,k(s.outdatedDrugs,c=>(p(),m("tr",null,[t("td",null,h(c.name),1),t("td",null,h(c.amount),1)]))),256))])])])])])])]),_:1},8,["Title"])]),_:1})}const it=j(Se,[["render",He]]);export{it as default};

import{b,a as B,P as L}from"./Page-s6HucaFA.js";import{_ as C,o as m,c as f,a as u,t as _,b as N,n as y,j as P,M as x,u as T,W as v,s,X as D,Y as A,Z as E,$ as O,a0 as M,A as o,a1 as $,a2 as k,a3 as U,e as j,w as h,f as l,g as i,d as q}from"./app-KIduKiR5.js";import{I as R}from"./ImageInput-iUHCgkgR.js";import{D as z}from"./DefaultInput-s717lcsR.js";import{D as F}from"./DefaultSelect-XsnDk09H.js";import{S as g}from"./sweetalert2.all-f-tRqvfV.js";const J={props:{Class:{type:String,default:"col-lg-12 col-sm-12"},inputClass:{type:String,default:""},Name:{type:[String],default:""},Label:{type:String,default:"Label title"},Pholder:{type:String,default:"enter here..."},Type:{type:String,default:"text"},Value:{type:[String,Number],default:""},Validated:{type:[Array,Object,String],default:[]}}},W={key:0,class:"form-label"},X={class:"input-group",id:"timepicker-input-group1"},Y=["type","value","placeholder"],Z={class:"input-group-text"};function G(t,e,r,S,a,p){return m(),f("div",{class:y(r.Class)},[u("div",null,[r.Label!=""?(m(),f("label",W,_(r.Label),1)):N("",!0),u("div",X,[u("input",{class:y(["form-control",r.Validated[r.Name]?"border-danger "+r.inputClass:r.inputClass]),type:r.Type,value:r.Value,placeholder:r.Pholder,onInput:e[0]||(e[0]=c=>this.$emit("onInput",c.target.value))},null,42,Y),u("span",Z,[P(t.$slots,"default")])])])],2)}const H=C(J,[["render",G]]),K={components:{DefaultIconInput:H,ModalCentered:x,DefaultSelect:F,PrimaryButton:b,PrimaryBtn:B,DefaultInput:z,ImageInput:R,Page:L},setup(){return{counterStore:T()}},data(){return{items:[],item:[],paginateCount:10,last_page:1,current_page:1,column:"id",type:"desc",errors:[],headers:[],loader:!1,image:"",name:"",phone:"",email:"",address:"",currency_id:"",currencies:[],amount:0,sign:"",oldSign:""}},methods:{onCurrency(t){let e=this.counterStore.inputNumberFormat("currency_input",this.amount,t);this.amount=e},async index(){try{this.loader=!0;const t=await v();this.items=t.data,this.loader=!1}catch(t){s(this,t)}},openModal(){new bootstrap.Modal(document.getElementById("Currency")).show()},async getCurrencies(){try{this.loader=!0;const t=await D();this.currencies=t.data,this.loader=!1}catch(t){s(this,t)}},async indexActives(){try{this.loader=!0;const t=await A(this.paginateCount);this.items=t.data,this.loader=!1}catch(t){s(this,t)}},async indexPaginates(t=1){try{this.loader=!0;const e=await E(this.paginateCount,t);this.current_page=e.data.pagination.current_page,this.last_page=e.data.pagination.last_page,this.items=e.data.items,this.loader=!1}catch(e){s(this,e)}},async orderBys(){try{this.loader=!0;const t=await settingOrderBys(this.column,this.type);this.items=t.data,this.loader=!1}catch(t){s(this,t)}},async show(t=null){try{this.loader=!0;const e=await O(this.counterStore.user.clinic_id);this.item=e.data,this.name=e.data.name,this.address=e.data.address,this.email=e.data.email,this.phone=e.data.phone,this.currency_id=e.data.currency_id,this.oldSign=e.data.currency.sign,this.image=e.data.logo[0].url,this.loader=!1;let r=this.counterStore.user;r.logo=e.data.logo,r.currency=e.data.currency,r.currency_id=e.data.currency_id,localStorage.setItem("user",JSON.stringify(r)),this.counterStore.updateUser(r)}catch(e){s(this,e)}},async create(){try{this.loader=!0;const e=await M({});return e.status?(o("success",this.$t("create")),this.loader=!1,!0):(this.errors=e.errors,o("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return s(this,t),this.loader=!1,!1}},async update(){try{this.loader=!0;let t={name:this.name,address:this.address,email:this.email,phone:this.phone,image:this.image};const e=await $(null,t);return e.status?(o("success",this.$t("update")),this.counterStore.updateCurrency(e.data.currency),this.show(e.data.clinic_id),this.loader=!1,!0):(this.errors=e.errors,o("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return s(this,t),this.loader=!1,!1}},onUpdate(){g.fire({title:this.$t("CurrencyInfo"),text:"",icon:"info"}).then(t=>{t.isConfirmed&&this.updateCurrency()})},async updateCurrency(){try{if(this.amount<=0){this.errors.amount=this.$t("CurrencyRequired"),o("error",this.$t("CurrencyRequired"));return}this.loader=!0;let t={currency_id:this.currency_id,amount:this.amount};const e=await k(t);return e.status?(this.counterStore.updateCurrency(e.data.currency),this.show(),this.counterStore.hiddenModal("Currency"),g.fire({title:this.$t("update"),text:"",icon:"success"}),this.loader=!1,!0):(this.errors=e.errors,o("error",this.$t("formError")),this.loader=!1,!1)}catch(t){return s(this,t),this.loader=!1,!1}},async search(t=""){try{if(this.loader=!0,t=="")return this.indexPaginates(),!0;const e=await settingSearch(t);return this.items=e.data,this.loader=!1,e.status?(this.loader=!1,!0):(o("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return s(this,e),this.loader=!1,!1}},async delete(t){try{if(!confirm(this.$t("DeleteAlert")))return!1;const e=await U(t);return this.items=e.data,e.status&&(this.indexPaginates(),o("success",this.$t("delete"))),o("error",this.$t("formError")),!1}catch(e){return s(this,e),!1}}},mounted(){this.show(null)}},Q={class:"row"};function ee(t,e,r,S,a,p){const c=l("ImageInput"),d=l("DefaultInput"),V=l("PrimaryButton"),I=l("BaseBox"),w=l("Page");return m(),j(w,{Title:""},{default:h(()=>[u("div",Q,[i(I,{Col:"col-xl-6",Title:t.$t("CompanySettings")},{default:h(()=>[i(c,{Title:t.$t("CompanyLogo"),Name:"CompanyLogo",onCompanyLogo:e[0]||(e[0]=n=>(a.image=n,delete this.errors.image)),Image:a.image,Validated:a.errors},null,8,["Title","Image","Validated"]),i(d,{Label:t.$t("CompanyName"),Name:"name",Type:"text",Validated:a.errors,Value:a.name,onOnInput:e[1]||(e[1]=n=>(a.name=n,delete this.errors.name))},null,8,["Label","Validated","Value"]),i(d,{Label:t.$t("Address"),Name:"address",Type:"text",Validated:a.errors,Value:a.address,onOnInput:e[2]||(e[2]=n=>(a.address=n,delete this.errors.address))},null,8,["Label","Validated","Value"]),i(d,{Label:t.$t("Phone"),Name:"phone",Type:"text",Validated:a.errors,Value:a.phone,onOnInput:e[3]||(e[3]=n=>(a.phone=n,delete this.errors.phone))},null,8,["Label","Validated","Value"]),i(d,{Label:t.$t("Email"),Name:"email",Type:"text",Validated:a.errors,Value:a.email,onOnInput:e[4]||(e[4]=n=>(a.email=n,delete this.errors.email))},null,8,["Label","Validated","Value"]),i(V,{Loader:a.loader,onOnButton:p.update},{default:h(()=>[q(_(t.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"])])]),_:1})}const ie=C(K,[["render",ee]]);export{ie as default};

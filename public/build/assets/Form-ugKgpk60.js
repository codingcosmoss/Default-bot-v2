import{P as E}from"./Page--X10l4un.js";import{_ as h,o as u,c as f,a as o,t as d,n as b,h as g,s as j,u as x,R as V,a5 as O,A as P,a6 as B,r as p,b as i,w as C,F as y,D,f as I}from"./app-0LpGGDjw.js";import{P as T}from"./PrimaryButton-1I3sGlmq.js";import{P as K}from"./PrimaryButton2-iNe1uhPp.js";import{S as N}from"./Select-RH5o7MjU.js";import{M as F}from"./MultiSelect-tmt1FHCk.js";import{C as k}from"./Checkbox01-89eBkIYd.js";import{I as S}from"./ImageInput-aVgN7gst.js";import"./Select-vvngwYib.js";const A={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1},isLoginError:{type:Boolean,default:!1},message:{type:String,default:""},Class:{type:String,default:""}}},M={class:"mb-2.5 block text-black dark:text-white"},q=["value","type"],z={key:0,class:"text-danger"};function G(s,e,l,n,t,r){return u(),f("div",{class:b(l.Couple?"mb-4.5":"w-full xl:w-1/2")},[o("label",M,d(l.Label),1),o("input",{value:l.Value,type:l.Type,class:b([[l.Class,{isError:l.isError}],"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"...",onInput:e[0]||(e[0]=m=>this.$emit("onInput",m.target.value))},null,42,q),l.isError?(u(),f("p",z,d(l.message),1)):g("",!0)],2)}const v=h(A,[["render",G]]),J={components:{Input:v},props:{Couple:{type:Boolean,default:!0},Title:{type:String,default:"Checkbox title"}}};function R(s,e,l,n,t,r){return u(),f("li",null,[o("input",{type:"checkbox",onInput:e[0]||(e[0]=m=>this.$emit("onCheck",!0))},null,32),j(" Â  "+d(l.Title),1)])}const W=h(J,[["render",R],["__scopeId","data-v-33f644d9"]]),H={props:{Couple:{type:Boolean,default:!0},Label:{type:String,default:"Input label"},Value:{type:[String,Boolean,Number],default:""},Type:{type:String,default:"text"},isError:{type:Boolean,default:!1}}},Q={class:"mb-2.5 block text-black dark:text-white"},U=["value","type"];function X(s,e,l,n,t,r){return u(),f("div",{class:b(l.Couple?"mb-4.5":"w-full xl:w-1/2")},[o("label",Q,d(l.Label),1),o("input",{value:l.Value,type:l.Type,class:b([l.isError==!0?"isError":"","rounded border-[1.5px] border-stroke bg-transparent py-20 px-2 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"]),placeholder:"Select subject",onInput:e[0]||(e[0]=m=>this.$emit("onInput",m.target.value)),style:{width:"80px",height:"40px"}},null,42,U)],2)}const Y=h(H,[["render",X]]),Z={setup(){return x()},computed:{checkbox01(){return k}},data(){return{name:"",order:"",code:"",price:"",category:"",material_price:"",technic_price:"",status:1,isLoginError:!1,errorObj:{},categories:[],Checkbox:"",last_name:"",first_name:"",phone:"(+998) ",job:"",address:"",gender:"",birthday:"",sort_order:"",diseasesIds:[],allDiseases:[],Image:"",Loader:!1}},components:{ImageInput:S,Checkbox01:k,Select:N,PrimaryButton2:K,MultiSelect:F,PrimaryButton:T,InputColor:Y,Checkbox:W,Input:v},methods:{getName(s){return x().getName(s)},formatPhone(s){const e=["0","1","2","3","4","5","6","7","8","9",""," "],l=document.querySelector(".phone_input");let n=this.phone.length<s.length;if(console.log(s,s.length),n)if(e.includes(s.slice(s.length-1,s.length))){if(s.length>19)return l.value=this.phone,!1}else return l.value=this.phone,!1;else if(s.length>20)return l.value=this.phone,!1;s.length==4&&n?this.phone="(+"+s+") ":s.length==9&&n?this.phone=s+" ":s.length==13&&n?this.phone=s+" ":(s.length==16||s.length==17)&&n?this.phone=s+" ":this.phone=s},async getCategories(){const s=await V(null,1e3);this.categories=s.data.items},async create(){this.Loader=!0;var s=[];this.diseasesIds.length>0?this.diseasesIds.forEach(n=>{s.push(n.id)}):s=0;var e={first_name:this.first_name,last_name:this.last_name,phone:this.phone,job:this.job,address:this.address,gender:this.Checkbox,birthday:this.birthday,sort_order:this.sort_order,diseasesIds:s,price:0,image:this.Image};const l=await O(e);console.log(l),l.status?(P("success","Created successfully !"),this.$router.push("/patients")):(this.errorObj=l.data,this.Loader=!1)},async getDisiases(){const s=await B(null,1e3);var e=[];s.data.items.forEach(l=>{e.push({name:l.name,id:l.id})}),this.allDiseases=e},hasKey(s){return s in this.errorObj},onSelect(s){this.diseasesIds.indexOf(s)==-1&&(this.diseasesIds.push({name:this.allDiseases.filter(e=>e.id==Number(s))[0].name,id:this.allDiseases.filter(e=>e.id==Number(s))[0].id}),this.allDiseases=this.allDiseases.filter(e=>e.id!=Number(s)))},onPush(s){this.allDiseases.push(s),this.diseasesIds=this.diseasesIds.filter(e=>e.id!=s.id)},hasPermission(){if(localStorage.getItem("permissions").split(",").includes("Patients-create"))return!0;this.$router.go(-1)}},mounted(){this.getCategories(),this.getDisiases(),this.hasPermission()}},$={style:{"justify-content":"flex-end"},class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},ee={class:"flex items-center gap-2"},se={class:"font-medium text-primary"},te={class:"grid grid-cols-1 gap-9 sm:grid-cols-2"},re={class:"flex flex-col gap-9"},oe={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},le={class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},ae={class:"font-semibold text-black dark:text-white"},ne={action:"#"},ie={class:"p-6.5"},de={class:"flex flex-col gap-9"},ue={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},ce=o("div",{class:"border-b border-stroke py-4 px-6.5 dark:border-strokedark"},[o("h3",{class:"font-semibold text-black dark:text-white"})],-1),me={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},fe={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},pe={class:"mb-2.5 block text-black dark:text-white"},he={class:"flex flex-col gap-6 xl:flex-row px-6.5 mt-6.5"},be={class:"flex flex-col gap-6 xl:flex-row p-6.5"},ge={class:"flex flex-col gap-6 xl:flex-row px-6.5"},_e=o("option",{selected:""},"---",-1),xe=["value"],ye={class:"pl-7 p-6.5",style:{display:"flex","justify-content":"center"}};function ke(s,e,l,n,t,r){const m=p("ImageInput"),c=p("Input"),_=p("checkbox01"),L=p("MultiSelect"),w=p("loader-spinning");return u(),f(y,null,[o("div",$,[o("nav",null,[o("ol",ee,[o("li",null,[o("a",{class:"font-medium cursor-pointer",onClick:e[0]||(e[0]=a=>this.$router.push("/patients"))},d(r.getName("Patients"))+" /",1)]),o("li",se,d(r.getName("create")),1)])])]),o("div",te,[o("div",re,[o("div",oe,[o("div",le,[o("h3",ae,d(r.getName("Patients")),1)]),o("form",ne,[o("div",ie,[i(m,{onImage:e[1]||(e[1]=a=>t.Image=a),Label:"Photo"})])])])]),o("div",de,[o("div",ue,[ce,o("div",me,[i(c,{Couple:!1,Label:r.getName("last_name"),onOnInput:e[2]||(e[2]=a=>t.last_name=a),isError:r.hasKey("last_name"),message:t.errorObj.last_name,Value:t.last_name},null,8,["Label","isError","message","Value"]),i(c,{Couple:!1,Label:r.getName("name"),onOnInput:e[3]||(e[3]=a=>t.first_name=a),isError:r.hasKey("first_name"),message:t.errorObj.first_name,Value:t.first_name},null,8,["Label","isError","message","Value"])]),o("div",fe,[i(c,{Couple:!1,Label:r.getName("Address"),onOnInput:e[4]||(e[4]=a=>t.address=a),isError:r.hasKey("address"),message:t.errorObj.address,Value:t.address},null,8,["Label","isError","message","Value"]),o("label",pe,d(r.getName("Gender")),1),i(_,{onClick:e[5]||(e[5]=a=>(t.Checkbox=5,console.log(t.Checkbox))),onCheck:t.Checkbox==5,Title:r.getName("Male"),Class:"genderCheckbox",isError:r.hasKey("gender")},null,8,["onCheck","Title","isError"]),i(_,{onClick:e[6]||(e[6]=a=>(t.Checkbox=4,console.log(t.Checkbox))),onCheck:t.Checkbox==4,Title:r.getName("Woman"),Class:"genderCheckbox",isError:r.hasKey("gender")},null,8,["onCheck","Title","isError"])]),o("div",he,[i(c,{Couple:!1,Label:r.getName("phone"),onOnInput:e[7]||(e[7]=a=>r.formatPhone(a)),isError:r.hasKey("phone"),message:t.errorObj.phone,Value:t.phone,Class:"phone_input"},null,8,["Label","isError","message","Value"]),i(c,{Couple:!1,Label:r.getName("Job"),onOnInput:e[8]||(e[8]=a=>t.job=a),isError:r.hasKey("job"),message:t.errorObj.job,Value:t.job},null,8,["Label","isError","message","Value"])]),o("div",be,[i(c,{Couple:!1,Label:r.getName("Date_birth"),onOnInput:e[9]||(e[9]=a=>t.birthday=a),isError:r.hasKey("birthday"),message:t.errorObj.birthday,Value:t.birthday,Type:"date"},null,8,["Label","isError","message","Value"]),i(c,{Couple:!1,Label:r.getName("Serial_number"),onOnInput:e[10]||(e[10]=a=>t.sort_order=a),isError:r.hasKey("sort_order"),message:t.errorObj.sort_order,Value:t.sort_order,Type:"number"},null,8,["Label","isError","message","Value"])]),o("div",ge,[i(L,{Couple:!1,Label:r.getName("diseases"),onOnSelect:e[11]||(e[11]=a=>r.onSelect(a)),Items:t.diseasesIds,onPushArray:e[12]||(e[12]=a=>r.onPush(a))},{default:C(()=>[_e,(u(!0),f(y,null,D(t.allDiseases,a=>(u(),f("option",{value:a.id},d(a.name),9,xe))),256))]),_:1},8,["Label","Items"])]),o("div",ye,[t.Loader?(u(),I(w,{key:0,style:{margin:"0 auto"}})):g("",!0),t.Loader?g("",!0):(u(),f("button",{key:1,onClick:e[13]||(e[13]=(...a)=>r.create&&r.create(...a)),class:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray"},d(r.getName("create")),1))])])])])],64)}const Ce=h(Z,[["render",ke]]),Ie={components:{FormLayouts:Ce,Page:E}};function ve(s,e,l,n,t,r){const m=p("FormLayouts"),c=p("Page");return u(),I(c,{Classes:!1,Animation:!1},{default:C(()=>[i(m)]),_:1})}const Te=h(Ie,[["render",ve]]);export{Te as default};

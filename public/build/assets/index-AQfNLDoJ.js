import{b as g,P}from"./Page-oy7_sxtd.js";import{_ as y,u as V,O as I,J as o,P as L,Q as B,S as T,T as O,U as S,A as i,V as b,W as E,X as N,c as C,w as l,r as d,o as D,e as v,a,i as m,t as w}from"./app-wtO1z4Rv.js";import{D as x}from"./DefaultInput-gYiX_NxV.js";import{I as A}from"./ImageInput-qMtb-DiA.js";const U={components:{ImageInput:A,PrimaryButton:g,DefaultInput:x,Page:P},setup(){return{counterStore:V()}},data(){return{items:[],item:[],paginateCount:10,column:"id",type:"desc",errors:[],passwordErrors:[],loader:!1,loaderPass:!1,name:"",login:"",phone:"",email:"",image:"",password:"",repeatPassword:""}},methods:{async index(){try{const e=await I();this.items=e.data}catch(e){o(this,e)}},async indexActives(){try{const e=await L(this.paginateCount);this.items=e.data}catch(e){o(this,e)}},async indexPaginates(){try{const e=await B(this.paginateCount);this.items=e.data}catch(e){o(this,e)}},async orderBys(){try{const e=await T(this.column,this.type);this.items=e.data}catch(e){o(this,e)}},async show(e){try{const s=await O(e);this.item=s.data,this.name=s.data.name,this.login=s.data.login,this.email=s.data.email,this.phone=s.data.phone,this.image=s.data.image[0].url,localStorage.setItem("user",JSON.stringify(s.data)),this.counterStore.updateUser(s.data)}catch(s){o(this,s)}},async update(){try{this.loader=!0;let e={name:this.name,phone:this.phone,login:this.login,position:this.item.position,email:this.email,image:this.image,role_id:this.item.role_id};console.log("Data",e);const s=await S(this.item.id,e);return s.status?(i("success",this.$t("update")),this.show(s.data.id),this.loader=!1,!0):(this.errors=s.errors,i("error",this.$t("formError")),this.loader=!1,!1)}catch(e){return o(this,e),this.loader=!1,!1}},async updatePassword(){try{if(this.loaderPass=!0,this.password.length>0&&this.password!=this.repeatPassword)return this.passwordErrors={password:this.$t("RepeatPasswordAlert")},!1;let e={password:this.password};const s=await b(this.item.id,e);return console.log(s),s.status?(i("success",this.$t("update")),this.password="",this.repeatPassword="",this.loaderPass=!1,!0):(this.passwordErrors=s.errors,i("error",this.$t("formError")),this.loaderPass=!1,!1)}catch(e){return o(this,e),this.loaderPass=!1,!1}},async search(e=""){try{const s=await E(e);return this.items=s.data,s.status?!0:(i("error",this.$t("formError")),!1)}catch(s){return o(this,s),!1}},async delete(e){try{const s=await N(e);return this.items=s.data,s.status&&i("success",this.$t("delete")),i("error",this.$t("formError")),!1}catch(s){return o(this,s),!1}}},mounted(){this.show(JSON.parse(localStorage.getItem("user")).id)}},J={class:"row"};function _(e,s,k,R,t,u){const c=d("ImageInput"),n=d("DefaultInput"),p=d("PrimaryButton"),h=d("BaseBox"),f=d("Page");return D(),C(f,{Title:""},{default:l(()=>[v("div",J,[a(h,{Col:"col-xl-6",Title:e.$t("UserInfo")},{default:l(()=>[a(c,{Title:e.$t("ProfilPhoto"),Name:"ProfilImage",onProfilImage:s[0]||(s[0]=r=>(t.image=r,delete this.errors.image)),Image:t.image,Validated:t.errors},null,8,["Title","Image","Validated"]),a(n,{Label:e.$t("Name"),Name:"name",Type:"text",Validated:t.errors,Value:t.name,onOnInput:s[1]||(s[1]=r=>(t.name=r,delete this.errors.name))},null,8,["Label","Validated","Value"]),a(n,{Label:e.$t("Login"),Name:"login",Type:"text",Validated:t.errors,Value:t.login,onOnInput:s[2]||(s[2]=r=>(t.login=r,delete this.errors.login))},null,8,["Label","Validated","Value"]),a(n,{Label:e.$t("Phone"),Name:"phone",Type:"text",Validated:t.errors,Value:t.phone,onOnInput:s[3]||(s[3]=r=>(t.phone=r,delete this.errors.phone))},null,8,["Label","Validated","Value"]),a(n,{Label:e.$t("Email"),Name:"email",Type:"text",Validated:t.errors,Value:t.email,onOnInput:s[4]||(s[4]=r=>(t.email=r,delete this.errors.email))},null,8,["Label","Validated","Value"]),a(p,{Loader:t.loader,onOnButton:u.update},{default:l(()=>[m(w(e.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"]),a(h,{Col:"col-xl-6",Title:e.$t("UpdatePassword")},{default:l(()=>[a(n,{Label:e.$t("Password"),Name:"password",Type:"password",Validated:t.passwordErrors,Value:t.password,onOnInput:s[5]||(s[5]=r=>(t.password=r,delete this.passwordErrors.password))},null,8,["Label","Validated","Value"]),a(n,{Label:e.$t("RepeatPassword"),Name:"password",Type:"password",Value:t.repeatPassword,Validated:t.passwordErrors,onOnInput:s[6]||(s[6]=r=>(t.repeatPassword=r,delete this.passwordErrors.password))},null,8,["Label","Value","Validated"]),a(p,{Loader:t.loaderPass,onOnButton:u.updatePassword},{default:l(()=>[m(w(e.$t("Save")),1)]),_:1},8,["Loader","onOnButton"])]),_:1},8,["Title"])])]),_:1})}const q=y(U,[["render",_]]);export{q as default};
